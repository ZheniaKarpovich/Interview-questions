## [Main title](../README.md)
### [Interview questions](full.md)
# DB/SQL

## ะะณะปะฐะฒะปะตะฝะธะต

- [1. ะงัะพ ัะฐะบะพะต SQL ะธ ะดะปั ัะตะณะพ ะพะฝ ะธัะฟะพะปัะทัะตััั?](#1-ััะพ-ัะฐะบะพะต-sql-ะธ-ะดะปั-ัะตะณะพ-ะพะฝ-ะธัะฟะพะปัะทัะตััั)
- [2. ะะฐะทะฝะธัะฐ ะผะตะถะดั SQL ะธ NoSQL ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั](#2-ัะฐะทะฝะธัะฐ-ะผะตะถะดั-sql-ะธ-nosql-ะฑะฐะทะฐะผะธ-ะดะฐะฝะฝัั)
- [3. ะะฐะบะธะต ะพะฟะตัะฐัะธะธ ะผะพะถะฝะพ ะฒัะฟะพะปะฝััั ั ะฟะพะผะพััั SQL, ะดะปั ัะตะณะพ ะพะฝะธ ะฝัะถะฝั ะธ ะธั ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั?](#3-ะบะฐะบะธะต-ะพะฟะตัะฐัะธะธ-ะผะพะถะฝะพ-ะฒัะฟะพะปะฝััั-ั-ะฟะพะผะพััั-sql-ะดะปั-ัะตะณะพ-ะพะฝะธ-ะฝัะถะฝั-ะธ-ะธั-ะฟะพััะดะพะบ-ะฒัะฟะพะปะฝะตะฝะธั)
- [4. ะะฐะบะธะต ัะธะฟั JOIN-ะพะฒ ัััะตััะฒััั ะธ ะฒ ัะตะผ ะธั ะพัะปะธัะธั ?](#4-ะบะฐะบะธะต-ัะธะฟั-join-ะพะฒ-ัััะตััะฒััั-ะธ-ะฒ-ัะตะผ-ะธั-ะพัะปะธัะธั-)
- [5. ะงัะพ ัะฐะบะพะต ะฐะปะณะพัะธัะผั ัะพะตะดะธะฝะตะฝะธั ัะฐะฑะปะธั ะฒ SQL ะธ ะบะฐะบะธะต ะพะฝะธ ะฑัะฒะฐัั ?](#5-ััะพ-ัะฐะบะพะต-ะฐะปะณะพัะธัะผั-ัะพะตะดะธะฝะตะฝะธั-ัะฐะฑะปะธั-ะฒ-sql-ะธ-ะบะฐะบะธะต-ะพะฝะธ-ะฑัะฒะฐัั-)
- [6. ะงัะพ ัะฐะบะพะต Hash Join (ััั-ัะพะตะดะธะฝะตะฝะธะต)?](#6-ััะพ-ัะฐะบะพะต-hash-join-ััั-ัะพะตะดะธะฝะตะฝะธะต)
- [7. ะงัะพ ัะฐะบะพะต ะฟะตัะฒะธัะฝัะน ะบะปัั (Primary Key) ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั?](#7-ััะพ-ัะฐะบะพะต-ะฟะตัะฒะธัะฝัะน-ะบะปัั-primary-key-ะฒ-ะฑะฐะทะต-ะดะฐะฝะฝัั)
- [8. ะงัะพ ัะฐะบะพะต ะฒะฝะตัะฝะธะน ะบะปัั (Foreign Key) ะธ ะบะฐะบ ะพะฝ ะธัะฟะพะปัะทัะตััั?](#8-ััะพ-ัะฐะบะพะต-ะฒะฝะตัะฝะธะน-ะบะปัั-foreign-key-ะธ-ะบะฐะบ-ะพะฝ-ะธัะฟะพะปัะทัะตััั)
- [9. ะ ัะตะผ ัะฐะทะฝะธัะฐ ะผะตะถะดั PRIMARY KEY ะธ UNIQUE ะบะปััะพะผ?](#9-ะฒ-ัะตะผ-ัะฐะทะฝะธัะฐ-ะผะตะถะดั-primary-key-ะธ-unique-ะบะปััะพะผ)
- [10. ะะฐะบะธะต ะฒะธะดั ัะฒัะทะตะน ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ ัััะตััะฒััั ะธ ะบะฐะบ ะพะฝะธ ัะตะฐะปะธะทััััั?](#10-ะบะฐะบะธะต-ะฒะธะดั-ัะฒัะทะตะน-ะผะตะถะดั-ัะฐะฑะปะธัะฐะผะธ-ัััะตััะฒััั-ะธ-ะบะฐะบ-ะพะฝะธ-ัะตะฐะปะธะทััััั)
- [11. ะงัะพ ัะฐะบะพะต ะฝะพัะผะฐะปะธะทะฐัะธั? ะะฑัััะฝะธัะต ั ะฟัะธะผะตัะฐะผะธ](#11-ััะพ-ัะฐะบะพะต-ะฝะพัะผะฐะปะธะทะฐัะธั-ะพะฑัััะฝะธัะต-ั-ะฟัะธะผะตัะฐะผะธ)
- [12. ะงัะพ ัะฐะบะพะต ะดะตะฝะพัะผะฐะปะธะทะฐัะธั ะธ ะบะพะณะดะฐ ะตั ะธัะฟะพะปัะทััั?](#12-ััะพ-ัะฐะบะพะต-ะดะตะฝะพัะผะฐะปะธะทะฐัะธั-ะธ-ะบะพะณะดะฐ-ะตั-ะธัะฟะพะปัะทััั)
- [13. ะงัะพ ัะฐะบะพะต ะธะฝะดะตะบัั ะธ ะบะฐะบ ะพะฝะธ ัะปัััะฐัั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะทะฐะฟัะพัะพะฒ?](#13-ััะพ-ัะฐะบะพะต-ะธะฝะดะตะบัั-ะธ-ะบะฐะบ-ะพะฝะธ-ัะปัััะฐัั-ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั-ะทะฐะฟัะพัะพะฒ)
- [14. ะงัะพ ัะฐะบะพะต PL/SQL?](#14-ััะพ-ัะฐะบะพะต-plsql)
- [15. ะะฐะบะฐั ัะฐะทะฝะธัะฐ ะผะตะถะดั ะฟัะพัะตะดััะฝัะผ ะธ ะดะตะบะปะฐัะฐัะธะฒะฝัะผ ะฟะพะดัะพะดะพะผ ะฒ SQL?](#15-ะบะฐะบะฐั-ัะฐะทะฝะธัะฐ-ะผะตะถะดั-ะฟัะพัะตะดััะฝัะผ-ะธ-ะดะตะบะปะฐัะฐัะธะฒะฝัะผ-ะฟะพะดัะพะดะพะผ-ะฒ-sql)
- [16. ะะฑัััะฝะธัะต ัะฒะพะนััะฒะฐ ACID ะฒ ะบะพะฝัะตะบััะต ะฑะฐะท ะดะฐะฝะฝัั](#16-ะพะฑัััะฝะธัะต-ัะฒะพะนััะฒะฐ-acid-ะฒ-ะบะพะฝัะตะบััะต-ะฑะฐะท-ะดะฐะฝะฝัั)
- [17. ะงัะพ ัะฐะบะพะต ััะพะฒะตะฝั ะธะทะพะปััะธะธ ััะฐะฝะทะฐะบัะธะธ (Transaction Isolation Levels)? ะะฐะบะธะต ะฒะธะดั ะฑัะฒะฐัั ะธ ะบะฐะบะธะต ะฟัะพะฑะปะตะผั ะพะฝะธ ัะตัะฐัั ?](#17-ััะพ-ัะฐะบะพะต-ััะพะฒะตะฝั-ะธะทะพะปััะธะธ-ััะฐะฝะทะฐะบัะธะธ-transaction-isolation-levels-ะบะฐะบะธะต-ะฒะธะดั-ะฑัะฒะฐัั-ะธ-ะบะฐะบะธะต-ะฟัะพะฑะปะตะผั-ะพะฝะธ-ัะตัะฐัั-)
- [18. ะะฑัััะฝะธัะต ะปะพะณะธัะตัะบัั ะฐััะธัะตะบัััั PostgreSQL](#18-ะพะฑัััะฝะธัะต-ะปะพะณะธัะตัะบัั-ะฐััะธัะตะบัััั-postgresql)
- [19. ะะฟะธัะธ ัะธะทะธัะตัะบัั ััััะบัััั PostgreSQL](#19-ะพะฟะธัะธ-ัะธะทะธัะตัะบัั-ััััะบัััั-postgresql)
- [20. ะะฑัััะฝะธัะต MVCC ะฒ PostgreSQL](#20-ะพะฑัััะฝะธัะต-mvcc-ะฒ-postgresql)
- [21. ะงัะพ ัะฐะบะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะฝะฐ ะฟัะธะผะตัะต PostgreSQL?](#21-ััะพ-ัะฐะบะพะต-ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต-ะฝะฐ-ะฟัะธะผะตัะต-postgresql)
- [22. ะงัะพ ัะฐะบะพะต ัะฐัะดะธัะพะฒะฐะฝะธะต?](#22-ััะพ-ัะฐะบะพะต-ัะฐัะดะธัะพะฒะฐะฝะธะต)
- [23. ะงัะพ ัะฐะบะพะต ัะตะฟะปะธะบะฐัะธั?](#23-ััะพ-ัะฐะบะพะต-ัะตะฟะปะธะบะฐัะธั)
- [24. ะงัะพ ัะฐะบะพะต ะฟะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต ะฒ SQL?](#24-ััะพ-ัะฐะบะพะต-ะฟะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต-ะฒ-sql)
- [25. ะงัะพ ัะฐะบะพะต ััะธะณะณะตั?](#25-ััะพ-ัะฐะบะพะต-ััะธะณะณะตั)
- [26. ะ ัะตะผ ัะฐะทะฝะธัะฐ ะผะตะถะดั ััะธะณะณะตัะพะผ ะธ ะฟัะพัะตะดััะพะน/ััะฝะบัะธะตะน?](#26-ะฒ-ัะตะผ-ัะฐะทะฝะธัะฐ-ะผะตะถะดั-ััะธะณะณะตัะพะผ-ะธ-ะฟัะพัะตะดััะพะนััะฝะบัะธะตะน)
- [27. ะงัะพ ัะฐะบะพะต ะฟัะตะดััะฐะฒะปะตะฝะธั (views) ะธ ะบะฐะบะพะฒั ะธั ะฟัะตะธะผััะตััะฒะฐ? ะะฐะบ ะพะฝะธ ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัััั ะฒ ะบะพะฝัะตะบััะต OLAP-ัะธััะตะผ?](#27-ััะพ-ัะฐะบะพะต-ะฟัะตะดััะฐะฒะปะตะฝะธั-views-ะธ-ะบะฐะบะพะฒั-ะธั-ะฟัะตะธะผััะตััะฒะฐ-ะบะฐะบ-ะพะฝะธ-ะผะพะณัั-ะธัะฟะพะปัะทะพะฒะฐัััั-ะฒ-ะบะพะฝัะตะบััะต-olap-ัะธััะตะผ)
- [28. ะงัะพ ัะฐะบะพะต ััะบะฐะปะฐัะธั ะฑะปะพะบะธัะพะฒะพะบ (lock escalation)?](#28-ััะพ-ัะฐะบะพะต-ััะบะฐะปะฐัะธั-ะฑะปะพะบะธัะพะฒะพะบ-lock-escalation)
- [29. ะงัะพ ัะฐะบะพะต ะพะณัะฐะฝะธัะตะฝะธั (constraints) ะฒ SQL?](#29-ััะพ-ัะฐะบะพะต-ะพะณัะฐะฝะธัะตะฝะธั-constraints-ะฒ-sql)
- [30. ะะฐะบะธะต ะฒะธะดั ะฑะปะพะบะธัะพะฒะพะบ ะฑัะฒะฐัั?](#30-ะบะฐะบะธะต-ะฒะธะดั-ะฑะปะพะบะธัะพะฒะพะบ-ะฑัะฒะฐัั)
- [31. ะงัะพ ัะฐะบะพะต ะฒะทะฐะธะผะฝะฐั ะฑะปะพะบะธัะพะฒะบะฐ (deadlock)?](#31-ััะพ-ัะฐะบะพะต-ะฒะทะฐะธะผะฝะฐั-ะฑะปะพะบะธัะพะฒะบะฐ-deadlock)
- [32. ะงัะพ ัะฐะบะพะต ัะพะปะธ (roles)?](#32-ััะพ-ัะฐะบะพะต-ัะพะปะธ-roles)
- [33. ะงัะพ ัะฐะบะพะต ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ะฒ SQL ะธ ะทะฐัะตะผ ะพะฝะธ ะฝัะถะฝั?](#33-ััะพ-ัะฐะบะพะต-ะพะบะพะฝะฝัะต-ััะฝะบัะธะธ-ะฒ-sql-ะธ-ะทะฐัะตะผ-ะพะฝะธ-ะฝัะถะฝั)
- [34. ะงะตะผ ะพัะปะธัะฐัััั ะฐะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ ะพั ะพะบะพะฝะฝัั?](#34-ัะตะผ-ะพัะปะธัะฐัััั-ะฐะณัะตะณะฐัะฝัะต-ััะฝะบัะธะธ-ะพั-ะพะบะพะฝะฝัั)
- [35. ะงัะพ ัะฐะบะพะต PARTITION BY ะธ ORDER BY ะฒ ะพะบะพะฝะฝัั ััะฝะบัะธัั?](#35-ััะพ-ัะฐะบะพะต-partition-by-ะธ-order-by-ะฒ-ะพะบะพะฝะฝัั-ััะฝะบัะธัั)
- [36. ะงะตะผ ะพัะปะธัะฐัััั ROW_NUMBER(), RANK() ะธ DENSE_RANK()?](#36-ัะตะผ-ะพัะปะธัะฐัััั-row_number-rank-ะธ-dense_rank)
- [37. ะะปั ัะตะณะพ ะฝัะถะฝั LAG() ะธ LEAD()?](#37-ะดะปั-ัะตะณะพ-ะฝัะถะฝั-lag-ะธ-lead)
- [39. ะะพะถะฝะพ ะปะธ ะธัะฟะพะปัะทะพะฒะฐัั ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ะฒ WHERE?](#39-ะผะพะถะฝะพ-ะปะธ-ะธัะฟะพะปัะทะพะฒะฐัั-ะพะบะพะฝะฝัะต-ััะฝะบัะธะธ-ะฒ-where)
- [40. ะงัะพ ัะฐะบะพะต QUALIFY?](#40-ััะพ-ัะฐะบะพะต-qualify)
- [41. ะะฟัะธะผะธะทะฐัะธั SQL-ะทะฐะฟัะพัะพะฒ: EXPLAIN ะธ EXPLAIN ANALYZE](#41-ะพะฟัะธะผะธะทะฐัะธั-sql-ะทะฐะฟัะพัะพะฒ-explain-ะธ-explain-analyze)
- [42. ะงัะพ ัะฐะบะพะต BASE-ะฟะพะดัะพะด ะฒ ะฑะฐะทะฐั ะดะฐะฝะฝัั?](#42-ััะพ-ัะฐะบะพะต-base-ะฟะพะดัะพะด-ะฒ-ะฑะฐะทะฐั-ะดะฐะฝะฝัั)
- [43. ะ ัะตะผ ะพัะปะธัะธะต BASE ะธ ACID ะฟะพะดัะพะดะพะฒ?](#43-ะฒ-ัะตะผ-ะพัะปะธัะธะต-BASE-ะธ-ACID-ะฟะพะดัะพะดะพะฒ)
- [44. ะฃ ะฒะฐั ะตััั ัะฐะฑะปะธัะฐ ะปะพะณะพะฒ ั ะผะธะปะปะธะฐัะดะฐะผะธ ัััะพะบ. ะะฐะบ ะฒั ะฑัะดะตัะต ััะบะพัััั ะฟะพะธัะบ ะฟะพ ะดะฐัะต ะธ `user_id`?](#44-ั-ะฒะฐั-ะตััั-ัะฐะฑะปะธัะฐ-ะปะพะณะพะฒ-ั-ะผะธะปะปะธะฐัะดะฐะผะธ-ัััะพะบ-ะบะฐะบ-ะฒั-ะฑัะดะตัะต-ััะบะพัััั-ะฟะพะธัะบ-ะฟะพ-ะดะฐัะต-ะธ-user_id)

## 1. ะงัะพ ัะฐะบะพะต SQL ะธ ะดะปั ัะตะณะพ ะพะฝ ะธัะฟะพะปัะทัะตััั?

**SQL** (Structured Query Language โ ัะทัะบ ััััะบัััะธัะพะฒะฐะฝะฝัั ะทะฐะฟัะพัะพะฒ) โ ััะพ ะฟัะตะดะผะตัะฝะพ-ะพัะธะตะฝัะธัะพะฒะฐะฝะฝัะน ะดะตะบะปะฐัะฐัะธะฒะฝัะน ัะทัะบ ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั, ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฝัะน ะดะปั ัะฐะฑะพัั ั ัะตะปััะธะพะฝะฝัะผะธ ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั.  
ะะฝ ัะฒะปัะตััั ะพัะฝะพะฒะฝัะผ ัะทัะบะพะผ ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ัะฐะบะธั ะทะฐะดะฐั, ะบะฐะบ:
- ะธะทะฒะปะตัะตะฝะธะต ะดะฐะฝะฝัั,
- ะธะทะผะตะฝะตะฝะธะต ะดะฐะฝะฝัั,
- ะฐะดะผะธะฝะธัััะธัะพะฒะฐะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั.

### ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั SQL

- **DDL (Data Definition Language)** โ ัะทัะบ ะพะฟัะตะดะตะปะตะฝะธั ะดะฐะฝะฝัั. ะัะฟะพะปัะทัะตััั ะดะปั ะพะฟะธัะฐะฝะธั ะธ ะธะทะผะตะฝะตะฝะธั ััััะบัััั ะฑะฐะทั ะดะฐะฝะฝัั.
- **DML (Data Manipulation Language)** โ ัะทัะบ ะผะฐะฝะธะฟัะปะธัะพะฒะฐะฝะธั ะดะฐะฝะฝัะผะธ. ะัะฒะตัะฐะตั ะทะฐ ะดะพะฑะฐะฒะปะตะฝะธะต, ะธะทะผะตะฝะตะฝะธะต ะธ ัะดะฐะปะตะฝะธะต ะดะฐะฝะฝัั ะฒ ะฑะฐะทะต.
- **DCL (Data Control Language)** โ ัะทัะบ ัะฟัะฐะฒะปะตะฝะธั ะดะพัััะฟะพะผ. ะัะฟะพะปัะทัะตััั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัะฐะฒะฐะผะธ ะธ ัะฐะทัะตัะตะฝะธัะผะธ ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั.
- **TCL (Transaction Control Language)** โ ัะทัะบ ัะฟัะฐะฒะปะตะฝะธั ััะฐะฝะทะฐะบัะธัะผะธ. ะะตะณัะปะธััะตั ัะฐะฑะพัั ั ััะฐะฝะทะฐะบัะธัะผะธ (ะฝะฐะฟัะธะผะตั, ัะธะบัะฐัะธั ะธะทะผะตะฝะตะฝะธะน `COMMIT` ะธะปะธ ะธั ะพัะบะฐั `ROLLBACK`). 

## 2. ะะฐะทะฝะธัะฐ ะผะตะถะดั SQL ะธ NoSQL ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั

SQL ะธ NoSQL ะฑะฐะทั ะดะฐะฝะฝัั ะฟัะตะดะปะฐะณะฐัั ัะฐะทะฝัะต ะฟะฐัะฐะดะธะณะผั, ะบะฐะถะดะฐั ะธะท ะบะพัะพััั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฐ ะดะปั ะพะฟัะตะดะตะปัะฝะฝัั ัะธะฟะพะฒ ะดะฐะฝะฝัั ะธ ัะฟะพัะพะฑะพะฒ ะธั ะพะฑัะฐะฑะพัะบะธ.

### ะัะฝะพะฒะฝัะต ัะฐะทะปะธัะธั

- **SQL**: ะัะตะดะฝะฐะทะฝะฐัะตะฝั ะฒ ะฟะตัะฒัั ะพัะตัะตะดั ะดะปั ััััะบัััะธัะพะฒะฐะฝะฝัั (ะธ ัะฐััะธัะฝะพ ะฟะพะปัััััะบัััะธัะพะฒะฐะฝะฝัั) ะดะฐะฝะฝัั, ะบะพัะพััะต ัะพะพัะฒะตัััะฒััั ะทะฐัะฐะฝะตะต ะพะฟัะตะดะตะปัะฝะฝะพะน ััะตะผะต.
- **NoSQL**: ะะพะดัะพะดัั ะดะปั ะฝะตััััะบัััะธัะพะฒะฐะฝะฝัั ะธะปะธ ะฟะพะปัััััะบัััะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั, ะบะพัะพััะต ะฟะพััะตะฟะตะฝะฝะพ ัะฒะพะปััะธะพะฝะธัััั, ะพะฑะตัะฟะตัะธะฒะฐั ะณะธะฑะบะพััั ะฒ ััะตะผะฐั.

- **SQL**: ะัะฟะพะปัะทัะตั ัะทัะบ SQL (Structured Query Language) ะดะปั ะผะพะดะธัะธะบะฐัะธะธ ะธ ะธะทะฒะปะตัะตะฝะธั ะดะฐะฝะฝัั.
- **NoSQL**: ะัะตะดะพััะฐะฒะปัะตั ัะฐะทะปะธัะฝัะต API (ะฝะฐะฟัะธะผะตั, ะธะฝัะตััะตะนัั ะดะปั ะดะพะบัะผะตะฝัะพ-ะพัะธะตะฝัะธัะพะฒะฐะฝะฝัั ะธ ะบะปัั-ะทะฝะฐัะตะฝะธะต ััะฐะฝะธะปะธั); ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ััััะบัััะธัะพะฒะฐะฝะฝัั ัะทัะบะพะฒ ะทะฐะฟัะพัะพะฒ ะทะฐะฒะธัะธั ะพั ะบะพะฝะบัะตัะฝะพะน ัะตะฐะปะธะทะฐัะธะธ.

- **SQL**: ะะฑััะฝะพ ะณะฐัะฐะฝัะธััะตั ัะพะพัะฒะตัััะฒะธะต ะฟัะธะฝัะธะฟะฐะผ **ACID** (ะฐัะพะผะฐัะฝะพััั, ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั, ะธะทะพะปััะธั, ะดะพะปะณะพะฒะตัะฝะพััั), ััะพ ะพะฑะตัะฟะตัะธะฒะฐะตั ัะตะปะพััะฝะพััั ะดะฐะฝะฝัั.
- **NoSQL**: ะงะฐััะพ ะพะฟัะธะผะธะทะธัะพะฒะฐะฝั ะดะปั ะฒััะพะบะพะน ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะธ ะณะพัะธะทะพะฝัะฐะปัะฝะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั, ะธะฝะพะณะดะฐ ะฒ ััะตัะฑ ัััะพะณะพะน ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ.

### ะัะฝะพะฒะฝัะต ัะธะฟั NoSQL ะฑะฐะท ะดะฐะฝะฝัั

- **ะะพะบัะผะตะฝัะพ-ะพัะธะตะฝัะธัะพะฒะฐะฝะฝัะต ััะฐะฝะธะปะธัะฐ**
    - ะัะธะผะตัั: MongoDB, Couchbase
    - ะัะพะฑะตะฝะฝะพััะธ: ะบะฐะถะดะฐั ะทะฐะฟะธัั โ ััะพ ัะฐะผะพััะพััะตะปัะฝัะน ะดะพะบัะผะตะฝั (ะพะฑััะฝะพ JSON). ะกะฒัะทะธ ัะตะฐะปะธะทััััั ัะตัะตะท ะฒะปะพะถะตะฝะฝัะต ะดะพะบัะผะตะฝัั ะธะปะธ ัััะปะบะธ.
    - ะัะธะผะตั: ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ะตะณะพ ะฟะพััั ะฒ ะฑะปะพะณะต ะผะพะณัั ััะฐะฝะธัััั ะฒ ะพะดะฝะพะผ ะดะพะบัะผะตะฝัะต ะธะปะธ ะฑััั ัะฒัะทะฐะฝั ัะตัะตะท ัััะปะบะธ.

- **ะะปัั-ะทะฝะฐัะตะฝะธะต ััะฐะฝะธะปะธัะฐ**
    - ะัะธะผะตัั: Redis, Amazon DynamoDB
    - ะัะพะฑะตะฝะฝะพััะธ: ะดะฐะฝะฝัะต ััะฐะฝัััั ะฒ ะฒะธะดะต ัะฝะธะบะฐะปัะฝัั ะบะปััะตะน ะธ ะทะฝะฐัะตะฝะธะน. ะะตั ะพะฑัะทะฐัะตะปัะฝะพะน ััะตะผั.
    - ะัะธะผะตั: ัะพะฒะฐัั ะฒ ะบะพัะทะธะฝะต ะธะฝัะตัะฝะตั-ะผะฐะณะฐะทะธะฝะฐ, ัะฒัะทะฐะฝะฝัะต ั ID ะฟะพะปัะทะพะฒะฐัะตะปั.

- **ะจะธัะพะบะพััะพะปะฑัะพะฒัะต ะฑะฐะทั (Column Families)**
    - ะัะธะผะตัั: Apache Cassandra, HBase
    - ะัะพะฑะตะฝะฝะพััะธ: ะดะฐะฝะฝัะต ะณััะฟะฟะธัััััั ะฒ ัะตะผะตะนััะฒะฐ ััะพะปะฑัะพะฒ, ะฐะฝะฐะปะพะณะธัะฝัะต ัะฐะฑะปะธัะฐะผ, ะฝะพ ั ะณะธะฑะบะพะน ััะตะผะพะน.
    - ะัะธะผะตั: ะฟัะพัะธะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะณะดะต ั ะพะดะฝะธั ะผะพะณัั ะฑััั ัะฝะธะบะฐะปัะฝัะต ะฐััะธะฑััั.

- **ะัะฐัะพะฒัะต ะฑะฐะทั ะดะฐะฝะฝัั**
    - ะัะธะผะตัั: Neo4j, JanusGraph
    - ะัะพะฑะตะฝะฝะพััะธ: ะพะฟัะธะผะธะทะธัะพะฒะฐะฝั ะดะปั ะดะฐะฝะฝัั ัะพ ัะปะพะถะฝัะผะธ ัะฒัะทัะผะธ. ะกััะฝะพััะธ ะฟัะตะดััะฐะฒะปะตะฝั ะบะฐะบ ัะทะปั, ะฐ ัะฒัะทะธ โ ะบะฐะบ ััะฑัะฐ.
    - ะัะธะผะตั: ัะพัะธะฐะปัะฝัะต ัะตัะธ ั ัะฟัะฐะฒะปะตะฝะธะตะผ ัะฒัะทัะผะธ ยซะดััะถะฑัยป.

### ะัะปะธัะธั ะฒ ะผะพะดะตะปะธัะพะฒะฐะฝะธะธ ะดะฐะฝะฝัั

- **SQL**: ะฝะพัะผะฐะปะธะทะฐัะธั ะดะปั ะผะธะฝะธะผะธะทะฐัะธะธ ะธะทะฑััะพัะฝะพััะธ ะธ ะฐะฝะพะผะฐะปะธะน ะฟัะธ ะพะฑะฝะพะฒะปะตะฝะธะธ.
- **NoSQL**: ะดะตะฝะพัะผะฐะปะธะทะฐัะธั โ ะดะฐะฝะฝัะต ัะฟะฐะบะพะฒัะฒะฐัััั ะฒะผะตััะต, ััะพะฑั ัะพะบัะฐัะธัั ะบะพะปะธัะตััะฒะพ ะทะฐะฟัะพัะพะฒ.

### ะะตะฝะตัะฐัะธั ID

- **SQL**: ัะฐััะพ ะธัะฟะพะปัะทัะตััั ะฐะฒัะพะธะฝะบัะตะผะตะฝัะฝะพะต ัะฝะธะบะฐะปัะฝะพะต ID.
- **NoSQL**: ัะฝะธะบะฐะปัะฝัะต ะธะดะตะฝัะธัะธะบะฐัะพัั ะผะพะณัั ะณะตะฝะตัะธัะพะฒะฐัััั ะฒะฝะตัะฝะธะผะธ ัะธััะตะผะฐะผะธ ะธะปะธ ะฝะฐ ััะพะฒะฝะต ะดะพะบัะผะตะฝัะฐ.

### ะะฐะฑะพัะฐ ั ะพัะฝะพัะตะฝะธัะผะธ ะดะฐะฝะฝัั

- **SQL**: ัะฒัะทะธ ัะตะฐะปะธะทััััั ัะตัะตะท ะบะปััะธ (ะฟะตัะฒะธัะฝัะต ะธ ะฒะฝะตัะฝะธะต).
- **NoSQL**: ัะฒัะทะธ ะผะพะณัั ะฑััั ัะตะฐะปะธะทะพะฒะฐะฝั ัะตัะตะท ะฒะปะพะถะตะฝะฝัะต ะดะพะบัะผะตะฝัั, ัััะปะบะธ ะธะปะธ ะณัะฐัะพะฒัะต ััััะบัััั.

### ะะพะดะดะตัะถะบะฐ ััะฐะฝะทะฐะบัะธะน

- **SQL**: ััะฐะฝะทะฐะบัะธะธ โ ััะฐะฝะดะฐััะฝะฐั ัะฐััั ััะฝะบัะธะพะฝะฐะปะฐ.
- **NoSQL**: ะฟะพะดะดะตัะถะบะฐ ััะฐะฝะทะฐะบัะธะน ะทะฐะฒะธัะธั ะพั ัะตะฐะปะธะทะฐัะธะธ.

### ะฃัะพะฒะฝะธ ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ ะดะฐะฝะฝัั

- **SQL**: ะพะฑะตัะฟะตัะธะฒะฐะตั ัััะพะณัั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั.
- **NoSQL**: ะฟัะตะดะปะฐะณะฐะตั ัะฐะทะฝัะต ะผะพะดะตะปะธ โ ะพั ัััะพะณะพะน ะดะพ eventual consistency (ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ ะฒ ะบะพะฝะตัะฝะพะผ ััััะต).

### ะะฐัััะฐะฑะธััะตะผะพััั

- **SQL**: ะฒะตััะธะบะฐะปัะฝะฐั (ะผะพัะฝะพััั ะพะดะฝะพะณะพ ัะตัะฒะตัะฐ ัะฒะตะปะธัะธะฒะฐะตััั).
- **NoSQL**: ะณะพัะธะทะพะฝัะฐะปัะฝะฐั (ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฝะฐะณััะทะบะธ ะฝะฐ ะผะฝะพะถะตััะฒะพ ัะตัะฒะตัะพะฒ).

### ะะธะฑะบะพััั ะดะฐะฝะฝัั

- **SQL**: ัััะพะณะฐั ััะตะผะฐ, ัััะดะฝะพ ะฐะดะฐะฟัะธัะพะฒะฐัั ะบ ะผะตะฝัััะธะผัั ััััะบัััะฐะผ ะดะฐะฝะฝัั.
- **NoSQL**: ะฟะพะดะดะตัะถะธะฒะฐะตั ะดะธะฝะฐะผะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ััะตะผั, ััะพ ะดะฐัั ะฒััะพะบัั ะณะธะฑะบะพััั.

### ะฆะตะปะพััะฝะพััั ะธ ะฒะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั

- **SQL**: ัะตะปะพััะฝะพััั ะพะฑะตัะฟะตัะธะฒะฐะตััั ะพะณัะฐะฝะธัะตะฝะธัะผะธ ะธ ัััะพะณะธะผะธ ัะธะฟะฐะผะธ ะดะฐะฝะฝัั.
- **NoSQL**: ะฑะพะปััะต ะฟะพะปะฐะณะฐะตััั ะฝะฐ ะฟัะธะปะพะถะตะฝะธะต ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะตะปะพััะฝะพัััั ะธ ะฟัะพะฒะตัะบะพะน ะดะฐะฝะฝัั.  

## 3. ะะฐะบะธะต ะพะฟะตัะฐัะธะธ ะผะพะถะฝะพ ะฒัะฟะพะปะฝััั ั ะฟะพะผะพััั SQL, ะดะปั ัะตะณะพ ะพะฝะธ ะฝัะถะฝั ะธ ะธั ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั?

ะ SQL ะบะพะผะฐะฝะดั ะดะตะปัััั ะฝะฐ ะฝะตัะบะพะปัะบะพ ะบะฐัะตะณะพัะธะน.

### DDL (Data Definition Language) โ ัะทัะบ ะพะฟัะตะดะตะปะตะฝะธั ะดะฐะฝะฝัั
ะัะฟะพะปัะทัะตััั ะดะปั ะพะฟะธัะฐะฝะธั ะธ ะธะทะผะตะฝะตะฝะธั ััััะบัััั ะพะฑัะตะบัะพะฒ ะฑะฐะทั ะดะฐะฝะฝัั.

- **CREATE** โ ัะพะทะดะฐะฝะธะต ะพะฑัะตะบัะพะฒ (ัะฐะฑะปะธัั, ะฟัะตะดััะฐะฒะปะตะฝะธั, ััะตะผั ะธ ั.ะด.)
- **ALTER** โ ะธะทะผะตะฝะตะฝะธะต ััััะบัััั ะพะฑัะตะบัะพะฒ
- **DROP** โ ัะดะฐะปะตะฝะธะต ะพะฑัะตะบัะพะฒ
- **TRUNCATE** โ ะพัะธััะบะฐ ัะฐะฑะปะธัั (ะฑััััะพะต ัะดะฐะปะตะฝะธะต ะฒัะตั ัััะพะบ ะฑะตะท ะฒะพะทะผะพะถะฝะพััะธ ะพัะบะฐัะฐ)
- **RENAME** โ ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะธะต ะพะฑัะตะบัะฐ

> โก ะัะพะฑะตะฝะฝะพััั: DDL-ะบะพะผะฐะฝะดั ัะธะบัะธัััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ (**auto-commit**) ะธ ะฝะต ะผะพะณัั ะฑััั ะพัะบะฐัะฐะฝั.

### DML (Data Manipulation Language) โ ัะทัะบ ะผะฐะฝะธะฟัะปััะธะธ ะดะฐะฝะฝัะผะธ
ะัะฟะพะปัะทัะตััั ะดะปั ัะฐะฑะพัั ั ะดะฐะฝะฝัะผะธ ะฒ ัะฐะฑะปะธัะฐั.

- **SELECT** โ ััะตะฝะธะต ะดะฐะฝะฝัั
- **INSERT** โ ะดะพะฑะฐะฒะปะตะฝะธะต ัััะพะบ
- **UPDATE** โ ะธะทะผะตะฝะตะฝะธะต ัััะพะบ
- **DELETE** โ ัะดะฐะปะตะฝะธะต ัััะพะบ

> โก ะัะพะฑะตะฝะฝะพััั: DML-ะบะพะผะฐะฝะดั ะฟะพะดะดะตัะถะธะฒะฐัั ััะฐะฝะทะฐะบัะธะธ ะธ ะผะพะณัั ะฑััั ะพัะผะตะฝะตะฝั (**ROLLBACK**).

#### ะัะฝะพะฒะฝัะต ะพะฟะตัะฐัะธะธ ะฒ SELECT-ะทะฐะฟัะพัะต
- **SELECT** โ ะพะฟัะตะดะตะปัะตั ััะพะปะฑัั ะธะปะธ ะฒััะฐะถะตะฝะธั ะดะปั ะฒัะฒะพะดะฐ
- **FROM** โ ะทะฐะดะฐัั ะธััะพัะฝะธะบะธ ะดะฐะฝะฝัั (ัะฐะฑะปะธัั, ะฟัะตะดััะฐะฒะปะตะฝะธั)
- **JOIN** โ ะพะฑัะตะดะธะฝัะตั ะดะฐะฝะฝัะต ะธะท ัะฐะทะฝัั ัะฐะฑะปะธั
- **WHERE** โ ัะธะปััััะตั ัััะพะบะธ ะดะพ ะณััะฟะฟะธัะพะฒะบะธ
- **GROUP BY** โ ะณััะฟะฟะธััะตั ัััะพะบะธ ะฒ ะฐะณัะตะณะฐัั
- **HAVING** โ ัะธะปััััะตั ัะณััะฟะฟะธัะพะฒะฐะฝะฝัะต ัะตะทัะปััะฐัั
- **ORDER BY** โ ัะพััะธััะตั ะฒัะฒะพะด
- **LIMIT** โ ะพะณัะฐะฝะธัะธะฒะฐะตั ะบะพะปะธัะตััะฒะพ ะฒะพะทะฒัะฐัะฐะตะผัั ัััะพะบ

#### ะะพะณะธัะตัะบะธะน ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะฟัะพัะฐ
ะฅะพัั ะฟะธัะตะผ ะผั ะบะพะผะฐะฝะดั ะฒ ะพะดะฝะพะผ ะฟะพััะดะบะต, ะฒัะฟะพะปะฝััััั ะพะฝะธ ัะฐะบ: FROM โ JOIN โ WHERE โ GROUP BY โ HAVING โ SELECT โ ORDER BY โ LIMIT

> ะญัะพ ะพะฑัััะฝัะตั, ะฝะฐะฟัะธะผะตั, ะฟะพัะตะผั ะฝะตะปัะทั ะธัะฟะพะปัะทะพะฒะฐัั ะฐะปะธะฐัั ะธะท `SELECT` ะฒ `WHERE`.

### DCL (Data Control Language) โ ัะทัะบ ัะฟัะฐะฒะปะตะฝะธั ะดะพัััะฟะพะผ
ะัะฟะพะปัะทัะตััั ะดะปั ัะฐะฑะพัั ั ะฟัะฐะฒะฐะผะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

- **GRANT** โ ะฒัะดะฐัั ะฟัะฐะฒะฐ
- **REVOKE** โ ะพัะทัะฒะฐะตั ะฟัะฐะฒะฐ

### TCL (Transaction Control Language) โ ัะทัะบ ัะฟัะฐะฒะปะตะฝะธั ััะฐะฝะทะฐะบัะธัะผะธ
ะะตะณัะปะธััะตั ะฒัะฟะพะปะฝะตะฝะธะต ััะฐะฝะทะฐะบัะธะน.

- **COMMIT** โ ะทะฐัะธะบัะธัะพะฒะฐัั ะธะทะผะตะฝะตะฝะธั
- **ROLLBACK** โ ะพัะบะฐัะธัั ะธะทะผะตะฝะตะฝะธั
- **SAVEPOINT** โ ัััะฐะฝะพะฒะธัั ัะพัะบั ัะพััะฐะฝะตะฝะธั ะฒ ััะฐะฝะทะฐะบัะธะธ

๐ **ะัะฐัะบะธะน ะธัะพะณ:**
- DDL ัะฟัะฐะฒะปัะตั ััััะบัััะพะน ะฑะฐะทั (CREATE/ALTER/DROP).
- DML ัะฟัะฐะฒะปัะตั ะดะฐะฝะฝัะผะธ (SELECT/INSERT/UPDATE/DELETE).
- DCL ัะฟัะฐะฒะปัะตั ะดะพัััะฟะพะผ (GRANT/REVOKE).
- TCL ัะฟัะฐะฒะปัะตั ััะฐะฝะทะฐะบัะธัะผะธ (COMMIT/ROLLBACK/SAVEPOINT).
- ะะพะณะธัะตัะบะธะน ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั SELECT ะพัะปะธัะฐะตััั ะพั ัะธะฝัะฐะบัะธัะตัะบะพะณะพ ะธ ััะพ ะฒะฐะถะฝะพ ะดะปั ะฟัะฐะฒะธะปัะฝะพะณะพ ะฟะพะฝะธะผะฐะฝะธั ะทะฐะฟัะพัะพะฒ.  

## 4. ะะฐะบะธะต ัะธะฟั JOIN-ะพะฒ ัััะตััะฒััั ะธ ะฒ ัะตะผ ะธั ะพัะปะธัะธั ?

**JOIN** ะฒ SQL ะธัะฟะพะปัะทัะตััั ะดะปั ะพะฑัะตะดะธะฝะตะฝะธั ัััะพะบ ะธะท ะดะฒัั ะธะปะธ ะฑะพะปะตะต ัะฐะฑะปะธั ะฝะฐ ะพัะฝะพะฒะต ัะฒัะทะฐะฝะฝะพะณะพ ััะพะปะฑัะฐ (ะพะฑััะฝะพ ะบะปััะฐ).  
ะะพะฝะธะผะฐะฝะธะต ัะธะฟะพะฒ ัะพะตะดะธะฝะตะฝะธะน ะฒะฐะถะฝะพ ะดะปั ะฟัะฐะฒะธะปัะฝะพะน ัะฐะฑะพัั ั ะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝัะผะธ ะดะฐะฝะฝัะผะธ ะธ ะฟัะตะดะพัะฒัะฐัะตะฝะธั ัะปััะฐะนะฝัั ะดะตะบะฐััะพะฒัั ะฟัะพะธะทะฒะตะดะตะฝะธะน.

### ะัะฝะพะฒะฝัะต ัะธะฟั JOIN

- **INNER JOIN** โ ะฒะพะทะฒัะฐัะฐะตั ัะพะปัะบะพ ัะพะฒะฟะฐะดะฐััะธะต ัััะพะบะธ ะฒ ะพะฑะตะธั ัะฐะฑะปะธัะฐั.
- **LEFT JOIN** โ ะฒะพะทะฒัะฐัะฐะตั ะฒัะต ัััะพะบะธ ะธะท ะปะตะฒะพะน ัะฐะฑะปะธัั ะธ ัะพะฒะฟะฐะดะตะฝะธั ะธะท ะฟัะฐะฒะพะน; ะตัะปะธ ัะพะฒะฟะฐะดะตะฝะธะน ะฝะตั, ะฟะพะดััะฐะฒะปััััั `NULL`.
- **RIGHT JOIN** โ ะฟัะพัะธะฒะพะฟะพะปะพะถะตะฝ LEFT JOIN: ะฒะพะทะฒัะฐัะฐะตั ะฒัะต ัััะพะบะธ ะธะท ะฟัะฐะฒะพะน ัะฐะฑะปะธัั ะธ ัะพะฒะฟะฐะดะตะฝะธั ะธะท ะปะตะฒะพะน.
- **FULL JOIN (FULL OUTER JOIN)** โ ะฒะพะทะฒัะฐัะฐะตั ะฒัะต ัััะพะบะธ ะธะท ะพะฑะตะธั ัะฐะฑะปะธั, ะฟะพะดััะฐะฒะปัั `NULL` ัะฐะผ, ะณะดะต ะฝะตั ัะพะฒะฟะฐะดะตะฝะธะน.
- **CROSS JOIN** โ ัะพัะผะธััะตั ะดะตะบะฐััะพะฒะพ ะฟัะพะธะทะฒะตะดะตะฝะธะต (ะบะฐะถะดะฐั ัััะพะบะฐ ะธะท ะฟะตัะฒะพะน ัะฐะฑะปะธัั ัะพะตะดะธะฝัะตััั ัะพ ะฒัะตะผะธ ัััะพะบะฐะผะธ ะฒัะพัะพะน).
- **SELF JOIN** โ ัะพะตะดะธะฝะตะฝะธะต ัะฐะฑะปะธัั ั ัะฐะผะพะน ัะพะฑะพะน (ัะฐััะพ ะธัะฟะพะปัะทัะตััั ะดะปั ะธะตัะฐััะธะน, ะฝะฐะฟัะธะผะตั ยซัะพัััะดะฝะธะบ โ ะผะตะฝะตะดะถะตัยป).

### ะะธะทัะฐะปะธะทะฐัะธั ัะธะฟะพะฒ JOIN

![SQL JOINS](../images/sql-joins.png)

## 5. ะงัะพ ัะฐะบะพะต ะฐะปะณะพัะธัะผั ัะพะตะดะธะฝะตะฝะธั ัะฐะฑะปะธั ะฒ SQL ะธ ะบะฐะบะธะต ะพะฝะธ ะฑัะฒะฐัั ?

ะะพะณะดะฐ ะผั ะฟะธัะตะผ `JOIN`, ะกะฃะะ ะดะพะปะถะฝะฐ ะฒัะฑัะฐัั **ะฐะปะณะพัะธัะผ ัะพะตะดะธะฝะตะฝะธั**.  
ะัะฝะพะฒะฝัะต ะฒะฐัะธะฐะฝัั:

### Nested Loop Join (ะฒะปะพะถะตะฝะฝัะต ัะธะบะปั)
- ะัะพััะตะนัะธะน ะฐะปะณะพัะธัะผ: ะดะปั ะบะฐะถะดะพะน ัััะพะบะธ ะธะท ะฟะตัะฒะพะน ัะฐะฑะปะธัั ะธัะตะผ ัะพะฒะฟะฐะดะตะฝะธะต ะฒะพ ะฒัะพัะพะน.
- ะะฐะฑะพัะฐะตั ะบะฐะบ ยซะดะฒะพะนะฝะพะน ัะธะบะปยป.

**ะะพะณะดะฐ ัััะตะบัะธะฒะตะฝ:**
- ะะฐะปะตะฝัะบะธะต ัะฐะฑะปะธัั.
- ะััั ะธะฝะดะตะบั ะฟะพ ะบะปััั ัะพะตะดะธะฝะตะฝะธั (ัะพะณะดะฐ ะฒะฝัััะตะฝะฝัั ัะฐะฑะปะธัะฐ ะฑััััะพ ะธัะตััั).

**ะะธะฝััั:**
- ะัะตะฝั ะผะตะดะปะตะฝะฝัะน ะฝะฐ ะฑะพะปััะธั ะดะฐะฝะฝัั (O(N*M)).

### Merge Join (ัะพะตะดะธะฝะตะฝะธะต ัะปะธัะฝะธะตะผ)
- ะะฑะต ัะฐะฑะปะธัั ัะพััะธัััััั ะฟะพ ะบะปััั ัะพะตะดะธะฝะตะฝะธั.
- ะะฐัะตะผ ะกะฃะะ ยซะธะดััยป ะฟะพ ะดะฒัะผ ัะฟะธัะบะฐะผ, ััะฐะฒะฝะธะฒะฐั ัััะพะบะธ.

**ะะพะณะดะฐ ัััะตะบัะธะฒะตะฝ:**
- ะขะฐะฑะปะธัั ัะถะต ะพััะพััะธัะพะฒะฐะฝั (ะฝะฐะฟัะธะผะตั, ะฟะพ ะธะฝะดะตะบัั).
- ะะพะดัะพะดะธั ะดะปั ะฑะพะปััะธั ะพะฑััะผะพะฒ ะดะฐะฝะฝัั.

**ะะธะฝััั:**
- ะขัะตะฑัะตั ัะพััะธัะพะฒะบะธ, ะตัะปะธ ะดะฐะฝะฝัะต ะฝะต ัะฟะพััะดะพัะตะฝั.

### Hash Join (ัะพะตะดะธะฝะตะฝะธะต ัะตัะตะท ััั-ัะฐะฑะปะธัั)
- ะกััะพะธััั **ััั-ัะฐะฑะปะธัะฐ** ะดะปั ะผะตะฝััะตะน ัะฐะฑะปะธัั ะฟะพ ะบะปััั ัะพะตะดะธะฝะตะฝะธั.
- ะะปั ัััะพะบ ะธะท ะฒัะพัะพะน ัะฐะฑะปะธัั ะธััััั ัะพะฒะฟะฐะดะตะฝะธั ัะตัะตะท ััั.

**ะะพะณะดะฐ ัััะตะบัะธะฒะตะฝ:**
- ะะพะปััะธะต ัะฐะฑะปะธัั ะฑะตะท ะธะฝะดะตะบัะพะฒ.
- ะกะพะตะดะธะฝะตะฝะธะต ะฟะพ ััะปะพะฒะธั ัะฐะฒะตะฝััะฒะฐ (`=`).

**ะะธะฝััั:**
- ะขัะตะฑัะตั ะฟะฐะผััะธ ะดะปั ััั-ัะฐะฑะปะธัั.
- ะัะธ ะพัะตะฝั ะฑะพะปััะธั ัะฐะฑะปะธัะฐั ะผะพะถะตั ัะฑัะฐััะฒะฐัั ะดะฐะฝะฝัะต ะฝะฐ ะดะธัะบ (Hash Join spill).

### Adaptive Join (ะดะธะฝะฐะผะธัะตัะบะธะน ะฒัะฑะพั, ะฒ SQL Server, Oracle)
- ะกะฃะะ ะฝะฐัะธะฝะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต, ะฐ ะฟะพัะพะผ **ะผะตะฝัะตั ะฐะปะณะพัะธัะผ ะฝะฐ ะปะตัั**, ะตัะปะธ ะพัะตะฝะบะฐ ะบะฐัะดะธะฝะฐะปัะฝะพััะธ (ัะธัะปะพ ัััะพะบ) ะพะบะฐะทะฐะปะฐัั ะฝะตะฒะตัะฝะพะน.

### ะกัะฐะฒะฝะตะฝะธะต ะฐะปะณะพัะธัะผะพะฒ

| ะะปะณะพัะธัะผ        | ะะพะดัะพะดะธั ะดะปั              | ะกะปะพะถะฝะพััั      | ะขัะตะฑะพะฒะฐะฝะธั                |
|-----------------|---------------------------|----------------|---------------------------|
| Nested Loop     | ะะฐะปะตะฝัะบะธะต ัะฐะฑะปะธัั, ะธะฝะดะตะบั | O(N*M)         | ะะฝะดะตะบั ะดะปั ััะบะพัะตะฝะธั      |
| Merge Join      | ะััะพััะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต    | O(N+M)         | ะัะถะฝะฐ ัะพััะธัะพะฒะบะฐ          |
| Hash Join       | ะะพะปััะธะต ะฝะตะพััะพััะธัะพะฒะฐะฝะฝัะต | O(N+M)         | ะะฐะผััั ะฟะพะด ััั-ัะฐะฑะปะธัั    |
| Adaptive Join   | ะะธะฝะฐะผะธัะตัะบะฐั ะพะฟัะธะผะธะทะฐัะธั  | ะะฐะฒะธัะธั ะพั ะกะฃะะ| ะัะถะฝะฐ ะฟะพะดะดะตัะถะบะฐ ะฒ ะดะฒะธะถะบะต  |


#### ะัะพะณ
- **Nested Loop** โ ะฟัะพัั, ะฝะพ ะผะตะดะปะตะฝะฝัะน ะฑะตะท ะธะฝะดะตะบัะฐ.
- **Merge Join** โ ัะพัะพั ะฟัะธ ัะพััะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั.
- **Hash Join** โ ัะฐะผัะน ัะฐัััะน ะฒัะฑะพั ะดะปั ะฑะพะปััะธั ัะฐะฑะปะธั.
- **Adaptive Join** โ ยซัะผะฝัะนยป ะฒัะฑะพั, ะตัะปะธ ะกะฃะะ ะฟะพะดะดะตัะถะธะฒะฐะตั.

## 6. ะงัะพ ัะฐะบะพะต Hash Join (ััั-ัะพะตะดะธะฝะตะฝะธะต)?

**Hash Join** โ ััะพ ะฐะปะณะพัะธัะผ ัะพะตะดะธะฝะตะฝะธั ัะฐะฑะปะธั ะฒ SQL, ะบะพัะพััะน ะธัะฟะพะปัะทัะตั **ััั-ัะฐะฑะปะธัั** ะดะปั ััะบะพัะตะฝะธั ะฟะพะธัะบะฐ ัะพะฒะฟะฐะดะตะฝะธะน ะผะตะถะดั ัััะพะบะฐะผะธ.  
ะัะธะผะตะฝัะตััั, ะบะพะณะดะฐ ะผั ะดะตะปะฐะตะผ `JOIN` ะดะฒัั ัะฐะฑะปะธั ะฟะพ ััะปะพะฒะธั ัะฐะฒะตะฝััะฒะฐ (`=`).

### ะะฐะบ ัะฐะฑะพัะฐะตั Hash Join
ะะปะณะพัะธัะผ ะพะฑััะฝะพ ัะพััะพะธั ะธะท ะดะฒัั ัะฐะท:

1. **Build (ะฟะพัััะพะตะฝะธะต)**
  - ะกะฃะะ ะฒัะฑะธัะฐะตั ะผะตะฝัััั ัะฐะฑะปะธัั (ะธะปะธ ัะตะทัะปััะฐั ะฟะพะดะทะฐะฟัะพัะฐ).
  - ะกะพะทะดะฐัั ะฟะพ ะบะปััั ัะพะตะดะธะฝะตะฝะธั **ััั-ัะฐะฑะปะธัั** ะฒ ะฟะฐะผััะธ.
  - ะ ััะพะน ััั-ัะฐะฑะปะธัะต ัััะพะบะธ ััะฐะฝัััั ะฒ ะฒะธะดะต ะฟะฐั ยซะบะปัั โ ัััะพะบะฐยป.

2. **Probe (ะฟะพะธัะบ)**
  - ะกะฃะะ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ ัะธัะฐะตั ัััะพะบะธ ะธะท ะฒัะพัะพะน (ะฑะพะปััะตะน) ัะฐะฑะปะธัั.
  - ะะปั ะบะฐะถะดะพะน ัััะพะบะธ ะฒััะธัะปัะตั ััั ะฟะพ ะบะปััั ัะพะตะดะธะฝะตะฝะธั.
  - ะัะพะฒะตััะตั, ะตััั ะปะธ ัะพะฒะฟะฐะดะตะฝะธะต ะฒ ััั-ัะฐะฑะปะธัะต.
  - ะัะปะธ ะตััั โ ัััะพะบะธ ัะพะตะดะธะฝััััั ะธ ะฟะพะฟะฐะดะฐัั ะฒ ัะตะทัะปััะฐั.

### ะัะธะผะตั
```sql
  SELECT *
  FROM orders o
  JOIN customers c
    ON o.customer_id = c.customer_id;
```
- PostgreSQL ะผะพะถะตั ะฒัะฑัะฐัั **Hash Join**, ะตัะปะธ:
  - `customers` ะฝะตะฑะพะปััะฐั ัะฐะฑะปะธัะฐ โ ะดะปั ะฝะตั ัััะพะธััั ััั-ัะฐะฑะปะธัะฐ.
  - `orders` ะฑะพะปััะฐั ัะฐะฑะปะธัะฐ โ ะดะปั ะบะฐะถะดะพะน ัััะพะบะธ ะธัะตััั ัะพะฒะฟะฐะดะตะฝะธะต ะฟะพ `customer_id` ะฒ ัััะต.

### ะะพะณะดะฐ ัััะตะบัะธะฒะตะฝ Hash Join
- ะกะพะตะดะธะฝะตะฝะธะต ะฟะพ ััะปะพะฒะธั **ัะฐะฒะตะฝััะฒะฐ** (`=`).
- ะขะฐะฑะปะธัั ะฑะพะปััะธะต, ะธ ั ะฝะธั **ะฝะตั ะฟะพะดัะพะดััะตะณะพ ะธะฝะดะตะบัะฐ**.
- ะะดะฝะฐ ัะฐะฑะปะธัะฐ ัััะตััะฒะตะฝะฝะพ ะผะตะฝััะต ะดััะณะพะน.

### ะกัะฐะฒะฝะตะฝะธะต ั ะดััะณะธะผะธ ะฐะปะณะพัะธัะผะฐะผะธ
| ะะปะณะพัะธัะผ     | ะะฐะบ ัะฐะฑะพัะฐะตั                                  | ะะพะณะดะฐ ะปัััะต |
|--------------|-----------------------------------------------|-------------|
| **Nested Loop** | ะะปั ะบะฐะถะดะพะน ัััะพะบะธ ะปะตะฒะพะน ัะฐะฑะปะธัั ะธัะตั ะฒ ะฟัะฐะฒะพะน | ะฅะพัะพัะพ ะดะปั ะผะฐะปะตะฝัะบะธั ัะฐะฑะปะธั ะธะปะธ ะฟัะธ ะฝะฐะปะธัะธะธ ะธะฝะดะตะบัะฐ |
| **Merge Join**  | ะกะพััะธััะตั ะพะฑะต ัะฐะฑะปะธัั ะธ ะฟัะพัะพะดะธั ะธั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ | ะญััะตะบัะธะฒะฝะพ ะฟัะธ ะพััะพััะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั |
| **Hash Join**   | ะกััะพะธั ััั-ัะฐะฑะปะธัั ะธ ะธัะตั ัะพะฒะฟะฐะดะตะฝะธั ัะตัะตะท ััั | ะะฟัะธะผะฐะปัะฝะพ ะดะปั ะฑะพะปััะธั ัะฐะฑะปะธั ะฑะตะท ะธะฝะดะตะบัะพะฒ |

### ะัะพะณ
- **Hash Join** โ ััะพ ัะพะตะดะธะฝะตะฝะธะต ัะตัะตะท ััั-ัะฐะฑะปะธัั.
- ะะฑััะฝะพ ะฑััััะตะต Nested Loop, ะตัะปะธ ะดะฐะฝะฝัั ะผะฝะพะณะพ ะธ ะธะฝะดะตะบัะพะฒ ะฝะตั.
- ะะพ ััะตะฑัะตั ะดะพะฟะพะปะฝะธัะตะปัะฝะพะน ะฟะฐะผััะธ ะดะปั ััะฐะฝะตะฝะธั ััั-ัะฐะฑะปะธัั.

## 7. ะงัะพ ัะฐะบะพะต ะฟะตัะฒะธัะฝัะน ะบะปัั (Primary Key) ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั?

**ะะตัะฒะธัะฝัะน ะบะปัั** โ ััะพ ััะพะปะฑะตั ะธะปะธ ะฝะฐะฑะพั ััะพะปะฑัะพะฒ, ะบะพัะพััะต ะพะดะฝะพะทะฝะฐัะฝะพ ะธะดะตะฝัะธัะธัะธัััั ะบะฐะถะดัั ัััะพะบั ะฒ ัะฐะฑะปะธัะต ะฑะฐะทั ะดะฐะฝะฝัั.

### ะัะฝะพะฒะฝัะต ัะฒะพะนััะฒะฐ:
- ะะฝะฐัะตะฝะธั **ะดะพะปะถะฝั ะฑััั ัะฝะธะบะฐะปัะฝัะผะธ**.
- ะะฝะฐัะตะฝะธั **ะฝะต ะผะพะณัั ะฑััั NULL**.
- ะ ัะฐะฑะปะธัะต ะผะพะถะตั ะฑััั **ัะพะปัะบะพ ะพะดะธะฝ ะฟะตัะฒะธัะฝัะน ะบะปัั**, ะฝะพ ะพะฝ ะผะพะถะตั ัะพััะพััั ะธะท ะฝะตัะบะพะปัะบะธั ััะพะปะฑัะพะฒ (**ัะพััะฐะฒะฝะพะน ะบะปัั**).
- ะะพะปััะธะฝััะฒะพ ะกะฃะะ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ะธะฝะดะตะบั ะดะปั ะฟะตัะฒะธัะฝะพะณะพ ะบะปััะฐ, ััะพะฑั ััะบะพัะธัั ะฟะพะธัะบ.

### ะัะธะผะตั

```sql
CREATE TABLE employees (
    employee_id INT PRIMARY KEY,
    name VARCHAR(100)
);
```
### ะงัะพ ะดะตะปะฐะตั ััะพั ะบะพะด?

1. ะกะพะทะดะฐัั ัะฐะฑะปะธัั `employees`.
2. ะะฟัะตะดะตะปัะตั ััะพะปะฑะตั `employee_id` ะบะฐะบ **PRIMARY KEY**.
3. ะะฑะตัะฟะตัะธะฒะฐะตั ัะฝะธะบะฐะปัะฝะพััั ะบะฐะถะดะพะณะพ ะทะฝะฐัะตะฝะธั `employee_id`.
4. ะะฐะฟัะตัะฐะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต `NULL` ะดะปั `employee_id`.
5. ะะฐัั ะฒะพะทะผะพะถะฝะพััั ะธัะฟะพะปัะทะพะฒะฐัั `employee_id` ะบะฐะบ ัััะปะบั (ะฒะฝะตัะฝะธะน ะบะปัั) ะฒ ะดััะณะธั ัะฐะฑะปะธัะฐั.
6. ะะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ะธะฝะดะตะบั ะฟะพ `employee_id` ะดะปั ััะบะพัะตะฝะธั ะฟะพะธัะบะฐ. 

## 8. ะงัะพ ัะฐะบะพะต ะฒะฝะตัะฝะธะน ะบะปัั (Foreign Key) ะธ ะบะฐะบ ะพะฝ ะธัะฟะพะปัะทัะตััั?

**ะะฝะตัะฝะธะน ะบะปัั (FOREIGN KEY)** โ ััะพ ััะพะปะฑะตั ะธะปะธ ะฝะฐะฑะพั ััะพะปะฑัะพะฒ ะฒ ะพะดะฝะพะน ัะฐะฑะปะธัะต, ะบะพัะพััะต ัััะปะฐัััั ะฝะฐ ะฟะตัะฒะธัะฝัะน ะบะปัั ะฒ ะดััะณะพะน ัะฐะฑะปะธัะต.

### ะัะฝะพะฒะฝัะต ัะฒะพะนััะฒะฐ:
- ะะฝะตัะฝะธะน ะบะปัั ะฒัะตะณะดะฐ ัะบะฐะทัะฒะฐะตั ะฝะฐ **PRIMARY KEY** ะธะปะธ **UNIQUE ะบะปัั** ะฒ ัะพะดะธัะตะปััะบะพะน ัะฐะฑะปะธัะต.
- ะะณะพ ะฝะฐะทะฝะฐัะตะฝะธะต โ ะพะฑะตัะฟะตัะธะฒะฐัั **ัััะปะพัะฝัั ัะตะปะพััะฝะพััั**, ัะพ ะตััั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั ัะฒัะทะตะน ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ.
- ะะฝ ะฝะต ะดะพะฟััะบะฐะตั ะฒััะฐะฒะบั ะทะฝะฐัะตะฝะธะน, ะบะพัะพััั ะฝะตั ะฒ ัะพะดะธัะตะปััะบะพะน ัะฐะฑะปะธัะต.
- ะะพะถะตั ะพะฟัะตะดะตะปััั ะดะตะนััะฒะธั ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะธะปะธ ัะดะฐะปะตะฝะธะธ ัััะพะบะธ ะฒ ัะพะดะธัะตะปััะบะพะน ัะฐะฑะปะธัะต:
  - `ON DELETE CASCADE` โ ัะดะฐะปัะตั ัะฒัะทะฐะฝะฝัะต ะทะฐะฟะธัะธ.
  - `ON DELETE SET NULL` โ ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะทะฝะฐัะตะฝะธะต `NULL` ะฒะพ ะฒะฝะตัะฝะตะผ ะบะปััะต.
  - `RESTRICT` โ ะทะฐะฟัะตัะฐะตั ัะดะฐะปะตะฝะธะต/ะพะฑะฝะพะฒะปะตะฝะธะต, ะตัะปะธ ะตััั ัะฒัะทะฐะฝะฝัะต ะทะฐะฟะธัะธ.

### ะัะธะผะตั

```sql
CREATE TABLE employees (
    employee_id INT PRIMARY KEY,
    department_id INT,
    FOREIGN KEY (department_id) REFERENCES departments(department_id)
);
```

## 9. ะ ัะตะผ ัะฐะทะฝะธัะฐ ะผะตะถะดั PRIMARY KEY ะธ UNIQUE ะบะปััะพะผ?

### PRIMARY KEY
- ะะดะฝะพะทะฝะฐัะฝะพ ะธะดะตะฝัะธัะธัะธััะตั ะบะฐะถะดัั ัััะพะบั ะฒ ัะฐะฑะปะธัะต.
- ะะพะถะตั ัะพััะพััั ะธะท **ะพะดะฝะพะณะพ ะธะปะธ ะฝะตัะบะพะปัะบะธั ััะพะปะฑัะพะฒ** (ัะพััะฐะฒะฝะพะน ะบะปัั).
- ะ ัะฐะฑะปะธัะต ะผะพะถะตั ะฑััั **ัะพะปัะบะพ ะพะดะธะฝ PRIMARY KEY**.
- ะะฝะฐัะตะฝะธั **ะฝะต ะผะพะณัั ะฑััั NULL**.
- ะัะธ ัะพะทะดะฐะฝะธะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัััั ะธะฝะดะตะบั.

### UNIQUE ะบะปัั
- ะะฐัะฐะฝัะธััะตั, ััะพ ะทะฝะฐัะตะฝะธั ะฒ ััะพะปะฑัะต (ะธะปะธ ะฝะฐะฑะพัะต ััะพะปะฑัะพะฒ) ะฑัะดัั ัะฝะธะบะฐะปัะฝั.
- ะ ัะฐะฑะปะธัะต ะผะพะถะตั ะฑััั **ะฝะตัะบะพะปัะบะพ UNIQUE ะบะปััะตะน**.
- ะ ะพัะปะธัะธะต ะพั PRIMARY KEY, ะดะพะฟััะบะฐะตั **ะพะดะฝะพ ะทะฝะฐัะตะฝะธะต NULL** (ะฟะพะฒะตะดะตะฝะธะต ะผะพะถะตั ะพัะปะธัะฐัััั ะฒ ัะฐะทะฝัั ะกะฃะะ).
- ะขะพะถะต ัะพะทะดะฐัั ัะฝะธะบะฐะปัะฝัะน ะธะฝะดะตะบั, ะฝะพ ะฝะต ะพะฑัะทะฐัะตะปัะฝะพ ัะฒะปัะตััั ยซะพัะฝะพะฒะฝัะผ ะธะดะตะฝัะธัะธะบะฐัะพัะพะผยป ัะฐะฑะปะธัั.

### ะัะฐัะบะพ
- `PRIMARY KEY` โ ะณะปะฐะฒะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั ัััะพะบะธ, ะพะฑัะทะฐัะตะปะตะฝ ะดะปั ัะฐะฑะปะธัั ะธ ะฒัะตะณะดะฐ **NOT NULL + UNIQUE**.
- `UNIQUE` โ ะดะพะฟะพะปะฝะธัะตะปัะฝะพะต ะพะณัะฐะฝะธัะตะฝะธะต ะดะปั ะฟัะตะดะพัะฒัะฐัะตะฝะธั ะดัะฑะปะธะบะฐัะพะฒ ะฒ ะดััะณะธั ััะพะปะฑัะฐั, ะฝะพ ะดะพะฟััะบะฐะตั `NULL` (ะฒ ะฑะพะปััะธะฝััะฒะต ะกะฃะะ).

### ะัะธะผะตั

```sql
CREATE TABLE users (
    user_id INT PRIMARY KEY,
    email VARCHAR(255) UNIQUE,
    phone VARCHAR(20) UNIQUE
);
```

## 10. ะะฐะบะธะต ะฒะธะดั ัะฒัะทะตะน ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ ัััะตััะฒััั ะธ ะบะฐะบ ะพะฝะธ ัะตะฐะปะธะทััััั?

ะ ัะตะปััะธะพะฝะฝัั ะฑะฐะทะฐั ะดะฐะฝะฝัั ัััะตััะฒััั ััะธ ะพัะฝะพะฒะฝัั ัะธะฟะฐ ัะฒัะทะตะน ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ: **1:1 (ะพะดะธะฝ ะบ ะพะดะฝะพะผั)**, **1:M (ะพะดะธะฝ ะบะพ ะผะฝะพะณะธะผ)** ะธ **M:N (ะผะฝะพะณะธะต ะบะพ ะผะฝะพะณะธะผ)**.

### ะกะฒัะทั 1:1 (One-to-One)

**ะะฟัะตะดะตะปะตะฝะธะต:** ะบะฐะถะดะพะน ะทะฐะฟะธัะธ ะฒ ะฟะตัะฒะพะน ัะฐะฑะปะธัะต ัะพะพัะฒะตัััะฒัะตั ะฝะต ะฑะพะปะตะต ะพะดะฝะพะน ะทะฐะฟะธัะธ ะฒะพ ะฒัะพัะพะน, ะธ ะฝะฐะพะฑะพัะพั.

**ะัะธะผะตั:**
- ะขะฐะฑะปะธัะฐ `users` โ ะพัะฝะพะฒะฝะฐั ะธะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปัั.
- ะขะฐะฑะปะธัะฐ `user_profiles` โ ะดะพะฟะพะปะฝะธัะตะปัะฝะฐั ะธะฝัะพัะผะฐัะธั (ะฝะฐะฟัะธะผะตั, ะฟะฐัะฟะพััะฝัะต ะดะฐะฝะฝัะต).

**ะะตะฐะปะธะทะฐัะธั:**  
ะะพ ะฒัะพัะพะน ัะฐะฑะปะธัะต (`user_profiles`) ัะพะทะดะฐัััั ะฒะฝะตัะฝะธะน ะบะปัั (`FOREIGN KEY`), ะบะพัะพััะน ัะฐะบะถะต ัะฒะปัะตััั `PRIMARY KEY`.  
ะญัะพ ะณะฐัะฐะฝัะธััะตั, ััะพ ั ะบะฐะถะดะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะฑัะดะตั ะฝะต ะฑะพะปะตะต ะพะดะฝะพะณะพ ะฟัะพัะธะปั.

```sql
CREATE TABLE users (  
  user_id INT PRIMARY KEY,  
  name VARCHAR(100)  
);

CREATE TABLE user_profiles (  
  user_id INT PRIMARY KEY,  
  address VARCHAR(200),  
  FOREIGN KEY (user_id) REFERENCES users(user_id)  
);
```

### ะกะฒัะทั 1:M (One-to-Many)

**ะะฟัะตะดะตะปะตะฝะธะต:** ะบะฐะถะดะพะน ะทะฐะฟะธัะธ ะฒ ะฟะตัะฒะพะน ัะฐะฑะปะธัะต ะผะพะถะตั ัะพะพัะฒะตัััะฒะพะฒะฐัั ะผะฝะพะณะพ ะทะฐะฟะธัะตะน ะฒะพ ะฒัะพัะพะน, ะฝะพ ะบะฐะถะดะฐั ะทะฐะฟะธัั ะฒะพ ะฒัะพัะพะน ัะฐะฑะปะธัะต ะพัะฝะพัะธััั ัะพะปัะบะพ ะบ ะพะดะฝะพะน ะทะฐะฟะธัะธ ะฒ ะฟะตัะฒะพะน.

**ะัะธะผะตั:**
- ะขะฐะฑะปะธัะฐ `departments` โ ัะฟะธัะพะบ ะพัะดะตะปะพะฒ.
- ะขะฐะฑะปะธัะฐ `employees` โ ัะฟะธัะพะบ ัะพัััะดะฝะธะบะพะฒ.

**ะะตะฐะปะธะทะฐัะธั:**  
ะะพ ะฒัะพัะพะน ัะฐะฑะปะธัะต (`employees`) ัะพะทะดะฐัััั ะฒะฝะตัะฝะธะน ะบะปัั, ะบะพัะพััะน ัััะปะฐะตััั ะฝะฐ ะฟะตัะฒะธัะฝัะน ะบะปัั ะฟะตัะฒะพะน ัะฐะฑะปะธัั (`departments`).

```sql
CREATE TABLE departments (  
  department_id INT PRIMARY KEY,  
  department_name VARCHAR(100)  
);

CREATE TABLE employees (  
  employee_id INT PRIMARY KEY,  
  name VARCHAR(100),  
  department_id INT,  
  FOREIGN KEY (department_id) REFERENCES departments(department_id)  
);
```

### ะกะฒัะทั M:N (Many-to-Many)

**ะะฟัะตะดะตะปะตะฝะธะต:** ะบะฐะถะดะพะน ะทะฐะฟะธัะธ ะฒ ะฟะตัะฒะพะน ัะฐะฑะปะธัะต ะผะพะถะตั ัะพะพัะฒะตัััะฒะพะฒะฐัั ะผะฝะพะณะพ ะทะฐะฟะธัะตะน ะฒะพ ะฒัะพัะพะน, ะธ ะฝะฐะพะฑะพัะพั.

**ะัะธะผะตั:**
- ะขะฐะฑะปะธัะฐ `students` โ ัััะดะตะฝัั.
- ะขะฐะฑะปะธัะฐ `courses` โ ะบัััั.
- ะะดะธะฝ ัััะดะตะฝั ะผะพะถะตั ะฟะพัะตัะฐัั ะผะฝะพะณะพ ะบัััะพะฒ, ะธ ะพะดะธะฝ ะบััั ะผะพะถะตั ะฟะพัะตัะฐัััั ะผะฝะพะณะธะผะธ ัััะดะตะฝัะฐะผะธ.

**ะะตะฐะปะธะทะฐัะธั:**  
ะกะพะทะดะฐัััั ััะตััั ัะฐะฑะปะธัะฐ (ะฟัะพะผะตะถััะพัะฝะฐั ะธะปะธ ัะฒัะทัััะฐั), ะบะพัะพัะฐั ััะฐะฝะธั ะฟะฐัั ะบะปััะตะน.

```sql
CREATE TABLE students (  
  student_id INT PRIMARY KEY,  
  name VARCHAR(100)  
);

CREATE TABLE courses (  
  course_id INT PRIMARY KEY,  
  course_name VARCHAR(100)  
);

CREATE TABLE student_courses (  
  student_id INT,  
  course_id INT,  
  PRIMARY KEY (student_id, course_id),  
  FOREIGN KEY (student_id) REFERENCES students(student_id),  
  FOREIGN KEY (course_id) REFERENCES courses(course_id)  
);
```

ะขะฐะฑะปะธัะฐ `student_courses` ัะฒัะทัะฒะฐะตั ัััะดะตะฝัะพะฒ ะธ ะบัััั, ัะตะฐะปะธะทัั ัะฒัะทั ยซะผะฝะพะณะธะต ะบะพ ะผะฝะพะณะธะผยป.

## 11. ะงัะพ ัะฐะบะพะต ะฝะพัะผะฐะปะธะทะฐัะธั? ะะฑัััะฝะธัะต ั ะฟัะธะผะตัะฐะผะธ

**ะะพัะผะฐะปะธะทะฐัะธั** โ ััะพ ะผะตัะพะด ะฟัะพะตะบัะธัะพะฒะฐะฝะธั ะฑะฐะทั ะดะฐะฝะฝัั, ะฝะฐะฟัะฐะฒะปะตะฝะฝัะน ะฝะฐ ัะฟะพััะดะพัะตะฝะธะต ััััะบัััั ัะฐะฑะปะธั ั ัะตะปัั ัะผะตะฝััะตะฝะธั ะธะทะฑััะพัะฝะพััะธ ะดะฐะฝะฝัั ะธ ะฟะพะฒััะตะฝะธั ะธั ัะตะปะพััะฝะพััะธ.  
ะัะพัะตัั ะฒัะฟะพะปะฝัะตััั ะฟะพััะฐะฟะฝะพ ะธ ัะฐะทะดะตะปัะฝ ะฝะฐ ะฝะตัะบะพะปัะบะพ ะฝะพัะผะฐะปัะฝัั ัะพัะผ (1NF, 2NF, 3NF, BCNF, 4NF), ะบะฐะถะดะฐั ะธะท ะบะพัะพััั ะธะผะตะตั ัะฒะพะธ ะฟัะฐะฒะธะปะฐ.

### ะัะธะผะตั ะฝะพัะผะฐะปะธะทะฐัะธะธ (ััะตะฝะฐัะธะน ยซCustomer Invoicesยป)

#### ะะตะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝะฐั ัะฐะฑะปะธัะฐ (0NF)

| ID | Name | Invoice No. | Invoice Date | Item No. | Description | Quantity | Unit Price |
|----|------|-------------|--------------|----------|-------------|----------|------------|

ะ ัะฐะบะพะผ ะฒะธะดะต ะฒัะต ะดะฐะฝะฝัะต ััะฐะฝัััั ะฒ ะพะดะฝะพะน ัะฐะฑะปะธัะต ะฑะตะท ััััะบัััะฝะพะน ะปะพะณะธะบะธ. ะะฐะฟะธัะธ ัะพะดะตัะถะฐั ะธ ะดะฐะฝะฝัะต ะพ ะบะปะธะตะฝัะต, ะธ ะดะฐะฝะฝัะต ะพ ััััะต, ะธ ะดะฐะฝะฝัะต ะพ ัะพะฒะฐัะฐั. ะญัะพ ะฟัะธะฒะพะดะธั ะบ ะธะทะฑััะพัะฝะพััะธ ะธ ะฐะฝะพะผะฐะปะธัะผ.

#### ะะตัะฒะฐั ะฝะพัะผะฐะปัะฝะฐั ัะพัะผะฐ (1NF)

**ะัะฐะฒะธะปะพ:** ะฒัะต ััะตะนะบะธ ะดะพะปะถะฝั ะฑััั ะฐัะพะผะฐัะฝัะผะธ (ัะพะปัะบะพ ะพะดะฝะพ ะทะฝะฐัะตะฝะธะต). ะัะถะฝะพ ัะฐะทะดะตะปััั ัะฒัะทะฐะฝะฝัะต ะณััะฟะฟั ะดะฐะฝะฝัั.

ะ ะฟัะธะผะตัะต ะฒัะดะตะปัะตะผ ะพัะดะตะปัะฝัะต ัะฐะฑะปะธัั:

**Customer Details Table**

| ID | Name |
|----|------|

**Invoices Table**

| Invoice No. | Customer_ID | Invoice Date |
|-------------|-------------|--------------|

**Items Table**

| Invoice No. | Item No. | Description | Quantity | Unit Price |
|-------------|----------|-------------|----------|------------|

ะขะตะฟะตัั ะบะฐะถะดะฐั ัะฐะฑะปะธัะฐ ะพัะฒะตัะฐะตั ะทะฐ ัะฒะพั ัััะฝะพััั.

#### ะัะพัะฐั ะฝะพัะผะฐะปัะฝะฐั ัะพัะผะฐ (2NF)

**ะัะฐะฒะธะปะพ:** ะบะฐะถะดัะน ะฝะตะบะปััะตะฒะพะน ััะพะปะฑะตั ะดะพะปะถะตะฝ ะทะฐะฒะธัะตัั ะพั ะฒัะตะณะพ ัะพััะฐะฒะฝะพะณะพ ะบะปััะฐ.

ะ ะฟัะธะผะตัะต ัะฐะฑะปะธัะฐ `Items` ัะถะต ัะดะพะฒะปะตัะฒะพััะตั 2NF, ัะฐะบ ะบะฐะบ `Description` ะธ `Unit Price` ะทะฐะฒะธััั ะพั ะฒัะตะณะพ ะบะปััะฐ `(Invoice No., Item No.)`.

#### ะขัะตััั ะฝะพัะผะฐะปัะฝะฐั ัะพัะผะฐ (3NF)

**ะัะฐะฒะธะปะพ:** ะฝะต ะดะพะปะถะฝะพ ะฑััั ััะฐะฝะทะธัะธะฒะฝัั ะทะฐะฒะธัะธะผะพััะตะน. ะะตะบะปััะตะฒัะต ััะพะปะฑัั ะดะพะปะถะฝั ะทะฐะฒะธัะตัั ัะพะปัะบะพ ะพั ะฟะตัะฒะธัะฝะพะณะพ ะบะปััะฐ.

ะ ะฝะฐัะตะผ ัะปััะฐะต ัะฐะฑะปะธัะฐ `Invoices` ััะพัะฝัะตััั ัะฐะบ:

**Updated Invoices Table**  

| Invoice No. | Customer_ID | Invoice Date |
|-------------|-------------|--------------|

ะะดะตัั `Customer_ID` โ ะตะดะธะฝััะฒะตะฝะฝัะน ะฐััะธะฑัั, ัะฒัะทะฐะฝะฝัะน ั ะบะปะธะตะฝัะพะผ.

### ะัะฐะบัะธัะตัะบะธะต ะฟะพัะปะตะดััะฒะธั

- ะะพะปะตะต ะฒััะพะบะธะต ะฝะพัะผะฐะปัะฝัะต ัะพัะผั ะฟะพะฒััะฐัั ัะตะปะพััะฝะพััั ะดะฐะฝะฝัั, ะฝะพ ะผะพะณัั ััะปะพะถะฝััั ัะฐะฑะพัั ั ะฝะธะผะธ.
- ะัะถะฝะพ ััะธััะฒะฐัั ัะฟะตัะธัะธะบั ะฟัะธะปะพะถะตะฝะธั ะฟัะธ ะฒัะฑะพัะต ัะตะปะตะฒะพะน ะฝะพัะผะฐะปัะฝะพะน ัะพัะผั.

### ะัะธะผะตะฝะตะฝะธะต ะฒ ัะตะฐะปัะฝะพะผ ะผะธัะต

- ะะพะปััะธะฝััะฒะพ ะฑะฐะท ะดะฐะฝะฝัั ัััะตะผะธััั ัะพัั ะฑั ะบ 3NF.
- ะะปั ะทะฐะดะฐั, ะณะดะต ะฒะฐะถะฝะฐ ะฟะพะปะฝะฐั ัะตะปะพััะฝะพััั ะดะฐะฝะฝัั, ะธัะฟะพะปัะทััััั 4NF ะธ ะฒััะต.

### ะัะธะผะตั SQL ัะตะฐะปะธะทะฐัะธะธ (3NF)

ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธัั ะบะปะธะตะฝัะพะฒ:

```sql
CREATE TABLE Customers (  
  ID INT PRIMARY KEY,  
  Name VARCHAR(50)  
);

--ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธัั ััะตัะพะฒ:

CREATE TABLE Invoices (  
  InvoiceNo INT PRIMARY KEY,  
  Customer_ID INT,  
  InvoiceDate DATE,  
  FOREIGN KEY (Customer_ID) REFERENCES Customers(ID)  
);

--ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธัั ัะพะฒะฐัะพะฒ:

CREATE TABLE Items (  
  InvoiceNo INT,  
  ItemNo INT,  
  Description VARCHAR(100),  
  Quantity INT,  
  UnitPrice DECIMAL(10,2),  
  PRIMARY KEY (InvoiceNo, ItemNo),  
  FOREIGN KEY (InvoiceNo) REFERENCES Invoices(InvoiceNo)  
);
```

ะญัะฐ ััััะบัััะฐ ะฒ 3NF ัะฐะทะดะตะปัะตั ะบะปะธะตะฝัะพะฒ, ััะตัะฐ ะธ ัะพะฒะฐัั ะฝะฐ ะพัะดะตะปัะฝัะต ัะฐะฑะปะธัั, ััะพ ะพะฑะตัะฟะตัะธะฒะฐะตั ัะตะปะพััะฝะพััั ะดะฐะฝะฝัั ะธ ัะดะพะฑััะฒะพ ะฟัะธ ัะฐะฑะพัะต.

## 12. ะงัะพ ัะฐะบะพะต ะดะตะฝะพัะผะฐะปะธะทะฐัะธั ะธ ะบะพะณะดะฐ ะตั ะธัะฟะพะปัะทััั?

**ะะตะฝะพัะผะฐะปะธะทะฐัะธั** โ ััะพ ะฟัะพัะตัั ะพะฟัะธะผะธะทะฐัะธะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฑะฐะทั ะดะฐะฝะฝัั ะทะฐ ัััั ัะผะตะฝััะตะฝะธั ัะธัะปะฐ ัะพะตะดะธะฝะตะฝะธะน (JOIN) ะธ ััะบะพัะตะฝะธั ะฒัะฑะพัะพะบ, ะฟัััะผ ะฟัะตะดะฝะฐะผะตัะตะฝะฝะพะณะพ ะดะพะฑะฐะฒะปะตะฝะธั ะธะทะฑััะพัะฝะพััะธ ะดะฐะฝะฝัั.  
ะญัะพ ะฟัะพัะธะฒะพะฟะพะปะพะถะฝัะน ะฟะพะดัะพะด ะฝะพัะผะฐะปะธะทะฐัะธะธ: ะผั ะถะตััะฒัะตะผ ัะฐัััั ัะตะปะพััะฝะพััะธ ัะฐะดะธ ัะบะพัะพััะธ.

### ะัะฝะพะฒะฝัะต ัะตัะฝะธะบะธ ะดะตะฝะพัะผะฐะปะธะทะฐัะธะธ

1. **ะฃะฟะปะพัะตะฝะธะต ัะฒัะทะตะน (Flattening Relationships)**
  - ะะฑัะตะดะธะฝะตะฝะธะต ัะฒัะทะฐะฝะฝัั ัะฐะฑะปะธั ะดะปั ะผะธะฝะธะผะธะทะฐัะธะธ ัะธัะปะฐ JOIN.
  - ะัะธะผะตั: ะพะฑัะตะดะธะฝะตะฝะธะต ัะฐะฑะปะธั `Order` ะธ `Product`, ััะพะฑั ัะฑัะฐัั ัะฒัะทั ะผะฝะพะณะธะต-ะบะพ-ะผะฝะพะณะธะผ.

2. **ะะณัะตะณะฐัะธั ะดะฐะฝะฝัั (Aggregating Data)**
  - ะัะตะดะฒะฐัะธัะตะปัะฝัะน ัะฐัััั ะทะฝะฐัะตะฝะธะน ะดะปั ัะฝะธะถะตะฝะธั ะฝะฐะณััะทะบะธ ะฟัะธ ะทะฐะฟัะพัะฐั.
  - ะัะธะผะตั: ะดะพะฑะฐะฒะปะตะฝะธะต ะบะพะปะพะฝะบะธ `Sales_Total` ะฒ ัะฐะฑะปะธัั `Order`.

3. **ะะพะฑะฐะฒะปะตะฝะธะต ะธะทะฑััะพัะฝัั ะดะฐะฝะฝัั (Adding Redundant Data)**
  - ะัะฑะปะธัะพะฒะฐะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะดะปั ัะผะตะฝััะตะฝะธั ัะธัะปะฐ ัะพะตะดะธะฝะตะฝะธะน.
  - ะัะธะผะตั: ัะฐะฑะปะธัั `Customer` ะธ `Sales` ะพะฑะต ัะพะดะตัะถะฐั ะฟะพะปะต `Country`, ัะพัั ะพะฝะพ ัะฒัะทะฐะฝะพ ัะตัะตะท `Customer`.

### ะขะธะฟะพะฒัะต ััะตะฝะฐัะธะธ ะฟัะธะผะตะฝะตะฝะธั

- **ะััััั ะธ ะฐะฝะฐะปะธัะธะบะฐ (Reporting and Analytics)**
  - ะััััั ัะฐััะพ ััะตะฑััั ัะพะตะดะธะฝะตะฝะธะน ะฑะพะปััะพะณะพ ัะธัะปะฐ ัะฐะฑะปะธั.
  - ะะตะฝะพัะผะฐะปะธะทะฐัะธั ัะฟัะพัะฐะตั ััััะบัััั ะธ ััะบะพััะตั ะณะตะฝะตัะฐัะธั ะพััััะพะฒ.

- **ะััะพะบะพะฝะฐะณััะถะตะฝะฝัะต ััะฐะฝะทะฐะบัะธะพะฝะฝัะต ัะธััะตะผั (High-Volume Transaction Systems)**
  - ะัะปะธ ะดะพะฟัััะธะผะฐ ะบัะฐัะบะพะฒัะตะผะตะฝะฝะฐั ะฝะตัะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะดะฐะฝะฝัั, ะดะตะฝะพัะผะฐะปะธะทะฐัะธั ััะบะพััะตั ะพะฟะตัะฐัะธะธ.
  - ะัะธะผะตั: ะฒ e-commerce ะดะพะฟััะบะฐะตััั ะฝะตะฑะพะปััะฐั ะทะฐะดะตัะถะบะฐ ะพะฑะฝะพะฒะปะตะฝะธั ะดะฐะฝะฝัั ะพ ะฟัะพะดะฐะถะฐั ัะฐะดะธ ะฑะพะปะตะต ะฑััััะพะณะพ ะพัะพัะผะปะตะฝะธั ะทะฐะบะฐะทะพะฒ.

- **ะกะธััะตะผั ั ะฟัะตะพะฑะปะฐะดะฐะฝะธะตะผ ััะตะฝะธั (Read-Mostly Applications)**
  - ะขะฐะผ, ะณะดะต ะผะฝะพะณะพ ะพะฟะตัะฐัะธะน ััะตะฝะธั ะธ ะผะฐะปะพ ะทะฐะฟะธัะธ.

- **ะกะธััะตะผั ั ะธะฝัะตะฝัะธะฒะฝัะผ ะฟะพะธัะบะพะผ ะธ ะทะฐะฟัะพัะฐะผะธ (Search- and Query-Intensive Applications)**
  - ะะพะธัะบะพะฒัะต ะดะฒะธะถะบะธ ัะฐััะพ ััะฐะฝัั ะดะฐะฝะฝัะต ะฒ ะดะตะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝะพะน ัะพัะผะต ะดะปั ััะบะพัะตะฝะธั ะฟะพะธัะบะฐ.

- **ะะฐัะฟัะตะดะตะปัะฝะฝัะต ัะธััะตะผั (Partitioning Data)**
  - ะ NoSQL ะธะปะธ Hadoop ะดะฐะฝะฝัะต ัะฐััะพ ััะฐะฝัััั ั ะธะทะฑััะพัะฝะพัััั ะดะปั ััะบะพัะตะฝะธั ะดะพัััะฟะฐ ะฝะฐ ัะฐะทะฝัั ัะทะปะฐั.

### ะกะพะพะฑัะฐะถะตะฝะธั ะธ ะบะพะผะฟัะพะผะธััั

- **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั vs. ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั**
  - ะะตะฝะพัะผะฐะปะธะทะฐัะธั ััะบะพััะตั ะทะฐะฟัะพัั, ะฝะพ ัะฝะธะถะฐะตั ะบะพะฝัะธััะตะฝัะฝะพััั ะดะฐะฝะฝัั.

- **ะกะปะพะถะฝะพััั ะพะฑัะปัะถะธะฒะฐะฝะธั (Maintenance Challenges)**
  - ะะทะฑััะพัะฝัะต ะดะฐะฝะฝัะต ะฝัะถะฝะพ ัะธะฝััะพะฝะธะทะธัะพะฒะฐัั ะธ ะพะฑะฝะพะฒะปััั.

- **ะัะพััะพัะฐ ัะบัะฟะปัะฐัะฐัะธะธ (Operational Simplicity)**
  - ะะฝะพะณะดะฐ ะฟัะพััะฐั ะดะตะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝะฐั ััััะบัััะฐ ัะดะพะฑะฝะตะต, ัะตะผ ัััะพะณะฐั ะฝะพัะผะฐะปะธะทะฐัะธั.

- **ะะธะฑะบะพััั ะทะฐะฟัะพัะพะฒ (Query Flexibility)**
  - ะะพัะผะฐะปะธะทะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต ะฟัะพัะต ะฐะดะฐะฟัะธัะพะฒะฐัั ะฟะพะด ะฝะพะฒัะต ะทะฐะฟัะพัั ะธ ะธะทะผะตะฝะตะฝะธั ััะตะผั, ะฐ ะดะตะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝัะต ััััะบัััั ััะตะฑััั ะดะพะฟะพะปะฝะธัะตะปัะฝัั ััะธะปะธะน ะดะปั ะผะพะดะธัะธะบะฐัะธะน.

### ะัะพะณ

ะะตะฝะพัะผะฐะปะธะทะฐัะธั ะธัะฟะพะปัะทัะตััั, ะบะพะณะดะฐ **ะฒะฐะถะฝะตะต ัะบะพัะพััั ะดะพัััะฟะฐ ะธ ัะฟัะพัะตะฝะธะต ะทะฐะฟัะพัะพะฒ**, ัะตะผ ัััะพะณะฐั ัะตะปะพััะฝะพััั ะดะฐะฝะฝัั.  
ะะฑััะฝะพ ะพะฝะฐ ะฟัะธะผะตะฝัะตััั:
- ะฒ ะฐะฝะฐะปะธัะธัะตัะบะธั ัะธััะตะผะฐั,
- ะฟัะธ ะพัะตะฝั ะฑะพะปััะธั ะพะฑััะผะฐั ะดะฐะฝะฝัั,
- ะฒ ะฟะพะธัะบะพะฒัั ะดะฒะธะถะบะฐั,
- ะฒ e-commerce ะดะปั ััะบะพัะตะฝะธั ะพัะบะปะธะบะฐ.

## 13. ะงัะพ ัะฐะบะพะต ะธะฝะดะตะบัั ะธ ะบะฐะบ ะพะฝะธ ัะปัััะฐัั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะทะฐะฟัะพัะพะฒ?

**ะะฝะดะตะบั** โ ััะพ ะดะพะฟะพะปะฝะธัะตะปัะฝะฐั ััััะบัััะฐ ะดะฐะฝะฝัั ะฒ ะกะฃะะ, ะบะพัะพัะฐั ััะฐะฝะธั ะทะฝะฐัะตะฝะธั ััะพะปะฑัะฐ (ะธะปะธ ััะพะปะฑัะพะฒ) ะฒ ะพััะพััะธัะพะฒะฐะฝะฝะพะผ/ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะพะผ ะดะปั ะฟะพะธัะบะฐ ะฒะธะดะต ะฒะผะตััะต ั ัะบะฐะทะฐัะตะปัะผะธ ะฝะฐ ัะพะพัะฒะตัััะฒัััะธะต ัััะพะบะธ ัะฐะฑะปะธัั.

**ะะฝะฐะปะพะณะธั:**
- ะะตะท ะธะฝะดะตะบัะฐ: ะธัะตัั ัะปะพะฒะพ ะฒ ะบะฝะธะณะต, ะฟะตัะตะปะธัััะฒะฐั ะบะฐะถะดัั ัััะฐะฝะธัั (ะฟะพะปะฝัะน ะฟะตัะตะฑะพั, table scan).
- ะก ะธะฝะดะตะบัะพะผ: ัะผะพััะธัั ะฒ ะฐะปัะฐะฒะธัะฝัะน ัะบะฐะทะฐัะตะปั ะธ ััะฐะทั ะฝะฐัะพะดะธัั ะฝัะถะฝัั ัััะฐะฝะธัั.

### ะัะฝะพะฒะฝัะต ะฒะธะดั ะธะฝะดะตะบัะพะฒ

#### Clustered Index (ะบะปะฐััะตัะฝัะน)
1. **ะงัะพ ะดะตะปะฐะตั:** ะทะฐะดะฐัั ัะธะทะธัะตัะบะธะน ะฟะพััะดะพะบ ััะฐะฝะตะฝะธั ัััะพะบ ะฒ ัะฐะฑะปะธัะต.
2. **ะะณัะฐะฝะธัะตะฝะธะต:** ัะพะปัะบะพ ะพะดะธะฝ ะฝะฐ ัะฐะฑะปะธัั.
3. **ะัะธะผะตั:** ะตัะปะธ ัะดะตะปะฐัั `PRIMARY KEY order_id` (ะฝะฐะฟัะธะผะตั, ะฒ SQL Server), ะฟะพ ัะผะพะปัะฐะฝะธั ััะพ ะฑัะดะตั clustered-ะธะฝะดะตะบั โ ัััะพะบะธ ัะตะฐะปัะฝะพ ะฑัะดัั ัะฐัะฟะพะปะพะถะตะฝั ะฟะพ `order_id`.
4. **ะะปัั:** ะฑัััััะน ะฟะพะธัะบ ะธ ัะพััะธัะพะฒะบะฐ ะฟะพ ะบะปััั.
5. **ะะธะฝัั:** ะฟัะธ ะฒััะฐะฒะบะต ะทะฝะฐัะตะฝะธะน ยซะฝะต ะฒ ะบะพะฝะตัยป ัััะพะบะธ ะฝัะถะฝะพ ะฟะตัะตััะฐะฒะปััั โ ะผะพะถะตั ะฑััั ะผะตะดะปะตะฝะฝะพ.

#### Non-Clustered Index (ะฝะตะบะปะฐััะตัะฝัะน)
- **ะงัะพ ะดะตะปะฐะตั:** ััะฐะฝะธั ะบะพะฟะธั ะบะปััะตะน + ัะบะฐะทะฐัะตะปั ะฝะฐ ะผะตััะพ ะฒ ัะฐะฑะปะธัะต (Row ID ะธะปะธ ะบะปะฐััะตัะฝัะน ะบะปัั).
- **ะกะบะพะปัะบะพ ะผะพะถะฝะพ:** ัะพัั ะดะตัััะบะธ ะฝะฐ ะพะดะฝั ัะฐะฑะปะธัั.
- **ะัะธะผะตั:**

```sql
  CREATE INDEX idx_orders_customer  
  ON orders(customer_id);
```

- **ะะปัั:** ะฑััััะพ ะธัะบะฐัั ะฟะพ ะฝะตะพัะฝะพะฒะฝัะผ ะฟะพะปัะผ.
- **ะะธะฝัั:** ะฟะพัะปะต ะฝะฐัะพะถะดะตะฝะธั ะบะปััะฐ ะกะฃะะ ะฒัั ัะฐะฒะฝะพ ะธะดัั ะฒ ัะฐะฑะปะธัั ะทะฐ ะพััะฐะปัะฝัะผะธ ะฟะพะปัะผะธ (lookup).

#### Covering Index (ะฟะพะบััะฒะฐััะธะน)
- **ะงัะพ ะดะตะปะฐะตั:** ัะพะดะตัะถะธั ะฒัะต ะฟะพะปั, ะฝัะถะฝัะต ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ะทะฐะฟัะพัะฐ โ ะบะปััะธ ะธ INCLUDE-ะบะพะปะพะฝะบะธ.
- **ะะฐัะตะผ:** ััะพะฑั ะฝะต ัะพะดะธัั ะฒ ัะฐะฑะปะธัั โ ะฒัั ัะธัะฐะตััั ะธะท ะธะฝะดะตะบัะฐ.
- **ะัะธะผะตั:**
```sql
CREATE INDEX idx_orders_cover  
ON orders(customer_id, order_date)  
INCLUDE(total_amount);
```
ะะฐะฟัะพั:
```sql
SELECT customer_id, order_date, total_amount  
FROM orders  
WHERE customer_id = 101;
```
ะผะพะถะตั ะฒัะฟะพะปะฝะธัััั ะฟะพะปะฝะพัััั ะธะท ะธะฝะดะตะบัะฐ.

#### Unique Index
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะพะฑะตัะฟะตัะธะฒะฐะตั ัะฝะธะบะฐะปัะฝะพััั ะทะฝะฐัะตะฝะธะน.
- **ะะดะต ะฟะพัะฒะปัะตััั:** ัะพะทะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ `PRIMARY KEY` ะธ `UNIQUE` ะพะณัะฐะฝะธัะตะฝะธัั.

### ะะฐะบ ะธะฝะดะตะบั ััััะพะตะฝ ะฒะฝัััะธ

- ะงะฐัะต ะฒัะตะณะพ ะธัะฟะพะปัะทัะตััั **B-tree**: ะฒ ัะทะปะฐั ััะฐะฝัััั ะดะธะฐะฟะฐะทะพะฝั ะทะฝะฐัะตะฝะธะน ะธ ัััะปะบะธ; ะฟะพะธัะบ โ `O(log N)` (ะฐ ะฝะต `O(N)`).
- ะะปั ะฟะพะปะฝะพัะตะบััะพะฒัั/ะณะตะพะดะฐะฝะฝัั ะผะพะณัั ะฟัะธะผะตะฝััััั ะดััะณะธะต ััััะบัััั: **hash**, **GiST**, **R-tree**.

### ะะพะณะดะฐ ะธะฝะดะตะบั ะฟะพะผะพะณะฐะตั

- ะฃัะปะพะฒะธะต ะฒ `WHERE` ะฟะพ ะบะพะปะพะฝะบะต ั ะธะฝะดะตะบัะพะผ, ะฒัะฑะธัะฐััะตะต **ะผะฐะปัั ะดะพะปั ัััะพะบ**.
- `JOIN` ะฟะพ ะธะฝะดะตะบัะธัะพะฒะฐะฝะฝัะผ ะบะพะปะพะฝะบะฐะผ.
- `ORDER BY` / `GROUP BY` ะฟะพ ะธะฝะดะตะบัะธััะตะผัะผ ััะพะปะฑัะฐะผ.
- ะงะฐัััะต ัะพัะตัะฝัะต (`=`) ะธ ะดะธะฐะฟะฐะทะพะฝะฝัะต (`BETWEEN`, `>`, `<`) ะทะฐะฟัะพัั.

### ะะพะณะดะฐ ะธะฝะดะตะบั ะฝะต ะฟะพะผะพะณะฐะตั

- ะัะตะฝั ะผะฐะปะตะฝัะบะฐั ัะฐะฑะปะธัะฐ โ ะฟะพะปะฝัะน ัะบะฐะฝ ะฑััััะตะต.
- ะะฐะฟัะพัั, ะบะพัะพััะต ะฒัะฑะธัะฐัั **>20โ30%** ัััะพะบ โ ััะตะฝะธะต ะฒัะตะน ัะฐะฑะปะธัั ะผะพะถะตั ะฑััั ะฒัะณะพะดะฝะตะต.
- ะฃัะปะพะฒะธั ั ััะฝะบัะธัะผะธ/ะฒััะฐะถะตะฝะธัะผะธ ะฝะฐ ะบะพะปะพะฝะบะต (ะธะฝะดะตะบั ะฝะต ะธัะฟะพะปัะทัะตััั):

```sql
    WHERE YEAR(order_date) = 2024    โ ะธะฝะดะตะบั ะฟะพ `order_date` ะฝะต ะฟัะธะผะตะฝะธััั
```
- ะะตัeะปeะบัะธะฒะฝัะต ััะปะพะฒะธั (ะฝะฐะฟัะธะผะตั, `WHERE gender = 'M'`, ะตัะปะธ 90% ะทะฝะฐัะตะฝะธะน โ `'M'`).

---

### ะะธะฝััั ะธะฝะดะตะบัะพะฒ

- **ะะฐะผััั:** ะทะฐะฝะธะผะฐัั ะผะตััะพ ะฝะฐ ะดะธัะบะต.
- **ะะฐะฟะธัั:** ะทะฐะผะตะดะปััั `INSERT/UPDATE/DELETE`, ะฟะพัะพะผั ััะพ ะธะฝะดะตะบัั ัะพะถะต ะฝัะถะฝะพ ะพะฑะฝะพะฒะปััั.
- **ะะพะดะดะตัะถะบะฐ:** ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ััััะบัััั ัะฐะฑะปะธัั ะธะฝะดะตะบัั ะฝัะถะฝะพ ะฟะตัะตัััะฐะธะฒะฐัั.

### ะะฐะบ ะฟัะพะฒะตัะธัั, ะธัะฟะพะปัะทัะตััั ะปะธ ะธะฝะดะตะบั

**PostgreSQL (ัะตะบัั SQL):**

```sql
  EXPLAIN ANALYZE  
  SELECT *
  FROM orders  
  WHERE customer_id = 123;
```

ะกะผะพััะธ, ะตััั ะปะธ ะฒ ะฟะปะฐะฝะต **Index Scan** (PostgreSQL) ะธะปะธ **Index Seek**/**Index Scan** (SQL Server).
- *Index Seek* โ ะฑัััััะน ะฐะดัะตัะฝัะน ะฟะพะธัะบ ะฟะพ ะดะตัะตะฒั.
- *Index Scan* โ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพะต ััะตะฝะธะต ะธะฝะดะตะบัะฐ ัะตะปะธะบะพะผ (ะปัััะต, ัะตะผ table scan, ะฝะพ ััะถะต seek).

### ะัะฐะบัะธัะตัะบะธะน ะบะตะนั

**ะัะพะฑะปะตะผะฐ:** ะฒ ะพััััะต Power BI ะทะฐะฟัะพั

```sql
  SELECT customer_id, SUM(amount)  
  FROM orders  
  WHERE order_date >= '2024-01-01'  
  GROUP BY customer_id;
```

ัะฐะฑะพัะฐะป ~2 ะผะธะฝััั.

**ะะตัะตะฝะธะต:** ัะพะทะดะฐะปะธ ะฟะพะบััะฒะฐััะธะน ะธะฝะดะตะบั
```sql
CREATE INDEX idx_orders_perf  
ON orders(order_date, customer_id)  
INCLUDE(amount);
```

โ ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ัะพะบัะฐัะธะปะพัั ะดะพ ~5 ัะตะบัะฝะด.

## 14. ะงัะพ ัะฐะบะพะต PL/SQL?

**a.** PL/SQL (Procedural Language/SQL) โ ััะพ ะฟัะพัะตะดััะฝะพะต ัะฐััะธัะตะฝะธะต Oracle ะดะปั SQL,  
ะบะพัะพัะพะต ะฟะพะทะฒะพะปัะตั ะบะพะผะฑะธะฝะธัะพะฒะฐัั SQL-ะพะฟะตัะฐัะพัั ั ะฒะพะทะผะพะถะฝะพัััะผะธ ะฟัะพัะตะดััะฝะพะณะพ ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั.

**b. ะัะฝะพะฒะฝัะต ัะฒะพะนััะฒะฐ:**
1. **ะะปะพัะฝะฐั ััััะบัััะฐ** โ ะบะพะด ะพัะณะฐะฝะธะทะพะฒะฐะฝ ะฒ ะดะตะบะปะฐัะฐัะธะฒะฝัะต, ะธัะฟะพะปะฝัะตะผัะต ะธ ะพะฑัะฐะฑะพััะธะบะธ ะธัะบะปััะตะฝะธะน.
2. **ะะฝัะตะณัะฐัะธั ั SQL** โ ะฟะพะทะฒะพะปัะตั ะฒัััะฐะธะฒะฐัั DML-ะพะฟะตัะฐัะพัั ะธ SELECT-ะทะฐะฟัะพัั ะฒะฝัััั ะฟัะพัะตะดััะฝะพะณะพ ะบะพะดะฐ.
3. **ะะตัะตะผะตะฝะฝัะต ะธ ัะธะฟั ะดะฐะฝะฝัั** โ ะฟะพะดะดะตัะถะบะฐ SQL-ัะธะฟะพะฒ ะดะฐะฝะฝัั ะธ ะฒะพะทะผะพะถะฝะพััั ะพะฑััะฒะปะตะฝะธั ะฟะตัะตะผะตะฝะฝัั, ะบะพะฝััะฐะฝั ะธ ะบัััะพัะพะฒ.
4. **ะฃะฟัะฐะฒะปัััะธะต ััััะบัััั** โ ะฟะพะดะดะตัะถะบะฐ `IF-THEN-ELSE`, `CASE` ะธ ัะธะบะปะพะฒ (`FOR`, `WHILE`, `LOOP`).
5. **ะะฑัะฐะฑะพัะบะฐ ะธัะบะปััะตะฝะธะน** โ ะฒัััะพะตะฝะฝัะน ะผะตัะฐะฝะธะทะผ ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ ัะตัะตะท ะฑะปะพะบะธ `EXCEPTION`.
6. **ะะพะดัะปัะฝะพััั** โ ะฟะพะดะดะตัะถะบะฐ ะฟัะพัะตะดัั, ััะฝะบัะธะน, ะฟะฐะบะตัะพะฒ ะธ ััะธะณะณะตัะพะฒ.
7. **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั** โ ัะฝะธะถะตะฝะธะต ัะตัะตะฒะพะณะพ ััะฐัะธะบะฐ ะทะฐ ัััั ะฒัะฟะพะปะฝะตะฝะธั ะปะพะณะธะบะธ ะฝะตะฟะพััะตะดััะฒะตะฝะฝะพ ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั.

**ะัะธะผะตั:**
```sql
  DECLARE
  v_total NUMBER;
  BEGIN
    SELECT COUNT(*) INTO v_total FROM employees;
    DBMS_OUTPUT.PUT_LINE(โTotal employees: โ || v_total);
  EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(โError occurredโ);
  END;
```
**ะะณัะฐะฝะธัะตะฝะธั PL/SQL:**
1. **ะกะปะพะถะฝะพััั ัะพะฟัะพะฒะพะถะดะตะฝะธั** โ ััะตะทะผะตัะฝะพะต ัะฐะทะผะตัะตะฝะธะต ะฑะธะทะฝะตั-ะปะพะณะธะบะธ ะฒ ะะ ััะปะพะถะฝัะตั ะพัะปะฐะดะบั ะธ ัะตััะธัะพะฒะฐะฝะธะต.
2. **ะะณัะฐะฝะธัะตะฝะฝะฐั ะฟะพะฒัะพัะฝะฐั ะธัะฟะพะปัะทัะตะผะพััั** โ ะบะพะด PL/SQL ะฝะตะปัะทั ะฝะฐะฟััะผัั ะธัะฟะพะปัะทะพะฒะฐัั ะฒะพ ะฒะฝะตัะฝะธั ะฟัะธะปะพะถะตะฝะธัั, ะฝะฐะฟะธัะฐะฝะฝัั ะฝะฐ ะดััะณะธั ัะทัะบะฐั.
3. **ะะฐะฒะธัะธะผะพััั ะพั ะฒะตััะธะธ** โ ะฝะตะบะพัะพััะต ััะฝะบัะธะธ ะดะพัััะฟะฝั ัะพะปัะบะพ ะฒ ะฝะพะฒัั ะฒะตััะธัั Oracle.
4. **ะะพัะตะฝัะธะฐะปัะฝะฐั ะฝะฐะณััะทะบะฐ ะฝะฐ ะะ** โ ะฟะตัะตะฝะพั ััะถัะปะพะน ะปะพะณะธะบะธ ะฒ PL/SQL ะผะพะถะตั ะฟะตัะตะณััะทะธัั ัะตัะฒะตั ะฒะผะตััะพ ัะฐัะฟัะตะดะตะปะตะฝะธั ะฝะฐะณััะทะบะธ ะฝะฐ ััะพะฒะตะฝั ะฟัะธะปะพะถะตะฝะธะน.
5. **ะะตะพะฑัะพะดะธะผะพััั ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัั ะฝะฐะฒัะบะพะฒ** โ ะฝะต ะฒัะต ัะฐะทัะฐะฑะพััะธะบะธ ะฒะปะฐะดะตัั PL/SQL, ััะพ ะผะพะถะตั ะพะณัะฐะฝะธัะธัั ะณะธะฑะบะพััั ะบะพะผะฐะฝะดั.

**ะัะฒะพะด:**  
PL/SQL ะปัััะต ะฒัะตะณะพ ะธัะฟะพะปัะทะพะฒะฐัั ะฒัะฑะพัะพัะฝะพ, ัะพัะตัะฐั ะปะพะณะธะบั ะฝะฐ ััะพัะพะฝะต ะฑะฐะทั ะดะฐะฝะฝัั ั ะพะฑัะฐะฑะพัะบะพะน ะฝะฐ ััะพัะพะฝะต ะฟัะธะปะพะถะตะฝะธะน.

## 15. ะะฐะบะฐั ัะฐะทะฝะธัะฐ ะผะตะถะดั ะฟัะพัะตะดััะฝัะผ ะธ ะดะตะบะปะฐัะฐัะธะฒะฝัะผ ะฟะพะดัะพะดะพะผ ะฒ SQL?

**Declarative SQL** โ ัะพะบััะธััะตััั ะฝะฐ ัะพะผ, *ะบะฐะบะพะน ัะตะทัะปััะฐั* ะฝัะถะตะฝ, ะพััะฐะฒะปัั *ะบะฐะบ* ะตะณะพ ะฟะพะปััะธัั ะฝะฐ ััะผะพััะตะฝะธะต ะกะฃะะ.
  ะะฐะฟัะธะผะตั, ะฟัะพััะพะน ะพะฟะตัะฐัะพั `SELECT` ัะบะฐะทัะฒะฐะตั ััะตะฑัะตะผัะต ะดะฐะฝะฝัะต, ะฐ ะกะฃะะ ัะฐะผะฐ ะพะฟัะตะดะตะปัะตั ะปัััะธะน ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั. ะะตะบะปะฐัะฐัะธะฒะฝัะน SQL ะปะฐะบะพะฝะธัะตะฝ ะธ ะพะฟัะธะผะธะทะธััะตััั ะฑะฐะทะพะน ะดะฐะฝะฝัั, ะฝะพ ะฟัะตะดะพััะฐะฒะปัะตั ะผะฐะปะพ ะบะพะฝััะพะปั ะฝะฐะด ะฟะพััะดะบะพะผ ะฒัะฟะพะปะฝะตะฝะธั.

**Procedural SQL** โ ะพะฑัะตะดะธะฝัะตั SQL ั ะฟัะพะณัะฐะผะผะฝัะผะธ ะบะพะฝััััะบัะธัะผะธ ะดะปั ัะฒะฝะพะณะพ ัะบะฐะทะฐะฝะธั, *ะบะฐะบ* ะฒัะฟะพะปะฝััั ะพะฟะตัะฐัะธะธ.
ะ PL/SQL, ะฝะฐะฟัะธะผะตั, ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ัะธะบะปั, ััะปะพะฒะธั ะธ ะพะฑัะฐะฑะพัะบั ะพัะธะฑะพะบ ะดะปั ัะตะฐะปะธะทะฐัะธะธ ัะปะพะถะฝะพะน ะฑะธะทะฝะตั-ะปะพะณะธะบะธ.
ะขะฐะบะพะน ะฟะพะดัะพะด ะดะฐัั ะฑะพะปััะต ะบะพะฝััะพะปั ะธ ะณะธะฑะบะพััะธ, ะฝะพ ะผะพะถะตั ะฑััั ะผะฝะพะณะพัะปะพะฒะฝัะผ ะธ ัะปะพะถะฝะตะต ะฒ ัะพะฟัะพะฒะพะถะดะตะฝะธะธ.

## 16. ะะฑัััะฝะธัะต ัะฒะพะนััะฒะฐ ACID ะฒ ะบะพะฝัะตะบััะต ะฑะฐะท ะดะฐะฝะฝัั

ะกะฒะพะนััะฒะฐ **ACID** ะพะฟะธััะฒะฐัั ะพัะฝะพะฒะฝัะต ะณะฐัะฐะฝัะธะธ, ะบะพัะพััะต ะดะพะปะถะฝะฐ ะพะฑะตัะฟะตัะธะฒะฐัั ัะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั (ะกะฃะะ) ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ััะฐะฝะทะฐะบัะธะน. ะะฝะธ ะฒะบะปััะฐัั:

1. **Atomicity (ะัะพะผะฐัะฝะพััั)**
  - ะขัะฐะฝะทะฐะบัะธั ัะฐััะผะฐััะธะฒะฐะตััั ะบะฐะบ ะตะดะธะฝะพะต ัะตะปะพะต: ะปะธะฑะพ ะฒัะฟะพะปะฝัะตััั ะฟะพะปะฝะพัััั, ะปะธะฑะพ ะฝะต ะฒัะฟะพะปะฝัะตััั ะฒะพะฒัะต.
  - ะัะปะธ ะฒะพ ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะฒะพะทะฝะธะบะฐะตั ะพัะธะฑะบะฐ, ะฒัะต ะธะทะผะตะฝะตะฝะธั ะพัะบะฐััะฒะฐัััั (rollback).

2. **Consistency (ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั)**
  - ะขัะฐะฝะทะฐะบัะธั ะดะพะปะถะฝะฐ ะฟะตัะตะฒะพะดะธัั ะฑะฐะทั ะดะฐะฝะฝัั ะธะท ะพะดะฝะพะณะพ ัะพะณะปะฐัะพะฒะฐะฝะฝะพะณะพ ัะพััะพัะฝะธั ะฒ ะดััะณะพะต.
  - ะัะต ะฟัะฐะฒะธะปะฐ, ะพะณัะฐะฝะธัะตะฝะธั ะธ ัะฒัะทะธ ะดะฐะฝะฝัั (constraints, triggers) ัะพััะฐะฝััััั.

3. **Isolation (ะะทะพะปะธัะพะฒะฐะฝะฝะพััั)**
  - ะะดะฝะพะฒัะตะผะตะฝะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต ััะฐะฝะทะฐะบัะธะน ะฝะต ะดะพะปะถะฝะพ ะฟัะธะฒะพะดะธัั ะบ ะบะพะฝัะปะธะบัะฐะผ.
  - ะะตะทัะปััะฐั ัะฐะฑะพัั ะฟะฐัะฐะปะปะตะปัะฝัั ััะฐะฝะทะฐะบัะธะน ัะบะฒะธะฒะฐะปะตะฝัะตะฝ ะธั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพะผั ะฒัะฟะพะปะฝะตะฝะธั (serializability).

4. **Durability (ะะฐะดัะถะฝะพััั/ะะพะปะณะพะฒะตัะฝะพััั)**
  - ะะพัะปะต ัะธะบัะฐัะธะธ (commit) ัะตะทัะปััะฐั ััะฐะฝะทะฐะบัะธะธ ัะพััะฐะฝัะตััั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั ะดะฐะถะต ะฟัะธ ัะฑะพัั ัะธััะตะผั ะธะปะธ ะพัะบะปััะตะฝะธะธ ะฟะธัะฐะฝะธั.

**ะัะธะผะตั:**  
ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตะฒะพะดะธั ะดะตะฝัะณะธ ะผะตะถะดั ััะตัะฐะผะธ:
- ะัะพะผะฐัะฝะพััั ะณะฐัะฐะฝัะธััะตั, ััะพ ะดะตะฝัะณะธ ัะฟะธััััั ั ะพะดะฝะพะณะพ ััััะฐ ะธ ะทะฐัะธัะปัััั ะฝะฐ ะดััะณะพะน, ะปะธะฑะพ ะพะฟะตัะฐัะธั ะฝะต ะฟัะพะธะทะพะนะดัั ะฒะพะพะฑัะต.
- ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะณะฐัะฐะฝัะธััะตั, ััะพ ััะผะผะฐ ะฝะฐ ะพะฑะพะธั ััะตัะฐั ะฑัะดะตั ัะพะพัะฒะตัััะฒะพะฒะฐัั ะฟัะฐะฒะธะปะฐะผ.
- ะะทะพะปะธัะพะฒะฐะฝะฝะพััั ะณะฐัะฐะฝัะธััะตั, ััะพ ะฟะฐัะฐะปะปะตะปัะฝัะต ะฟะตัะตะฒะพะดั ะฝะต ยซะฟะตัะตะฟััะฐััยป ะดะฐะฝะฝัะต.
- ะะฐะดัะถะฝะพััั ะณะฐัะฐะฝัะธััะตั, ััะพ ะฟะพัะปะต ััะฟะตัะฝะพะณะพ ะฟะตัะตะฒะพะดะฐ ะดะฐะฝะฝัะต ะฝะต ะฟะพัะตัััััั.  

## 17. ะงัะพ ัะฐะบะพะต ััะพะฒะตะฝั ะธะทะพะปััะธะธ ััะฐะฝะทะฐะบัะธะธ (Transaction Isolation Levels)? ะะฐะบะธะต ะฒะธะดั ะฑัะฒะฐัั ะธ ะบะฐะบะธะต ะฟัะพะฑะปะตะผั ะพะฝะธ ัะตัะฐัั ?
**ะฃัะพะฒะตะฝั ะธะทะพะปััะธะธ ััะฐะฝะทะฐะบัะธะธ** โ ััะพ ะฟัะฐะฒะธะปะพ, ะพะฟัะตะดะตะปัััะตะต, ะบะฐะบ ะพะดะฝะฐ ััะฐะฝะทะฐะบัะธั ะฒะธะดะธั ะดะฐะฝะฝัะต, ะธะทะผะตะฝัะตะผัะต ะดััะณะธะผะธ ััะฐะฝะทะฐะบัะธัะผะธ, ะธ ะฝะฐัะบะพะปัะบะพ ัััะพะณะพ ะฑะฐะทะฐ ะดะฐะฝะฝัั ะทะฐัะธัะฐะตั ะดะฐะฝะฝัะต ะพั ะบะพะฝะบััะธััััะธั ะธะทะผะตะฝะตะฝะธะน.

ะกัะฐะฝะดะฐััะธะทะธัะพะฒะฐะฝั ะฒ **SQL (ANSI/ISO SQL-92)**.

### ะัะพะฑะปะตะผั, ะบะพัะพััะต ัะตัะฐะตั ะธะทะพะปััะธั
ะัะธ ะฟะฐัะฐะปะปะตะปัะฝะพะผ ะฒัะฟะพะปะฝะตะฝะธะธ ััะฐะฝะทะฐะบัะธะน ะผะพะณัั ะฒะพะทะฝะธะบะฐัั ะฐะฝะพะผะฐะปะธะธ:

1. **Dirty Read (ะณััะทะฝะพะต ััะตะฝะธะต)**
  - ะขัะฐะฝะทะฐะบัะธั ัะธัะฐะตั ะดะฐะฝะฝัะต, ะบะพัะพััะต ะตัั ะฝะต ะทะฐัะธะบัะธัะพะฒะฐะฝั (`COMMIT`).
  - ะัะปะธ ััะฐะฝะทะฐะบัะธั-ะธััะพัะฝะธะบ ะพัะบะฐัะธััั, ะดะฐะฝะฝัะต ะพะบะฐะถัััั ยซะฝะตัััะตััะฒัััะธะผะธยป.

2. **Non-Repeatable Read (ะฝะตะฟะพะฒัะพััะตะผะพะต ััะตะฝะธะต)**
  - ะ ะพะดะฝะพะน ััะฐะฝะทะฐะบัะธะธ ะดะฒะฐะถะดั ัะธัะฐะตััั ะพะดะฝะฐ ะธ ัะฐ ะถะต ัััะพะบะฐ, ะฝะพ ัะตะทัะปััะฐั ัะฐะทะฝัะน, ัะฐะบ ะบะฐะบ ะดััะณะฐั ััะฐะฝะทะฐะบัะธั ะธะทะผะตะฝะธะปะฐ ะดะฐะฝะฝัะต.

3. **Phantom Read (ัะฐะฝัะพะผะฝัะต ััะตะฝะธั)**
  - ะ ะพะดะฝะพะน ััะฐะฝะทะฐะบัะธะธ ะฒัะฟะพะปะฝัะตััั ะทะฐะฟัะพั ะฟะพ ััะปะพะฒะธั (ะฝะฐะฟัะธะผะตั, `WHERE salary > 1000`).
  - ะัะธ ะฟะพะฒัะพัะฝะพะผ ะฒัะฟะพะปะฝะตะฝะธะธ ะฟะพัะฒะปััััั ะฝะพะฒัะต ัััะพะบะธ (ะฒััะฐะฒะปะตะฝะฝัะต ะดััะณะพะน ััะฐะฝะทะฐะบัะธะตะน).

4. **Lost Update (ะฟะพัะตััะฝะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต)**
  - ะะฒะต ััะฐะฝะทะฐะบัะธะธ ัะธัะฐัั ัััะพะบั, ะผะตะฝััั ะตั ะธ ัะพััะฐะฝััั.
  - ะะฑะฝะพะฒะปะตะฝะธะต ะพะดะฝะพะน ััะฐะฝะทะฐะบัะธะธ ยซะฟะตัะตัะธัะฐะตัััยป ะดััะณะพะน.

### ะฃัะพะฒะฝะธ ะธะทะพะปััะธะธ

1. **READ UNCOMMITTED**
  - ะะธะฝะธะผะฐะปัะฝะฐั ะธะทะพะปััะธั.
  - ะะฐะทัะตัะตะฝั *ะณััะทะฝัะต ััะตะฝะธั*.
  - ะััััะพ, ะฝะพ ะฝะตะฑะตะทะพะฟะฐัะฝะพ.
  - ะัะธะผะตะฝัะตััั ัะตะดะบะพ (ะฝะฐะฟัะธะผะตั, ะดะปั ะฐะฝะฐะปะธัะธะบะธ, ะณะดะต ะดะพะฟัััะธะผั ะฝะตัะพัะฝัะต ะดะฐะฝะฝัะต).

2. **READ COMMITTED** (ะฟะพ ัะผะพะปัะฐะฝะธั ะฒ PostgreSQL, Oracle, MS SQL)
  - ะะฐะฟัะตัะฐะตั *ะณััะทะฝัะต ััะตะฝะธั*.
  - ะะพ ะดะพะฟััะบะฐะตั *ะฝะตะฟะพะฒัะพััะตะผัะต ััะตะฝะธั* ะธ *ัะฐะฝัะพะผั*.
  - ะะฐะปะฐะฝั ะผะตะถะดั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั ะธ ะฑะตะทะพะฟะฐัะฝะพัััั.

3. **REPEATABLE READ** (ะฟะพ ัะผะพะปัะฐะฝะธั ะฒ MySQL InnoDB)
  - ะะฐัะฐะฝัะธััะตั, ััะพ ะฟัะธ ะฟะพะฒัะพัะฝะพะผ ััะตะฝะธะธ ัััะพะบ ัะตะทัะปััะฐั ะฑัะดะตั ะพะดะธะฝะฐะบะพะฒัะผ.
  - ะัะบะปััะฐะตั *ะณััะทะฝัะต* ะธ *ะฝะตะฟะพะฒัะพััะตะผัะต ััะตะฝะธั*.
  - ะะพ ัะฐะฝัะพะผั ะผะพะณัั ะฟะพัะฒะปััััั (ะฒ PostgreSQL ัะตัะฐัััั ัะตัะตะท MVCC ะธ ัะฐะบัะธัะตัะบะธ ัะฐะฝัะพะผะพะฒ ะฝะตั).

4. **SERIALIZABLE**
  - ะะฐะบัะธะผะฐะปัะฝะฐั ะธะทะพะปััะธั.
  - ะญะผัะปะธััะตั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต ััะฐะฝะทะฐะบัะธะน.
  - ะัะบะปััะฐะตั ะฒัะต ะฐะฝะพะผะฐะปะธะธ (ะณััะทะฝัะต, ะฝะตะฟะพะฒัะพััะตะผัะต, ัะฐะฝัะพะผั).
  - ะะพ ะพัะตะฝั ะดะพัะพะณะพะน ะฟะพ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ (ะผะฝะพะณะพ ะฑะปะพะบะธัะพะฒะพะบ ะธะปะธ ะฟัะพะฒะตัะบะธ ะบะพะฝัะปะธะบัะพะฒ).

### ะกัะฐะฒะฝะตะฝะธะต ััะพะฒะฝะตะน ะธะทะพะปััะธะธ

| ะฃัะพะฒะตะฝั           | Dirty Read | Non-Repeatable Read | Phantom Read | ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั |
|-------------------|------------|---------------------|--------------|--------------------|
| READ UNCOMMITTED  | โ          | โ                   | โ            | ะัะตะฝั ะฒััะพะบะฐั      |
| READ COMMITTED    | โ          | โ                   | โ            | ะััะพะบะฐั            |
| REPEATABLE READ   | โ          | โ                   | โ*           | ะกัะตะดะฝัั            |
| SERIALIZABLE      | โ          | โ                   | โ            | ะะธะทะบะฐั             |

\* ะ PostgreSQL ะฟัะธ `REPEATABLE READ` ัะฐะฝัะพะผะพะฒ ะฝะตั ะธะท-ะทะฐ ะผะตัะฐะฝะธะทะผะฐ MVCC.

### ะะปััั ะธ ะผะธะฝััั

- **READ UNCOMMITTED**
  - โ ะััััะตะต ะฒัะตะณะพ
  - โ ะััะทะฝัะต ะดะฐะฝะฝัะต, ัะธัะบ ะพัะธะฑะพะบ

- **READ COMMITTED**
  - โ ะฅะพัะพัะธะน ะฑะฐะปะฐะฝั ะดะปั OLTP
  - โ ะะพะทะผะพะถะฝั ะฝะตะฟะพะฒัะพััะตะผัะต ััะตะฝะธั, ัะฐะฝัะพะผั

- **REPEATABLE READ**
  - โ ะะพะดัะพะดะธั ะดะปั ะพััััะฝะพััะธ ะธ ะฐะฝะฐะปะธัะธะบะธ
  - โ ะะพะถะตั ะฑะปะพะบะธัะพะฒะฐัั ะฑะพะปััะต ัััะพะบ, ัะตะผ ะฝัะถะฝะพ

- **SERIALIZABLE**
  - โ ะะฐะบัะธะผะฐะปัะฝะฐั ะบะพััะตะบัะฝะพััั
  - โ ะกะธะปัะฝะพะต ะฟะฐะดะตะฝะธะต ะฟะฐัะฐะปะปะตะปัะฝะพััะธ, ะฑะปะพะบะธัะพะฒะบะธ/ะบะพะฝัะปะธะบัั

### 6. ะัะพะณ
- ะฃัะพะฒะฝะธ ะธะทะพะปััะธะธ ะฝัะถะฝั ะดะปั ะฒัะฑะพัะฐ ะบะพะผะฟัะพะผะธััะฐ ะผะตะถะดั **ัะตะปะพััะฝะพัััั ะดะฐะฝะฝัั** ะธ **ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั**.
- ะงะตะผ ะฒััะต ััะพะฒะตะฝั โ ัะตะผ ะฑะพะปััะต ะทะฐัะธัะฐ ะพั ะฐะฝะพะผะฐะปะธะน, ะฝะพ ัะตะผ ะฝะธะถะต ะบะพะฝะบััะตะฝัะฝะพััั ััะฐะฝะทะฐะบัะธะน.
- ะะฐ ะฟัะฐะบัะธะบะต:
  - `READ COMMITTED` โ ััะฐะฝะดะฐัั ะดะปั OLTP-ัะธััะตะผ.
  - `REPEATABLE READ` โ ัะพัะพั ะดะปั ะฐะฝะฐะปะธัะธะบะธ.
  - `SERIALIZABLE` โ ัะตะดะบะพ, ะบะพะณะดะฐ ะฝัะถะฝะฐ ะฐะฑัะพะปััะฝะฐั ะบะพััะตะบัะฝะพััั.

## 18. ะะฑัััะฝะธัะต ะปะพะณะธัะตัะบัั ะฐััะธัะตะบัััั PostgreSQL

ะะพะณะธัะตัะบะฐั ะฐััะธัะตะบัััะฐ PostgreSQL ะพะฟัะตะดะตะปัะตั, ะบะฐะบ ะดะฐะฝะฝัะต ะพัะณะฐะฝะธะทะพะฒะฐะฝั ะธ ะบะฐะบ ะบ ะฝะธะผ ะพัััะตััะฒะปัะตััั ะดะพัััะฟ ะฝะฐ ะบะพะฝัะตะฟััะฐะปัะฝะพะผ ััะพะฒะฝะต.

**ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั:**
1. **Cluster** โ ะบะพะปะปะตะบัะธั ะฑะฐะท ะดะฐะฝะฝัั, ัะฟัะฐะฒะปัะตะผัั ะพะดะฝะธะผ ัะบะทะตะผะฟะปััะพะผ PostgreSQL.
2. **Database** โ ะธะทะพะปะธัะพะฒะฐะฝะฝัะน ะบะพะฝัะตะนะฝะตั ะดะปั ััะตะผ, ัะฐะฑะปะธั ะธ ัะพะปะตะน.
3. **Schema** โ ะฟัะพัััะฐะฝััะฒะพ ะธะผัะฝ, ะบะพัะพัะพะต ะณััะฟะฟะธััะตั ะพะฑัะตะบัั ะฑะฐะทั ะดะฐะฝะฝัั ะธ ะฟัะตะดะพัะฒัะฐัะฐะตั ะบะพะฝัะปะธะบัั ะธะผัะฝ.
4. **Table** โ ะพัะฝะพะฒะฝะฐั ััััะบัััะฐ ััะฐะฝะตะฝะธั ะดะฐะฝะฝัั ะฒ ัััะพะบะฐั ะธ ััะพะปะฑัะฐั.
5. **Index** โ ััะบะพััะตั ะฒัะฟะพะปะฝะตะฝะธะต ะทะฐะฟัะพัะพะฒ ะทะฐ ัััั ะฑััััะพะณะพ ะฟะพะธัะบะฐ.
6. **View** โ ะปะพะณะธัะตัะบะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ัะตะทัะปััะฐัะฐ ะทะฐะฟัะพัะฐ (ะผะพะถะตั ะฑััั ะพะฑััะฝัะผ ะธะปะธ ะผะฐัะตัะธะฐะปะธะทะพะฒะฐะฝะฝัะผ).
7. **Role/User** โ ัะฟัะฐะฒะปััั ะดะพัััะฟะพะผ ะธ ะฟัะฐะฒะฐะผะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

**ะะฐะบ ัะฐะฑะพัะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต ะทะฐะฟัะพัะฐ:**
- PostgreSQL ะฟัะพะฒะตััะตั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ.
- ะะฐะทะฑะธัะฐะตั (ะฟะฐััะธั) ะทะฐะฟัะพั.
- ะะตะฝะตัะธััะตั ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั.
- ะะทะฒะปะตะบะฐะตั ะดะฐะฝะฝัะต ะธะท ัะพะพัะฒะตัััะฒัััะธั ะปะพะณะธัะตัะบะธั ะพะฑัะตะบัะพะฒ (ัะฐะฑะปะธั, ะฟัะตะดััะฐะฒะปะตะฝะธะน ะธ ะธะฝะดะตะบัะพะฒ) ะฑะตะท ะฟััะผะพะณะพ ะดะพัััะฟะฐ ะบ ัะธะทะธัะตัะบะธะผ ัะฐะนะปะฐะผ.  

![DB LOGICAL SCHEMA](../images/db-logical-schema.png)

## 19. ะะฟะธัะธ ัะธะทะธัะตัะบัั ััััะบัััั PostgreSQL

ะคะธะทะธัะตัะบะฐั ะฐััะธัะตะบัััะฐ PostgreSQL ะพะฟะธััะฒะฐะตั, ะบะฐะบ ะฑะฐะทะฐ ะดะฐะฝะฝัั ะพัะณะฐะฝะธะทะพะฒะฐะฝะฐ ะฝะฐ ััะพะฒะฝะต ัะฐะนะปะพะฒะพะน ัะธััะตะผั ะธ ะบะฐะบ ัะพะฝะพะฒัะต ะฟัะพัะตััั ัะฟัะฐะฒะปััั ััะฐะฝะตะฝะธะตะผ, ะธะทะฒะปะตัะตะฝะธะตะผ ะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะตะผ ะดะฐะฝะฝัั. ะะฝะฐ ัะพััะพะธั ะธะท **ัะฐะนะปะพะฒ ะดะฐะฝะฝัั, ะบะพะฝัะธะณััะฐัะธะพะฝะฝัั ัะฐะนะปะพะฒ, ัะพะฝะพะฒัั ะฟัะพัะตััะพะฒ, ััััะบััั ะฟะฐะผััะธ ะธ ะผะตัะฐะฝะธะทะผะพะฒ ะถััะฝะฐะปะธัะพะฒะฐะฝะธั ััะฐะฝะทะฐะบัะธะน**.

### ะกัััะบัััะฐ ัะฐะนะปะพะฒะพะน ัะธััะตะผั
1. **Data Directory (PGDATA)** โ ะบะพัะฝะตะฒะฐั ะฟะฐะฟะบะฐ, ัะพะดะตัะถะฐัะฐั ะฒัะต ัะฐะนะปั ะฑะฐะทั ะดะฐะฝะฝัั.
2. **base/** โ ััะฐะฝะธั ะฟะพะดะบะฐัะฐะปะพะณะธ ะดะปั ะบะฐะถะดะพะน ะฑะฐะทั ะดะฐะฝะฝัั ะฒ ะบะปะฐััะตัะต ั ะพัะดะตะปัะฝัะผะธ ัะฐะนะปะฐะผะธ ะดะปั ัะฐะฑะปะธั ะธ ะธะฝะดะตะบัะพะฒ.
3. **global/** โ ััะฐะฝะธั ะดะฐะฝะฝัะต ััะพะฒะฝั ะบะปะฐััะตัะฐ (ะฝะฐะฟัะธะผะตั, ัะพะปะธ ะธ ะพะฟัะตะดะตะปะตะฝะธั ัะฐะฑะปะธัะฝัั ะฟัะพัััะฐะฝััะฒ).
4. **pg_wal/** โ ัะพะดะตัะถะธั WAL-ัะตะณะผะตะฝัั (Write-Ahead Log), ัะธะบัะธััััะธะต ะฒัะต ะธะทะผะตะฝะตะฝะธั ะดะพ ะธั ะฟัะธะผะตะฝะตะฝะธั ะบ ัะฐะนะปะฐะผ ะดะฐะฝะฝัั.
5. **pg_tblspc/** โ ัะธะผะฒะพะปัะฝัะต ัััะปะบะธ ะฝะฐ ัะฐะฑะปะธัะฝัะต ะฟัะพัััะฐะฝััะฒะฐ, ัะพะทะดะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะตะผ ะฒะฝะต ะดะธัะตะบัะพัะธะธ ะฟะพ ัะผะพะปัะฐะฝะธั.
6. **pg_stat/** ะธ **pg_stat_tmp/** โ ััะฐะฝัั ัะพะฑัะฐะฝะฝัั ััะฐัะธััะธะบั, ะธัะฟะพะปัะทัะตะผัั ะฟะปะฐะฝะธัะพะฒัะธะบะพะผ ะทะฐะฟัะพัะพะฒ.

### ะคะพะฝะพะฒัะต ะฟัะพัะตััั
PostgreSQL ะธัะฟะพะปัะทัะตั ะผะพะดะตะปั *process-per-connection* (ะฟัะพัะตัั ะฝะฐ ะฟะพะดะบะปััะตะฝะธะต). ะัะฝะพะฒะฝัะต ัะพะฝะพะฒัะต ะฟัะพัะตััั:

- **Postmaster** โ ะณะปะฐะฒะฝัะน ัะฟัะฐะฒะปัััะธะน ะฟัะพัะตัั, ะทะฐะฟััะบะฐะตั ะธ ัะฟัะฐะฒะปัะตั ะพััะฐะปัะฝัะผะธ ะฟัะพัะตััะฐะผะธ ัะตัะฒะตัะฐ.
- **Backend Process** โ ะฒัะฟะพะปะฝัะตั SQL-ะทะฐะฟัะพัั ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ะบะปะธะตะฝัะฐ.
- **WAL Writer** โ ะทะฐะฟะธััะฒะฐะตั ะธะทะผะตะฝะตะฝะธั ััะฐะฝะทะฐะบัะธะน ะฒ WAL ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ะฝะฐะดัะถะฝะพััะธ.
- **Background Writer** โ ัะฑัะฐััะฒะฐะตั ะธะทะผะตะฝัะฝะฝัะต ("ะณััะทะฝัะต") ัััะฐะฝะธัั ะธะท ะฑััะตัะฐ ะฒ ะดะธัะบ.
- **Checkpointer** โ ะฟะตัะธะพะดะธัะตัะบะธ ัะฑัะฐััะฒะฐะตั ะฒัะต ัััะฐะฝะธัั ะฝะฐ ะดะธัะบ, ัะพะทะดะฐะฒะฐั ัะพะณะปะฐัะพะฒะฐะฝะฝัั ัะพัะบั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั (checkpoint).
- **Autovacuum Launcher & Workers** โ ัะดะฐะปััั "ะผะตััะฒัะต" ะทะฐะฟะธัะธ ะธ ะฟะพะดะดะตัะถะธะฒะฐัั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั.
- **Archiver** โ ะฟะตัะตะฝะพัะธั ะทะฐะฒะตัััะฝะฝัะต WAL-ัะตะณะผะตะฝัั ะฒ ะฐััะธะฒ (ะดะปั high-availability ะธ ัะตะทะตัะฒะฝะพะณะพ ะบะพะฟะธัะพะฒะฐะฝะธั).

### Write-Ahead Logging (WAL)
1. ะัะต ะธะทะผะตะฝะตะฝะธั ัะฝะฐัะฐะปะฐ ะทะฐะฟะธััะฒะฐัััั ะฒ WAL, ะฐ ะทะฐัะตะผ ะฒ ัะฐะนะปั ะดะฐะฝะฝัั.
2. ะะฑะตัะฟะตัะธะฒะฐะตั **ะฝะฐะดัะถะฝะพััั (durability)** ะธ ะฒะพะทะผะพะถะฝะพััั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะฟะพัะปะต ัะฑะพะตะฒ, ะฐ ัะฐะบะถะต ัะตะฟะปะธะบะฐัะธั.
3. WAL ะธัะฟะพะปัะทัะตััั ะดะปั **point-in-time recovery** ะธ **streaming replication**.

### ะกัััะบัััั ะฟะฐะผััะธ
1. **Shared Buffers** โ ะพัะฝะพะฒะฝะพะน ะบัั ัะฐะฑะปะธั ะธ ะธะฝะดะตะบัะพะฒ, ะพะฑัะธะน ะดะปั ะฒัะตั ะฟะพะดะบะปััะตะฝะธะน.
2. **WAL Buffers** โ ะฒัะตะผะตะฝะฝะพะต ััะฐะฝะธะปะธัะต ะดะปั ะทะฐะฟะธัะตะน WAL ะฟะตัะตะด ะธั ัะฑัะพัะพะผ ะฝะฐ ะดะธัะบ.
3. **Work Memory** โ ะฒัะดะตะปัะตััั ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะพะฟะตัะฐัะธะน ะทะฐะฟัะพัะฐ (ัะพััะธัะพะฒะบะธ, ัะพะตะดะธะฝะตะฝะธั ะธ ั.ะด.).
4. **Maintenance Work Memory** โ ะธัะฟะพะปัะทัะตััั ะดะปั ัะปัะถะตะฑะฝัั ะทะฐะดะฐั (vacuum, ัะพะทะดะฐะฝะธะต ะธะฝะดะตะบัะพะฒ).

### ะะพัะพะบ ะดะฐะฝะฝัั (Data Flow)
1. ะะปะธะตะฝั ะพัะฟัะฐะฒะปัะตั SQL-ะทะฐะฟัะพั.
2. Backend-ะฟัะพัะตัั ะฟะฐััะธั ะธ ะฟะปะฐะฝะธััะตั ะทะฐะฟัะพั.
3. ะะฐะฟัะพั ะฒัะฟะพะปะฝัะตััั ะธ ะดะฐะฝะฝัะต ัะธัะฐัััั ะธะท Shared Buffers (ะธะปะธ ั ะดะธัะบะฐ, ะตัะปะธ ะฝะต ะบััะธัะพะฒะฐะฝั).
4. ะะฑะฝะพะฒะปะตะฝะธั ะทะฐะฟะธััะฒะฐัััั ะฒ WAL.
5. Background Writer ะธ Checkpointer ัะฑัะฐััะฒะฐัั ะดะฐะฝะฝัะต ะฝะฐ ะดะธัะบ.

## 20. ะะฑัััะฝะธัะต MVCC ะฒ PostgreSQL

MVCC (Multi-Version Concurrency Control) โ ะผะตัะฐะฝะธะทะผ, ะฟะพะทะฒะพะปัััะธะน ะฝะตัะบะพะปัะบะธะผ ััะฐะฝะทะฐะบัะธัะผ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ัะธัะฐัั ะธ ะธะทะผะตะฝััั ะดะฐะฝะฝัะต ะฑะตะท ะฒะทะฐะธะผะฝะพะน ะฑะปะพะบะธัะพะฒะบะธ, ะฟัะธ ััะพะผ ัะพััะฐะฝัั ะธะทะพะปััะธั ััะฐะฝะทะฐะบัะธะน.  
ะะผะตััะพ ะฑะปะพะบะธัะพะฒะบะธ ัััะพะบ ะดะปั ัะธัะฐัะตะปะตะน PostgreSQL ััะฐะฝะธั ะฝะตัะบะพะปัะบะพ ะฒะตััะธะน ัััะพะบะธ ะธ ะธัะฟะพะปัะทัะตั "ัะฝะธะผะบะธ ััะฐะฝะทะฐะบัะธะน" (snapshots) ะดะปั ะพะฟัะตะดะตะปะตะฝะธั ะฒะธะดะธะผะพััะธ ะดะฐะฝะฝัั.

### ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:
1. ะะฐะถะดะฐั ัััะพะบะฐ ะธะผะตะตั ะดะฒะฐ ัะบััััั ัะธััะตะผะฝัั ััะพะปะฑัะฐ:
  - **xmin** โ ID ััะฐะฝะทะฐะบัะธะธ, ัะพะทะดะฐะฒัะตะน ัััะพะบั.
  - **xmax** โ ID ััะฐะฝะทะฐะบัะธะธ, ัะดะฐะปะธะฒัะตะน ะธะปะธ ะธะทะผะตะฝะธะฒัะตะน ัััะพะบั.
2. ะัะธ `UPDATE` PostgreSQL ะฟะพะผะตัะฐะตั ััะฐััั ะฒะตััะธั ัััะพะบะธ ะทะฝะฐัะตะฝะธะตะผ `xmax` ะธ ะฒััะฐะฒะปัะตั ะฝะพะฒัั ัััะพะบั ั ะฝะพะฒัะผ `xmin`.
3. ะัะธ `SELECT` ะฑะฐะทะฐ ะดะฐะฝะฝัั ะฒะพะทะฒัะฐัะฐะตั ัะพะปัะบะพ ัะต ะฒะตััะธะธ ัััะพะบ, ะบะพัะพััะต ะฒะธะดะธะผั ะฒ ัะฝะธะผะบะต ัะตะบััะตะน ััะฐะฝะทะฐะบัะธะธ.
4. ะกัะฐััะต ะฒะตััะธะธ ััะฐะฝะพะฒัััั ยซะผะตััะฒัะผะธ ะบะพััะตะถะฐะผะธยป (dead tuples) ะธ ัะดะฐะปััััั ั ะฟะพะผะพััั `VACUUM` ะธะปะธ `Autovacuum`.

### ะัะตะธะผััะตััะฒะฐ:
1. ะงะธัะฐัะตะปะธ ะฝะต ะฑะปะพะบะธัััั ะฟะธัะฐัะตะปะตะน ะธ ะฝะฐะพะฑะพัะพั.
2. ะฃะปัััะฐะตััั ะฟะฐัะฐะปะปะตะปัะฝะพััั ะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะฒ ัะธััะตะผะฐั ั ะฒััะพะบะพะน ะฝะฐะณััะทะบะพะน.
3. ะะตััะพะฒะฝะฐั ัะฐะฑะพัะฐ ั WAL ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะฟะพัะปะต ัะฑะพะตะฒ.

### ะะตะดะพััะฐัะบะธ:
1. ะขัะตะฑัะตััั ัะตะณัะปััะฝัะน `VACUUM` ะดะปั ะพัะฒะพะฑะพะถะดะตะฝะธั ะฟัะพัััะฐะฝััะฒะฐ.
2. ะะพะถะตั ะฒะพะทะฝะธะบะฐัั ยซัะฐะทะฑััะฐะฝะธะต ัะฐะฑะปะธัยป (table bloat), ะตัะปะธ ะพะฑะฝะพะฒะปะตะฝะธะน ะผะฝะพะณะพ, ะฐ ะพัะธััะบะฐ ะทะฐะดะตัะถะธะฒะฐะตััั.

## 21. ะงัะพ ัะฐะบะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะฝะฐ ะฟัะธะผะตัะต PostgreSQL?

ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต โ ะฟัะพัะตัั ัะฒะตะปะธัะตะฝะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะธ ะฟัะพะฟััะบะฝะพะน ัะฟะพัะพะฑะฝะพััะธ PostgreSQL, ััะพะฑั ะพะฑัะฐะฑะฐััะฒะฐัั ะฑะพะปััะต ะดะฐะฝะฝัั ะธะปะธ ะฑะพะปััะต ะพะดะฝะพะฒัะตะผะตะฝะฝัั ะทะฐะฟัะพัะพะฒ.

### ะัะฝะพะฒะฝัะต ะฟะพะดัะพะดั:
1. **Vertical Scaling (ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ยซะฒะฒะตััยป)**
  - ะฃะฒะตะปะธัะตะฝะธะต ัะตััััะพะฒ ะพะดะฝะพะณะพ ัะตัะฒะตัะฐ: CPU, RAM, ะดะธัะบะธ.
  - ะัะพััะพะน ะฟััั: ะพะฑะฝะพะฒะธัั ยซะถะตะปะตะทะพยป ะธะปะธ ะฟะฐัะฐะผะตััั ะบะพะฝัะธะณััะฐัะธะธ PostgreSQL.
  - ะัะธะผะตั: ัะฒะตะปะธัะธัั `shared_buffers`, ะฟะตัะตะนัะธ ะฝะฐ ะฑะพะปะตะต ะผะพัะฝัะน ัะตัะฒะตั.

   **ะะปััั:**
  - ะะตะณะบะพ ัะตะฐะปะธะทะพะฒะฐัั.
  - ะะต ััะตะฑัะตั ะธะทะผะตะฝะตะฝะธั ะฐััะธัะตะบัััั ะฟัะธะปะพะถะตะฝะธั.

   **ะะธะฝััั:**
  - ะััั ัะธะทะธัะตัะบะธะน ะฟัะตะดะตะป (ะดะพัะพะณะพ ะธ ะฝะต ะฑะตัะบะพะฝะตัะฝะพ).
  - ะะดะธะฝ ัะตัะฒะตั ะพััะฐัััั ยซัะทะบะธะผ ะณะพัะปััะบะพะผยป.

2. **Horizontal Scaling (ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ยซะฒัะธััยป)**
  - ะะพะฑะฐะฒะปะตะฝะธะต ะฝะตัะบะพะปัะบะธั ัะตัะฒะตัะพะฒ ะดะปั ัะฐัะฟัะตะดะตะปะตะฝะธั ะฝะฐะณััะทะบะธ.
  - ะ PostgreSQL ัะตะฐะปะธะทัะตััั ัะตัะตะท:
    1. **Read Replicas (Streaming Replication)** โ ัะตะฟะปะธะบะธ ะดะปั ััะตะฝะธั.
    2. **Logical Replication** โ ัะตะฟะปะธะบะฐัะธั ะฝะฐ ััะพะฒะฝะต ัะฐะฑะปะธั/ะทะฐะฟะธัะตะน, ะผะพะถะฝะพ ัะฐััะธัะฝะพ ัะธะฝััะพะฝะธะทะธัะพะฒะฐัั ะดะฐะฝะฝัะต.
    3. **Sharding** โ ัะฐะทะดะตะปะตะฝะธะต ะดะฐะฝะฝัั ะฟะพ ัะตัะฒะตัะฐะผ (ะฝะตั ะฒัััะพะตะฝะฝะพะน ะฟะพะดะดะตัะถะบะธ; ะธัะฟะพะปัะทััั Citus, Yugabyte ะธ ะดั.).
    4. **Pgpool-II / PgBouncer** โ ะฑะฐะปะฐะฝัะธัะพะฒะบะฐ ะฝะฐะณััะทะบะธ ะผะตะถะดั ัะตัะฒะตัะฐะผะธ.

   **ะะปััั:**
  - ะะตั ะถัััะบะพะณะพ ะพะณัะฐะฝะธัะตะฝะธั ะฟะพ ะผะพัะฝะพััะธ.
  - ะะพะถะฝะพ ะผะฐัััะฐะฑะธัะพะฒะฐัั ััะตะฝะธะต ะธ ัะฐััะธัะฝะพ ะทะฐะฟะธัั.

   **ะะธะฝััั:**
  - ะะพะปะตะต ัะปะพะถะฝะฐั ะฝะฐัััะพะนะบะฐ ะธ ะฟะพะดะดะตัะถะบะฐ.
  - ะะพะฝัะธััะตะฝัะฝะพััั ะดะฐะฝะฝัั ัะปะพะถะฝะตะต ะพะฑะตัะฟะตัะธัั.

### ะงะฐััะพ ะธัะฟะพะปัะทัะตะผัะต ะฟะพะดัะพะดั ะฒ ะฟัะพะดะฐะบัะตะฝะต:
1. ะะปั **OLTP-ัะธััะตะผ**: ะฒะตััะธะบะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะธ read replicas.
2. ะะปั **OLAP-ัะธััะตะผ**: ัะฐัะดะธัะพะฒะฐะฝะธะต, ัะฐัะฟัะตะดะตะปัะฝะฝัะต ะฑะฐะทั (ะฝะฐะฟัะธะผะตั, Citus, Greenplum).  

## 22. ะงัะพ ัะฐะบะพะต ัะฐัะดะธัะพะฒะฐะฝะธะต?

ะจะฐัะดะธัะพะฒะฐะฝะธะต โ ะผะตัะพะด **ะณะพัะธะทะพะฝัะฐะปัะฝะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั**, ะฟัะธ ะบะพัะพัะพะผ ะฑะฐะทะฐ ะดะฐะฝะฝัั ะดะตะปะธััั ะฝะฐ ะฝะตัะบะพะปัะบะพ ัะฐััะตะน (**ัะฐัะดะพะฒ**). ะะฐะถะดัะน ัะฐัะด ััะฐะฝะธััั ะฝะฐ ะพัะดะตะปัะฝะพะผ ัะตัะฒะตัะต ะธะปะธ ัะบะทะตะผะฟะปััะต PostgreSQL.

### ะะฐะบ ัะฐะฑะพัะฐะตั:
1. ะะฐะฝะฝัะต ัะฐัะฟัะตะดะตะปััััั ะฟะพ ัะฐัะดะฐะผ ะฟะพ ะบะปััั ัะฐัะดะธัะพะฒะฐะฝะธั (ะฝะฐะฟัะธะผะตั, `customer_id`, `region`, ะดะธะฐะฟะฐะทะพะฝ ะดะฐั).
2. ะะฐะถะดัะน ัะฐัะด โ ััะพ ะฟะพะปะฝะพัะตะฝะฝะฐั ะฑะฐะทะฐ PostgreSQL, ัะพะดะตัะถะฐัะฐั ัะพะปัะบะพ ัะฐััั ะดะฐะฝะฝัั.
3. ะะพะณะธะบะฐ ะผะฐัััััะธะทะฐัะธะธ ะทะฐะฟัะพัะพะฒ (ะบะฐะบะพะน ัะฐัะด ะธัะฟะพะปัะทะพะฒะฐัั) ะฝะฐัะพะดะธััั:
  - ะฒ ะฟัะธะปะพะถะตะฝะธะธ,
  - ะฒ ะฟัะพะผะตะถััะพัะฝะพะผ ะะ (middleware),
  - ะธะปะธ ะฒ ัะฐััะธัะตะฝะธะธ PostgreSQL (ะฝะฐะฟัะธะผะตั, **Citus**).

### ะขะธะฟั ัะฐัะดะธัะพะฒะฐะฝะธั:
1. **Range sharding** โ ัะฐะทะดะตะปะตะฝะธะต ะฟะพ ะดะธะฐะฟะฐะทะพะฝะฐะผ ะทะฝะฐัะตะฝะธะน.
2. **Hash sharding** โ ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ััั-ััะฝะบัะธะธ:
  - ะพะฑะตัะฟะตัะธะฒะฐะตั ัะฐะฒะฝะพะผะตัะฝะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต ะดะฐะฝะฝัั ะฟะพ ัะฐัะดะฐะผ;
  - ะฟัะตะดะพัะฒัะฐัะฐะตั ยซะณะพัััะธะต ัะทะปัยป (ะฝะฐะฟัะธะผะตั, ะดะปั ะบะปััะตะน `user_id`).
  - ะะฑัะฐั ััะตะผะฐ:
    1. ะัะฑะธัะฐะตะผ ะบะปัั ัะฐัะดะธัะพะฒะฐะฝะธั (`user_id`, `order_id`, `region_id`).
    2. ะกัะธัะฐะตะผ ััั (ะฝะฐะฟัะธะผะตั, MD5, SHA-1).
    3. ะัะตะพะฑัะฐะทัะตะผ hex-ัััะพะบั ัััะฐ ะฒ ัะธัะปะพ.
    4. ะะตััะผ ะพััะฐัะพะบ ะพั ะดะตะปะตะฝะธั ะฝะฐ ะบะพะปะธัะตััะฒะพ ัะฐัะดะพะฒ (`% N`).
    5. ะะพะปััะฐะตะผ ะฝะพะผะตั ัะฐัะดะฐ.
3. **Directory-based sharding** โ ะพัะดะตะปัะฝะฐั ัะฐะฑะปะธัะฐ-ัะปะพะฒะฐัั ััะฐะฝะธั ัะพะพัะฒะตัััะฒะธะต ะบะปััะฐ ะธ ัะฐัะดะฐ.

### ะะปััั:
1. ะะพััะธ ะฝะตะพะณัะฐะฝะธัะตะฝะฝัะน ัะพัั ะดะฐะฝะฝัั.
2. ะะพะทะผะพะถะฝะพััั ะฟะฐัะฐะปะปะตะปัะฝะพะน ะพะฑัะฐะฑะพัะบะธ ะทะฐะฟัะพัะพะฒ ะฝะฐ ัะฐะทะฝัั ัะฐัะดะฐั.
3. ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฝะฐะณััะทะบะธ.

### ะะธะฝััั:
1. ะกะปะพะถะฝัะต ะทะฐะฟัะพัั, ะพัะฒะฐััะฒะฐััะธะต ะฝะตัะบะพะปัะบะพ ัะฐัะดะพะฒ.
2. ะกะปะพะถะฝะพััะธ ะฒ ััะฐะฝะทะฐะบัะธัั ะผะตะถะดั ัะฐัะดะฐะผะธ.
3. ะะพะปะตะต ัะปะพะถะฝะฐั ะธะฝััะฐััััะบัััะฐ ะธ ะฟะพะดะดะตัะถะบะฐ.  

## 23. ะงัะพ ัะฐะบะพะต ัะตะฟะปะธะบะฐัะธั?

ะะตะฟะปะธะบะฐัะธั โ ััะพ ะฟัะพัะตัั **ะบะพะฟะธัะพะฒะฐะฝะธั ะดะฐะฝะฝัั** ั ะพัะฝะพะฒะฝะพะณะพ ัะตัะฒะตัะฐ (**primary**) ะฝะฐ ะพะดะธะฝ ะธะปะธ ะฝะตัะบะพะปัะบะพ ัะตะทะตัะฒะฝัั ัะตัะฒะตัะพะฒ (**standby**) ะดะปั ะฟะพะฒััะตะฝะธั ะดะพัััะฟะฝะพััะธ, ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะธ ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ.

### ะะพัะพะบะพะฒะฐั ัะตะฟะปะธะบะฐัะธั (Streaming Replication)
- ะัะฟะพะปัะทัะตั **WAL (Write-Ahead Log)** ะดะปั ะฟะตัะตะดะฐัะธ ะธะทะผะตะฝะตะฝะธะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ.
- ะัะฒะฐะตั:
  1. **ะัะธะฝััะพะฝะฝะฐั** โ primary ะฝะต ะถะดัั ะพัะฒะตัะฐ standby.
    - ะะปัั: ะฑััััะตะต.
    - ะะธะฝัั: ะฒะพะทะผะพะถะฝะฐ ะฝะตะฑะพะปััะฐั ะฟะพัะตัั ะดะฐะฝะฝัั ะฟัะธ ัะฑะพะต.
  2. **ะกะธะฝััะพะฝะฝะฐั** โ primary ะถะดัั ะฟะพะดัะฒะตัะถะดะตะฝะธั standby.
    - ะะปัั: ะฝะตั ะฟะพัะตัะธ ะดะฐะฝะฝัั.
    - ะะธะฝัั: ะฒััะต ะทะฐะดะตัะถะบะฐ.

### ะะพะณะธัะตัะบะฐั ัะตะฟะปะธะบะฐัะธั (Logical Replication)
1. ะะตัะตะดะฐัั ะธะทะผะตะฝะตะฝะธั ะฝะฐ ััะพะฒะฝะต ัััะพะบ ะธ ัะฐะฑะปะธั.
2. ะะพะถะฝะพ ัะตะฟะปะธัะธัะพะฒะฐัั ัะพะปัะบะพ **ะพะฟัะตะดะตะปัะฝะฝัะต ัะฐะฑะปะธัั**.
3. ะะพะดัะพะดะธั ะดะปั ะธะฝัะตะณัะฐัะธะธ ั ะดััะณะธะผะธ ัะธััะตะผะฐะผะธ ะธะปะธ ัะฐััะธัะฝะพะณะพ ะบะพะฟะธัะพะฒะฐะฝะธั ะดะฐะฝะฝัั.

### ะะฐัะบะฐะดะฝะฐั ัะตะฟะปะธะบะฐัะธั (Cascading Replication)
- ะะตะฟะปะธะบะฐ ะผะพะถะตั ัะฐะผะฐ ะฑััั ะธััะพัะฝะธะบะพะผ ะดะฐะฝะฝัั ะดะปั ะดััะณะธั ัะตะฟะปะธะบ.

### ะะปััั:
1. ะััะพะบะฐั ะดะพัััะฟะฝะพััั.
2. ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ััะตะฝะธั (ะทะฐะฟัะพัั ะผะพะถะฝะพ ะฟะตัะตะฝะพัะธัั ะฝะฐ ัะตะฟะปะธะบะธ).
3. ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ.

### ะะธะฝััั:
1. ะะตั ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั ะทะฐะฟะธัะธ (ัะตะฟะปะธะบะธ โ ัะพะปัะบะพ ะดะปั ััะตะฝะธั).
2. ะ ัะธะฝััะพะฝะฝะพะน ัะตะฟะปะธะบะฐัะธะธ โ ะฒััะต ะทะฐะดะตัะถะบะธ.
3. ะ ะฐัะธะฝััะพะฝะฝะพะน ัะตะฟะปะธะบะฐัะธะธ โ ัะธัะบ ะฟะพัะตัะธ ะฟะพัะปะตะดะฝะธั ััะฐะฝะทะฐะบัะธะน.

## 24. ะงัะพ ัะฐะบะพะต ะฟะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต ะฒ SQL?

ะะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต โ ััะพ ัะฐะทะฑะธะตะฝะธะต ะพะดะฝะพะน ะฑะพะปััะพะน ัะฐะฑะปะธัั ะฝะฐ ะฑะพะปะตะต ะผะตะปะบะธะต **ะฟะฐััะธัะธะธ** ะฒ ัะฐะผะบะฐั **ะพะดะฝะพะน ะฑะฐะทั ะดะฐะฝะฝัั ะธ ะพะดะฝะพะณะพ ัะตัะฒะตัะฐ**.  
ะะปั ะฟะพะปัะทะพะฒะฐัะตะปั ััะพ ะฒัะณะปัะดะธั ะบะฐะบ ะพะดะฝะฐ ะปะพะณะธัะตัะบะฐั ัะฐะฑะปะธัะฐ, ะฝะพ ัะธะทะธัะตัะบะธ โ ััะพ ะฝะฐะฑะพั ะพัะดะตะปัะฝัั ัะฐะฑะปะธั.

### ะขะธะฟั ะฟะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธั ะฒ PostgreSQL:
1. **Range** โ ัะฐะทะดะตะปะตะฝะธะต ะฟะพ ะดะธะฐะฟะฐะทะพะฝะฐะผ ะทะฝะฐัะตะฝะธะน (ะฝะฐะฟัะธะผะตั, ะฟะพ ะดะฐัะฐะผ).
2. **List** โ ัะฐะทะดะตะปะตะฝะธะต ะฟะพ ัะฟะธัะบะฐะผ ะทะฝะฐัะตะฝะธะน (ะฝะฐะฟัะธะผะตั, ะฟะพ ัะตะณะธะพะฝะฐะผ).
3. **Hash** โ ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ััั-ััะฝะบัะธะธ.

### ะะปััั:
1. ะะพะฒััะตะฝะธะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะทะฐ ัััั **partition pruning** (ัะธัะฐะตััั ัะพะปัะบะพ ะฝัะถะฝะฐั ะฟะฐััะธัะธั).
2. ะฃะดะพะฑััะฒะพ ะพะฑัะปัะถะธะฒะฐะฝะธั (ะผะพะถะฝะพ ัะดะฐะปััั ะธะปะธ ะฐััะธะฒะธัะพะฒะฐัั ััะฐััะต ะฟะฐััะธัะธะธ).
3. ะะพะดัะพะดะธั ะดะปั ัะฐะฑะพัั ั ะฑะพะปััะธะผะธ ัะฐะฑะปะธัะฐะผะธ ะธ ะฒัะตะผะตะฝะฝัะผะธ ััะดะฐะผะธ.

### ะะธะฝััั:
1. ะัะต ะฟะฐััะธัะธะธ ััะฐะฝัััั ะฝะฐ **ะพะดะฝะพะผ ัะตัะฒะตัะต** โ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะพะณัะฐะฝะธัะตะฝะพ ะตะณะพ ัะตััััะฐะผะธ.
2. ะะฐัััะพะนะบะฐ ะธ ะฟะพะดะดะตัะถะบะฐ ะผะพะณัั ะฑััั ัะปะพะถะฝะตะต, ัะตะผ ั ะพะฑััะฝัั ัะฐะฑะปะธั.

### ะะปััะตะฒะพะต ะพัะปะธัะธะต ะพั ะดััะณะธั ะฟะพะดัะพะดะพะฒ:
1. **ะจะฐัะดะธัะพะฒะฐะฝะธะต** โ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ยซะฒัะธััยป (ะดะฐะฝะฝัะต ะฝะฐ ัะฐะทะฝัั ัะตัะฒะตัะฐั).
2. **ะะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต** โ ะพะฟัะธะผะธะทะฐัะธั ะฒะฝัััะธ ะพะดะฝะพะณะพ ัะตัะฒะตัะฐ.
3. **ะะตะฟะปะธะบะฐัะธั** โ ะดัะฑะปะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝัั ะดะปั ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ ะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั ััะตะฝะธั.  

## 25. ะงัะพ ัะฐะบะพะต ััะธะณะณะตั?

ะขัะธะณะณะตั โ ััะพ ะพะฑัะตะบั ะฑะฐะทั ะดะฐะฝะฝัั, ะบะพัะพััะน ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒัะฟะพะปะฝัะตั ะทะฐะดะฐะฝะฝัะน ะฑะปะพะบ ะบะพะดะฐ (ะพะฑััะฝะพ ะฝะฐ ัะทัะบะต PL/pgSQL) **ะฟัะธ ะฝะฐัััะฟะปะตะฝะธะธ ะพะฟัะตะดะตะปัะฝะฝะพะณะพ ัะพะฑััะธั** ะฒ ัะฐะฑะปะธัะต ะธะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธะธ.  
ะะฝ ยซััะฐะฑะฐััะฒะฐะตัยป ะฑะตะท ัะฒะฝะพะณะพ ะฒัะทะพะฒะฐ ะธะท ะฟัะธะปะพะถะตะฝะธั โ ะฟัะธ ะฒััะฐะฒะบะต, ะพะฑะฝะพะฒะปะตะฝะธะธ, ัะดะฐะปะตะฝะธะธ ะธะปะธ ะดััะณะธั ัะพะฑััะธัั.

### ะะธะดั ััะธะณะณะตัะพะฒ ะฟะพ ะผะพะผะตะฝัั ะฒัะฟะพะปะฝะตะฝะธั:
1. **BEFORE** โ ะดะพ ะฒัะฟะพะปะฝะตะฝะธั ะพะฟะตัะฐัะธะธ (ะผะพะถะฝะพ ะธะทะผะตะฝะธัั ะดะฐะฝะฝัะต ะธะปะธ ะพัะผะตะฝะธัั ะดะตะนััะฒะธะต).
2. **AFTER** โ ะฟะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั ะพะฟะตัะฐัะธะธ (ะผะพะถะฝะพ ะทะฐะฟะธัะฐัั ะฒ ะถััะฝะฐะป, ะพะฑะฝะพะฒะธัั ะดััะณะธะต ัะฐะฑะปะธัั).
3. **INSTEAD OF** โ ะธัะฟะพะปัะทัะตััั ะดะปั ะฟัะตะดััะฐะฒะปะตะฝะธะน, ะทะฐะผะตะฝัั ะพะฟะตัะฐัะธั ะฝะฐ ัะฒะพั.

### ะขะธะฟั ัะพะฑััะธะน ะดะปั ััะธะณะณะตัะพะฒ:
- **INSERT** โ ะฒััะฐะฒะบะฐ ัััะพะบะธ.
- **UPDATE** โ ะธะทะผะตะฝะตะฝะธะต ัััะพะบะธ.
- **DELETE** โ ัะดะฐะปะตะฝะธะต ัััะพะบะธ.
- **TRUNCATE** โ ะพัะธััะบะฐ ัะฐะฑะปะธัั.

### ะัะธะผะตั ะฒ PostgreSQL
```sql
โ ะคัะฝะบัะธั, ะบะพัะพััั ะฑัะดะตั ะฒัะทัะฒะฐัั ััะธะณะณะตั
CREATE OR REPLACE FUNCTION log_update()
RETURNS trigger AS $$
BEGIN
  INSERT INTO audit_log(table_name, operation, changed_at)
  VALUES (TG_TABLE_NAME, TG_OP, NOW());
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

โ ะกะพะทะดะฐัะผ ััะธะณะณะตั
CREATE TRIGGER trg_log_update
AFTER UPDATE ON employees
FOR EACH ROW
EXECUTE FUNCTION log_update();
```

ะ ััะพะผ ะฟัะธะผะตัะต:
- **TG_TABLE_NAME** โ ัะธััะตะผะฝะฐั ะฟะตัะตะผะตะฝะฝะฐั ั ะธะผะตะฝะตะผ ัะฐะฑะปะธัั.
- **TG_OP** โ ัะธะฟ ะพะฟะตัะฐัะธะธ (INSERT, UPDATE, DELETE).

### ะะปััั ััะธะณะณะตัะพะฒ:
1. ะะฒัะพะผะฐัะธะทะฐัะธั ะทะฐะดะฐั (ะปะพะณะธัะพะฒะฐะฝะธะต, ะฒะฐะปะธะดะฐัะธั, ะบะฐัะบะฐะดะฝัะต ะธะทะผะตะฝะตะฝะธั).
2. ะฆะตะฝััะฐะปะธะทะฐัะธั ะปะพะณะธะบะธ ะฝะฐ ััะพะฒะฝะต ะะ.
3. ะะฐัะฐะฝัะธั, ััะพ ะฟัะฐะฒะธะปะพ ะฒัะฟะพะปะฝะธััั ะฝะตะทะฐะฒะธัะธะผะพ ะพั ะฟัะธะปะพะถะตะฝะธั.

### ะะธะฝััั ััะธะณะณะตัะพะฒ:
1. ะกะบัััะฐั ะปะพะณะธะบะฐ (ัััะดะฝะตะต ะพัะปะฐะถะธะฒะฐัั).
2. ะะพะถะตั ะทะฐะผะตะดะปััั ะพะฟะตัะฐัะธะธ ะฟัะธ ัะปะพะถะฝะพะน ะปะพะณะธะบะต.
3. ะะธัะบ ัะตะบัััะธะฒะฝะพะณะพ ะฒัะทะพะฒะฐ ััะธะณะณะตัะพะฒ.  

## 26. ะ ัะตะผ ัะฐะทะฝะธัะฐ ะผะตะถะดั ััะธะณะณะตัะพะผ ะธ ะฟัะพัะตะดััะพะน/ััะฝะบัะธะตะน?

### ะคัะฝะบัะธั ะธะปะธ ะฟัะพัะตะดััะฐ
- **ะคัะฝะบัะธั (FUNCTION)** โ ะพะฑัะตะบั, ะบะพัะพััะน ะฒัะฟะพะปะฝัะตั ะบะพะด ะธ ะฒะพะทะฒัะฐัะฐะตั ะทะฝะฐัะตะฝะธะต.
  - ะะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั ะฒ ะทะฐะฟัะพัะฐั, ะฒััะฐะถะตะฝะธัั, ะดััะณะธั ััะฝะบัะธัั.
  - ะ PostgreSQL ะผะพะถะตั ะฒะพะทะฒัะฐัะฐัั ะฟัะพััะพะต ะทะฝะฐัะตะฝะธะต ะธะปะธ ัะฐะฑะปะธัั (`RETURNS TABLE`).
  - ะัะทัะฒะฐะตััั ัะฒะฝะพ:
    ```
    SELECT my_function(123);
    ```
- **ะัะพัะตะดััะฐ (PROCEDURE)** โ ะฟะพัะฒะธะปะฐัั ะฒ PostgreSQL 11.
  - ะะต ะพะฑัะทะฐะฝะฐ ะฒะพะทะฒัะฐัะฐัั ะทะฝะฐัะตะฝะธะต.
  - ะะพะถะตั ะฒัะฟะพะปะฝััั ััะฐะฝะทะฐะบัะธะพะฝะฝัะต ะบะพะผะฐะฝะดั (`COMMIT`, `ROLLBACK`).
  - ะัะทัะฒะฐะตััั ะบะพะผะฐะฝะดะพะน:
    ```
    CALL my_procedure(123);
    ```

### ะขัะธะณะณะตั
  **ะขัะธะณะณะตั (TRIGGER)** โ ะพะฑัะตะบั, ะบะพัะพััะน **ะฝะต ะฒัะทัะฒะฐะตััั ัะฒะฝะพ**, ะฐ ะฒัะฟะพะปะฝัะตััั **ะฐะฒัะพะผะฐัะธัะตัะบะธ** ะฟัะธ ะฝะฐัััะฟะปะตะฝะธะธ ะพะฟัะตะดะตะปัะฝะฝะพะณะพ ัะพะฑััะธั (`INSERT`, `UPDATE`, `DELETE`, `TRUNCATE`).
  ะกะฐะผ ััะธะณะณะตั ะบะพะดะฐ ะฝะต ัะพะดะตัะถะธั, ะฐ **ัััะปะฐะตััั ะฝะฐ ััะฝะบัะธั**, ะบะพัะพัะฐั ะฒัะฟะพะปะฝัะตััั ะฟัะธ ััะฐะฑะฐััะฒะฐะฝะธะธ.
  ะ PostgreSQL ััะธะณะณะตัะฝะฐั ััะฝะบัะธั ะดะพะปะถะฝะฐ ะฒะพะทะฒัะฐัะฐัั `NEW` ะธะปะธ `OLD` (ะดะปั BEFORE-ััะธะณะณะตัะพะฒ), ะปะธะฑะพ `NULL` (ะตัะปะธ ะพะฟะตัะฐัะธั ะดะพะปะถะฝะฐ ะฑััั ะพัะผะตะฝะตะฝะฐ).


### ะะปััะตะฒัะต ะพัะปะธัะธั

| ะฅะฐัะฐะบัะตัะธััะธะบะฐ     | ะคัะฝะบัะธั / ะัะพัะตะดััะฐ                           | ะขัะธะณะณะตั                                       |
|--------------------|-----------------------------------------------|-----------------------------------------------|
| **ะะฐะบ ะฒัะทัะฒะฐะตััั** | ะฏะฒะฝะพ (`SELECT` ะธะปะธ `CALL`)                   | ะะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ัะพะฑััะธะธ                     |
| **ะะพะทะฒัะฐั ะทะฝะฐัะตะฝะธั** | ะคัะฝะบัะธั โ ะดะฐ, ะฟัะพัะตะดััะฐ โ ะฝะตั               | ะะฐะฒะธัะธั ะพั ัะธะฟะฐ (`NEW` / `OLD`)               |
| **ะัะธะฒัะทะบะฐ**       | ะะต ะฟัะธะฒัะทะฐะฝั ะบ ัะฐะฑะปะธัะต                       | ะัะธะฒัะทะฐะฝั ะบ ะบะพะฝะบัะตัะฝะพะน ัะฐะฑะปะธัะต ะธะปะธ `VIEW`     |
| **ะัะฟะพะปัะทะพะฒะฐะฝะธะต**  | ะััะธัะปะตะฝะธั, ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ, ะพะฟะตัะฐัะธะธ ั ะดะฐะฝะฝัะผะธ | ะะพะณะธัะพะฒะฐะฝะธะต, ะฒะฐะปะธะดะฐัะธั, ะบะฐัะบะฐะดะฝัะต ะธะทะผะตะฝะตะฝะธั   |
| **ะะธะดะธะผะพััั ะปะพะณะธะบะธ** | ะัะตะฒะธะดะฝะฐ ะฒ ะบะพะดะต ะฟัะธะปะพะถะตะฝะธั                  | ะะพะถะตั ะฑััั ัะบัััะฐ ะฒะฝัััะธ ะะ                   |

## 27. ะงัะพ ัะฐะบะพะต ะฟัะตะดััะฐะฒะปะตะฝะธั (views) ะธ ะบะฐะบะพะฒั ะธั ะฟัะตะธะผััะตััะฒะฐ? ะะฐะบ ะพะฝะธ ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัััั ะฒ ะบะพะฝัะตะบััะต OLAP-ัะธััะตะผ?

**View** ะฒ SQL โ ััะพ ะฒะธัััะฐะปัะฝะฐั ัะฐะฑะปะธัะฐ, ะพัะฝะพะฒะฐะฝะฝะฐั ะฝะฐ ัะตะทัะปััะฐัะต ะทะฐัะฐะฝะตะต ะพะฟัะตะดะตะปัะฝะฝะพะณะพ ะทะฐะฟัะพัะฐ.
  ะะฐะฝะฝัะต ะฒ view ะฝะต ััะฐะฝัััั (ะบัะพะผะต **ะผะฐัะตัะธะฐะปะธะทะพะฒะฐะฝะฝัั ะฟัะตะดััะฐะฒะปะตะฝะธะน**, ะณะดะต ะดะฐะฝะฝัะต ัะพััะฐะฝััััั).
  ะัะตะดััะฐะฒะปะตะฝะธั ะผะพะณัั ะพะฑัะตะดะธะฝััั ัะฐะฑะปะธัั, ัะธะปัััะพะฒะฐัั ัััะพะบะธ ะธ ะฒัะดะฐะฒะฐัั ะฐะณัะตะณะธัะพะฒะฐะฝะฝัะต ัะตะทัะปััะฐัั.

### ะัะตะธะผััะตััะฒะฐ ะฟัะตะดััะฐะฒะปะตะฝะธะน
1. **Simplification** โ ัะฟัะพัะฐัั ัะฐะฑะพัั, ัะบััะฒะฐั ัะปะพะถะฝัะต ะทะฐะฟัะพัั ะทะฐ ะพะดะฝะธะผ ะพะฑัะตะบัะพะผ.
2. **Security** โ ะผะพะถะฝะพ ะฒัะดะฐะฒะฐัั ะดะพัััะฟ ัะพะปัะบะพ ะบ ะฝัะถะฝัะผ ะบะพะปะพะฝะบะฐะผ/ัััะพะบะฐะผ ะฑะตะท ัะฐัะบัััะธั ะฒัะตะน ัะฐะฑะปะธัั.
3. **Reusability** โ ะฑะธะทะฝะตั-ะปะพะณะธะบั ะผะพะถะฝะพ ะฟะตัะตะธัะฟะพะปัะทะพะฒะฐัั ะฒ ัะฐะทะฝัั ะฟัะธะปะพะถะตะฝะธัั.
4. **Abstraction** โ ัะบััะฒะฐัั ะฟัะธะปะพะถะตะฝะธั ะพั ะธะทะผะตะฝะตะฝะธะน ะฒ ััะตะผะต ะฑะฐะทั ะดะฐะฝะฝัั.
5. **Aggregation** โ ะฟะพะทะฒะพะปััั ัะพะทะดะฐะฒะฐัั ะทะฐัะฐะฝะตะต ะฐะณัะตะณะธัะพะฒะฐะฝะฝัะต ัะตะทัะปััะฐัั ะดะปั ะฐะฝะฐะปะธัะธะบะธ.

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒ OLAP-ัะธััะตะผะฐั
1. ะัะตะดััะฐะฒะปะตะฝะธะต ะฐะณัะตะณะธัะพะฒะฐะฝะฝัั ะฟะพะบะฐะทะฐัะตะปะตะน (ะฝะฐะฟัะธะผะตั, ะฟัะพะดะฐะถะธ ะฟะพ ัะตะณะธะพะฝะฐะผ ะธ ะผะตัััะฐะผ).
2. ะะฐะฑะพัะฐ ะฒ ะบะฐัะตััะฒะต **ัะตะผะฐะฝัะธัะตัะบะพะณะพ ัะปะพั** ะผะตะถะดั ััะฐะฝะธะปะธัะตะผ ะดะฐะฝะฝัั ะธ BI-ะธะฝััััะผะตะฝัะฐะผะธ.
3. ะัะฟะพะปัะทะพะฒะฐะฝะธะต **ะผะฐัะตัะธะฐะปะธะทะพะฒะฐะฝะฝัั ะฟัะตะดััะฐะฒะปะตะฝะธะน** ะดะปั ััะฐะฝะตะฝะธั ะฟัะตะดะฐะณัะตะณะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั ะธ ััะบะพัะตะฝะธั ะพััััะพะฒ.
4. ะฃะฟัะพัะตะฝะธะต ะผะฝะพะณะพะผะตัะฝัั ะทะฐะฟัะพัะพะฒ (ะธะฝะบะฐะฟััะปััะธั ัะปะพะถะฝัั `JOIN` ะธ ัะธะปัััะพะฒ).

### ะัะธะผะตั
```sql
  CREATE VIEW sales_summary AS
  SELECT region, date_trunc(โmonthโ, sale_date) AS month, SUM(amount) AS total_sales
  FROM sales
  GROUP BY region, date_trunc(โmonthโ, sale_date);
```
> ะขะฐะบะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ะผะพะถะฝะพ ะฝะฐะฟััะผัั ะธัะฟะพะปัะทะพะฒะฐัั ะฒ BI-ะธะฝััััะผะตะฝัะต ะดะปั ะฟะพะปััะตะฝะธั ะตะถะตะผะตัััะฝัั ัะฒะพะดะฝัั ะดะฐะฝะฝัั ะฑะตะท ะฟะพะฒัะพัะฝะพะณะพ ะฟะตัะตััััะฐ ะฐะณัะตะณะฐัะพะฒ.  

## 28. ะงัะพ ัะฐะบะพะต ััะบะฐะปะฐัะธั ะฑะปะพะบะธัะพะฒะพะบ (lock escalation)?

ะญัะบะฐะปะฐัะธั ะฑะปะพะบะธัะพะฒะพะบ โ ััะพ ะฟัะพัะตัั, ะฟัะธ ะบะพัะพัะพะผ ะกะฃะะ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะผะตะฝัะตั ะผะฝะพะถะตััะฒะพ ะผะตะปะบะธั ะฑะปะพะบะธัะพะฒะพะบ ะฝะฐ ะพะดะฝั ะฑะพะปะตะต ะบััะฟะฝัั.

### ะะฐัะตะผ ััะพ ะดะตะปะฐะตััั:
1. ะงัะพะฑั ัะพะบัะฐัะธัั ัะตััััั, ะทะฐััะฐัะธะฒะฐะตะผัะต ะฝะฐ ัะฟัะฐะฒะปะตะฝะธะต ะฑะปะพะบะธัะพะฒะบะฐะผะธ.
2. ะงัะพะฑั ะธะทะฑะตะถะฐัั ะฟัะตะฒััะตะฝะธั ะปะธะผะธัะฐ ะฝะฐ ะบะพะปะธัะตััะฒะพ ะฑะปะพะบะธัะพะฒะพะบ.

### ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:
- ะัะปะธ ััะฐะฝะทะฐะบัะธั ะฑะปะพะบะธััะตั ัะปะธัะบะพะผ ะผะฝะพะณะพ ัััะพะบ ะธะปะธ ัััะฐะฝะธั, ะกะฃะะ ะผะพะถะตั ยซะฟะพะฒััะธััยป ััะพะฒะตะฝั ะฑะปะพะบะธัะพะฒะบะธ:
  - ะฒะผะตััะพ ะผะฝะพะถะตััะฒะฐ **row-level locks** (ััะพะฒะตะฝั ัััะพะบ) โ ะพะดะฝะฐ **table-level lock** (ััะพะฒะตะฝั ัะฐะฑะปะธัั).

**ะะตะทัะปััะฐั:**
1. ะกะฃะะ ัะฟัะฐะฒะปัะตั ะผะตะฝััะธะผ ะบะพะปะธัะตััะฒะพะผ ะฑะปะพะบะธัะพะฒะพะบ โ ะผะตะฝััะต ะทะฐััะฐั ะฟะฐะผััะธ ะธ CPU.
2. ะะพ ัะฝะธะถะฐะตััั ะฟะฐัะฐะปะปะตะปะธะทะผ โ ะดััะณะธะต ััะฐะฝะทะฐะบัะธะธ ะฝะต ัะผะพะณัั ัะฐะฑะพัะฐัั ั ัะฐะฑะปะธัะตะน.

### ะญัะบะฐะปะฐัะธั ะฑะปะพะบะธัะพะฒะพะบ ะฒ PostgreSQL
- ะ PostgreSQL **ะฐะฒัะพะผะฐัะธัะตัะบะพะน** ััะบะฐะปะฐัะธะธ ะฑะปะพะบะธัะพะฒะพะบ **ะฝะตั** (ะฒ ะพัะปะธัะธะต ะพั, ะฝะฐะฟัะธะผะตั, MS SQL Server).
- ะะดะฝะฐะบะพ ะฐะฝะฐะปะพะณะธัะฝัะน ัััะตะบั ะผะพะถะตั ะฒะพะทะฝะธะบะฝััั, ะตัะปะธ ะฒัััะฝัั ะฒะทััั ะฑะปะพะบะธัะพะฒะบั ะฑะพะปะตะต ะฒััะพะบะพะณะพ ััะพะฒะฝั:
```sql
    LOCK TABLE employees IN EXCLUSIVE MODE;
```
- ะขะฐะบะถะต ะฟัะธ ะดะพะปะณะธั ััะฐะฝะทะฐะบัะธัั ั ะผะฝะพะถะตััะฒะพะผ ะพะฑะฝะพะฒะปะตะฝะธะน ะผะพะถะตั ะฒะพะทะฝะธะบะฝััั ะบะพะฝะบััะตะฝัะธั ะทะฐ ะดะพัััะฟ โ ะดััะณะธะต ัะตััะธะธ ะฑัะดัั ะถะดะฐัั.

### ะ ะดััะณะธั ะกะฃะะ
1. **SQL Server** โ lock escalation ะผะพะถะตั ะฟัะพะธััะพะดะธัั ั ััะพะฒะฝั row/page ะดะพ table.
2. **Oracle** โ ะฑะพะปะตะต ะณะธะฑะบะฐั ัััะฐัะตะณะธั, ััะบะฐะปะฐัะธั ะฝะต ะฒัะตะณะดะฐ ะฐะฒัะพะผะฐัะธัะตัะบะฐั.
3. ะัะฝะพะฒะฝะฐั ะฟัะธัะธะฝะฐ โ ะพะฟัะธะผะธะทะฐัะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฟะฐะผััะธ ะฒ lock manager.

### ะะปััั:
1. ะะตะฝััะต ะฝะฐะบะปะฐะดะฝัั ัะฐััะพะดะพะฒ ะฝะฐ ัะฟัะฐะฒะปะตะฝะธะต ะฑะปะพะบะธัะพะฒะบะฐะผะธ.
2. ะกะฝะธะถะตะฝะธะต ะฝะฐะณััะทะบะธ ะฝะฐ lock manager.

### ะะธะฝััั:
1. ะะตะทะบะพะต ะฟะฐะดะตะฝะธะต ะฟะฐัะฐะปะปะตะปะธะทะผะฐ.
2. ะะธัะบ ะฑะปะพะบะธัะพะฒะบะธ ะฒัะตะน ัะฐะฑะปะธัั ะธะท-ะทะฐ ะพะดะฝะพะน ััะฐะฝะทะฐะบัะธะธ.

## 29. ะงัะพ ัะฐะบะพะต ะพะณัะฐะฝะธัะตะฝะธั (constraints) ะฒ SQL?

Constraint โ ััะพ ะฟัะฐะฒะธะปะพ ะฝะฐ ััะพะฒะฝะต ะฑะฐะทั ะดะฐะฝะฝัั, ะบะพัะพัะพะต **ะพะณัะฐะฝะธัะธะฒะฐะตั ะดะพะฟัััะธะผัะต ะทะฝะฐัะตะฝะธั ะฒ ะบะพะปะพะฝะบะฐั ะธะปะธ ัะฐะฑะปะธัะฐั**, ััะพะฑั ะณะฐัะฐะฝัะธัะพะฒะฐัั ัะตะปะพััะฝะพััั ะธ ะบะพััะตะบัะฝะพััั ะดะฐะฝะฝัั.

### ะัะฝะพะฒะฝัะต ัะธะฟั ะพะณัะฐะฝะธัะตะฝะธะน ะฒ SQL:
1. **PRIMARY KEY**
  - ะฃะฝะธะบะฐะปัะฝะพ ะธะดะตะฝัะธัะธัะธััะตั ะบะฐะถะดัั ัััะพะบั.
  - ะะต ะดะพะฟััะบะฐะตั `NULL`.
  - ะะพะถะตั ะฑััั ัะพััะฐะฒะฝัะผ (ะฝะตัะบะพะปัะบะพ ะบะพะปะพะฝะพะบ).

2. **FOREIGN KEY**
  - ะกััะปะฐะตััั ะฝะฐ ะบะปัั ะฒ ะดััะณะพะน ัะฐะฑะปะธัะต.
  - ะะฑะตัะฟะตัะธะฒะฐะตั ัััะปะพัะฝัั ัะตะปะพััะฝะพััั (referential integrity).
  - ะะพะถะฝะพ ะทะฐะดะฐัั ะดะตะนััะฒะธั ะฟัะธ ัะดะฐะปะตะฝะธะธ/ะพะฑะฝะพะฒะปะตะฝะธะธ:
    - `ON DELETE CASCADE`
    - `SET NULL`
    - `RESTRICT`

3. **UNIQUE**
  - ะะฐัะฐะฝัะธััะตั ัะฝะธะบะฐะปัะฝะพััั ะทะฝะฐัะตะฝะธะน ะฒ ะบะพะปะพะฝะบะต (ะธะปะธ ะฝะฐะฑะพัะต ะบะพะปะพะฝะพะบ).
  - ะะพะถะตั ัะพะดะตัะถะฐัั `NULL` (ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะกะฃะะ).

4. **NOT NULL**
  - ะะฐะฟัะตัะฐะตั ััะฐะฝะธัั `NULL` ะฒ ะบะพะปะพะฝะบะต.

5. **CHECK**
  - ะะพะทะฒะพะปัะตั ะทะฐะดะฐัั ะฟัะพะธะทะฒะพะปัะฝะพะต ััะปะพะฒะธะต.  
```sql
    CHECK (salary > 0)
```
6. **EXCLUDE** (ัะฟะตัะธัะธัะฝะพ ะดะปั PostgreSQL)
- ะะฐะฟัะตัะฐะตั ะพะดะฝะพะฒัะตะผะตะฝะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต ะพะฟัะตะดะตะปัะฝะฝะพะณะพ ััะปะพะฒะธั ะดะปั ัะฐะทะฝัั ัััะพะบ.
- ะะพะปะตะทะฝะพ ะดะปั ะณะตะพะดะฐะฝะฝัั ะธ ะฒัะตะผะตะฝะฝัั ะธะฝัะตัะฒะฐะปะพะฒ.

### ะัะตะธะผััะตััะฒะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั constraints:
1. ะะฐัะฐะฝัะธั ะบะฐัะตััะฒะฐ ะดะฐะฝะฝัั โ ะดะฐะถะต ะฟัะธ ะพัะธะฑะบะฐั ะฒ ะฟัะธะปะพะถะตะฝะธะธ.
2. ะฆะตะปะพััะฝะพััั ะดะฐะฝะฝัั ะฝะฐ ััะพะฒะฝะต ะะ.
3. ะฃะฟัะพัะตะฝะธะต ะปะพะณะธะบะธ โ ัะฐััั ะฟัะพะฒะตัะพะบ ะฟะตัะตะฝะพัะธััั ั ะบะพะดะฐ ะฟัะธะปะพะถะตะฝะธั ะฒ ะฑะฐะทั.

### ะะตะดะพััะฐัะบะธ:
1. ะงัะตะทะผะตัะฝะพะต ะบะพะปะธัะตััะฒะพ ัะปะพะถะฝัั ะพะณัะฐะฝะธัะตะฝะธะน ะผะพะถะตั ะทะฐะผะตะดะปััั ะฒััะฐะฒะบั ะธ ะพะฑะฝะพะฒะปะตะฝะธะต ะดะฐะฝะฝัั.
2. ะะต ะฒัะตะณะดะฐ ะณะธะฑะบะพ ะดะปั ัะปะพะถะฝะพะน ะฑะธะทะฝะตั-ะปะพะณะธะบะธ (ัะฐััั ะฟัะฐะฒะธะป ะฟัะพัะต ัะตะฐะปะธะทะพะฒะฐัั ะฒ ะฟัะธะปะพะถะตะฝะธะธ).  

## 30. ะะฐะบะธะต ะฒะธะดั ะฑะปะพะบะธัะพะฒะพะบ ะฑัะฒะฐัั?

### ะะปะพะบะธัะพะฒะบะธ ะฝะฐ ััะพะฒะฝะต ัััะพะบ (Row-level locks)
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะฟัะตะดะพัะฒัะฐัะฐัั ะพะดะฝะพะฒัะตะผะตะฝะฝะพะต ะธะทะผะตะฝะตะฝะธะต ะพะดะฝะพะน ะธ ัะพะน ะถะต ัััะพะบะธ ะฝะตัะบะพะปัะบะธะผะธ ััะฐะฝะทะฐะบัะธัะผะธ.
- **ะัะธะผะตัั ะบะพะผะฐะฝะด:**
  1. `SELECT ... FOR UPDATE` โ ะฑะปะพะบะธััะตั ะฒัะฑัะฐะฝะฝัะต ัััะพะบะธ ะดะปั ะธะทะผะตะฝะตะฝะธั.
  2. `SELECT ... FOR SHARE` โ ะฑะปะพะบะธััะตั ัััะพะบะธ ะดะปั ััะตะฝะธั ั ะทะฐะฟัะตัะพะผ ะธะทะผะตะฝะตะฝะธั.
- **ะฅะฐัะฐะบัะตัะธััะธะบะธ:**
  - ะะพะทะฒะพะปััั ะฟะฐัะฐะปะปะตะปัะฝัั ัะฐะฑะพัั ั ะดััะณะธะผะธ ัััะพะบะฐะผะธ ะฒ ัะฐะฑะปะธัะต.
  - ะะฐะฟะธัะธ ะฑะปะพะบะธัััััั ัะพะปัะบะพ ะฒ ะผะพะผะตะฝั ะธั ะฒัะฑะพัะฐ.
- **ะะปััั:** ะผะธะฝะธะผะธะทะฐัะธั ะบะพะฝัะปะธะบัะฐ ะผะตะถะดั ััะฐะฝะทะฐะบัะธัะผะธ.
- **ะะธะฝััั:** ะฟัะธ ะผะฐััะพะฒัั ะฑะปะพะบะธัะพะฒะบะฐั ะฒะพะทะผะพะถะฝะฐ ะบะพะฝะบััะตะฝัะธั ะทะฐ ะดะพัััะฟ  
  (ะฒ PostgreSQL ะฝะตั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ััะบะฐะปะฐัะธะธ ะดะพ table-level lock).

### ะะปะพะบะธัะพะฒะบะธ ะฝะฐ ััะพะฒะฝะต ัะฐะฑะปะธัั (Table-level locks)
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะฑะปะพะบะธัััั ะฒัั ัะฐะฑะปะธัั ะธะปะธ ะฝะฐะบะปะฐะดัะฒะฐัั ะพะณัะฐะฝะธัะตะฝะธั ะฝะฐ ะพะฟัะตะดะตะปัะฝะฝัะต ะดะตะนััะฒะธั.
- **ะัะธะผะตัั ะบะพะผะฐะฝะด:**
  1. `LOCK TABLE table_name IN ACCESS EXCLUSIVE MODE;` โ ะฟะพะปะฝะฐั ะฑะปะพะบะธัะพะฒะบะฐ ะดะปั ะปัะฑัั ะพะฟะตัะฐัะธะน.
  2. ะะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธะผะตะฝััััั ะฟัะธ DDL-ะพะฟะตัะฐัะธัั (`ALTER TABLE`, `DROP TABLE`).
- **ะะตะถะธะผั ะฑะปะพะบะธัะพะฒะพะบ:**
  - ะั `ACCESS SHARE` (ะผะธะฝะธะผะฐะปัะฝะพะต ะพะณัะฐะฝะธัะตะฝะธะต, ัะฐะทัะตัะตะฝะพ ัะพะปัะบะพ ัะธัะฐัั).
  - ะะพ `ACCESS EXCLUSIVE` (ะฟะพะปะฝัะน ะทะฐะฟัะตั ะฝะฐ ััะตะฝะธะต/ะทะฐะฟะธัั ะดััะณะธะผะธ ััะฐะฝะทะฐะบัะธัะผะธ).
- **ะะปััั:** ัะฟัะพัะฐะตั ะบะพะฝััะพะปั ัะตะปะพััะฝะพััะธ ะฟัะธ ะผะฐััะพะฒัั ะพะฟะตัะฐัะธัั.
- **ะะธะฝััั:** ะผะพะถะตั ัะตัััะทะฝะพ ัะฝะธะทะธัั ะฟะฐัะฐะปะปะตะปะธะทะผ.

### Advisory Locks (ัะพะฒะตััััะธะต ะฑะปะพะบะธัะพะฒะบะธ)
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะฑะปะพะบะธัะพะฒะบะธ, ัะฟัะฐะฒะปัะตะผัะต ะฒัััะฝัั ะธะท ะฟัะธะปะพะถะตะฝะธั, ะฝะต ะฐะฒัะพะผะฐัะธัะตัะบะธะต ะฒ PostgreSQL.
- **ะัะพะฑะตะฝะฝะพััะธ:**
  1. ะะต ัะฒัะทะฐะฝั ั ะบะพะฝะบัะตัะฝะพะน ัััะพะบะพะน ะธะปะธ ัะฐะฑะปะธัะตะน.
  2. ะะพะณัั ะธัะฟะพะปัะทะพะฒะฐัััั ะดะปั ัะธะฝััะพะฝะธะทะฐัะธะธ ะผะตะถะดั ะฟัะพัะตััะฐะผะธ/ะฟัะธะปะพะถะตะฝะธัะผะธ.
- **ะัะธะผะตัั ะบะพะผะฐะฝะด:**
  1. `pg_advisory_lock(key)` โ ะทะฐัะฒะฐั ะฑะปะพะบะธัะพะฒะบะธ ั ะทะฐะดะฐะฝะฝัะผ ัะธัะปะพะฒัะผ ะบะปััะพะผ.
  2. `pg_try_advisory_lock(key)` โ ะฟะพะฟััะบะฐ ะทะฐัะฒะฐัะธัั ะฑะปะพะบะธัะพะฒะบั ะฑะตะท ะพะถะธะดะฐะฝะธั.
  3. `pg_advisory_unlock(key)` โ ะพัะฒะพะฑะพะถะดะตะฝะธะต ะฑะปะพะบะธัะพะฒะบะธ.
- **ะะปััั:** ะณะธะฑะบะธะน ะบะพะฝััะพะปั ะทะฐ ะปะพะณะธะบะพะน ะฑะปะพะบะธัะพะฒะพะบ, ะฒะพะทะผะพะถะฝะพััั ัััะพะธัั ัะพะฑััะฒะตะฝะฝัะต ะผะตัะฐะฝะธะทะผั ัะธะฝััะพะฝะธะทะฐัะธะธ.
- **ะะธะฝััั:** ัะฐะทัะฐะฑะพััะธะบ ัะฐะผ ะพัะฒะตัะฐะตั ะทะฐ ะทะฐัะฒะฐั ะธ ะพัะฒะพะฑะพะถะดะตะฝะธะต. 

## 31. ะงัะพ ัะฐะบะพะต ะฒะทะฐะธะผะฝะฐั ะฑะปะพะบะธัะพะฒะบะฐ (deadlock)?

Deadlock ะฒะพะทะฝะธะบะฐะตั, ะบะพะณะดะฐ ะดะฒะฐ ะฟัะพัะตััะฐ ะพะถะธะดะฐัั ะดััะณ ะดััะณะฐ, ัะดะตัะถะธะฒะฐั ะฟัะธ ััะพะผ ะฑะปะพะบะธัะพะฒะบะธ, ะฝะตะพะฑัะพะดะธะผัะต ะดะปั ะฟัะพะดะพะปะถะตะฝะธั ัะฐะฑะพัั.  
ะะฐะฟัะธะผะตั:
- ะัะพัะตัั 1 ะทะฐะฑะปะพะบะธัะพะฒะฐะป ัััะพะบั A ะธ ะถะดัั ัััะพะบั B.
- ะัะพัะตัั 2 ะทะฐะฑะปะพะบะธัะพะฒะฐะป ัััะพะบั B ะธ ะถะดัั ัััะพะบั A โ ะะฑะฐ ะฟัะพัะตััะฐ ะฝะต ะผะพะณัั ะฟัะพะดะพะปะถะธัั ะฒัะฟะพะปะฝะตะฝะธะต.

ะ ะะ ััะพ ัะฐััะพ ะฟัะพะธััะพะดะธั ะธะท-ะทะฐ ะฝะตะฟัะฐะฒะธะปัะฝะพะณะพ ะฟะพััะดะบะฐ ะทะฐัะฒะฐัะฐ ะฑะปะพะบะธัะพะฒะพะบ ะธะปะธ ะดะพะปะณะธั ััะฐะฝะทะฐะบัะธะน.  
ะะปะพะบะธัะพะฒะบะธ ัะฝะธะผะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ `COMMIT`/`ROLLBACK` ะธะปะธ ะตัะปะธ ะพะดะธะฝ ะธะท ะฟัะพัะตััะพะฒ ะทะฐะฒะตัััะฝ ะฟัะธะฝัะดะธัะตะปัะฝะพ.

### Deadlock ะฒ PostgreSQL
- PostgreSQL **ัะฐะผ ะพะฑะฝะฐััะถะธะฒะฐะตั** ะฒะทะฐะธะผะฝัะต ะฑะปะพะบะธัะพะฒะบะธ.
- ะงัะพะฑั ะฟัะตะดะพัะฒัะฐัะธัั ะทะฐะฒะธัะฐะฝะธะต:
  1. ะะดะฝะฐ ะธะท ััะฐะฝะทะฐะบัะธะน **ะฟัะตััะฒะฐะตััั**.
  2. ะััะณะฐั ะฟัะพะดะพะปะถะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต.
  3. ะกะพะพะฑัะตะฝะธะต *`deadlock detected`* ะฟะพัะฒะปัะตััั, ะตัะปะธ PostgreSQL ะฝะฐัะพะดะธั ัะธะบะปะธัะตัะบัั ะทะฐะฒะธัะธะผะพััั.

### ะัะฝะพะฒะฝัะต ะฟัะธัะธะฝั deadlock:
1. ะะฐะทะฝัะน ะฟะพััะดะพะบ ะดะพัััะฟะฐ ะบ ัะตััััะฐะผ ะฒ ััะฐะฝะทะฐะบัะธัั.
2. ะะพะปะณะธะต ััะฐะฝะทะฐะบัะธะธ, ัะดะตัะถะธะฒะฐััะธะต ะฑะปะพะบะธัะพะฒะบะธ ัะปะธัะบะพะผ ะดะพะปะณะพ.
3. ะะฐััะพะฒัะต ะพะฑะฝะพะฒะปะตะฝะธั/ัะดะฐะปะตะฝะธั ะฒ ะฝะตัะบะพะปัะบะธั ัะฐะฑะปะธัะฐั ะฑะตะท ัะพะณะปะฐัะพะฒะฐะฝะฝะพะณะพ ะฟะพััะดะบะฐ.

### ะัะพะณ:
Deadlock โ ััะพ ะพัะธะฑะบะฐ ะฟัะพะตะบัะธัะพะฒะฐะฝะธั ะธะปะธ ัะฟัะฐะฒะปะตะฝะธั ััะฐะฝะทะฐะบัะธัะผะธ, ะธ ะตะณะพ ะฝัะถะฝะพ ะฟัะตะดะพัะฒัะฐัะฐัั ั ะฟะพะผะพััั:
- ัะพะณะปะฐัะพะฒะฐะฝะฝะพะณะพ ะฟะพััะดะบะฐ ะฑะปะพะบะธัะพะฒะพะบ;
- ะผะธะฝะธะผะธะทะฐัะธะธ ะฒัะตะผะตะฝะธ ัะดะตัะถะฐะฝะธั ะฑะปะพะบะธัะพะฒะพะบ;
- ัะฐะทะฑะธะตะฝะธั ะดะพะปะณะธั ััะฐะฝะทะฐะบัะธะน ะฝะฐ ะฑะพะปะตะต ะบะพัะพัะบะธะต.  

## 32. ะงัะพ ัะฐะบะพะต ัะพะปะธ (roles)?

ะะพะปะธ โ ััะพ ะธะผะตะฝะพะฒะฐะฝะฝัะต ะณััะฟะฟั ะฟัะธะฒะธะปะตะณะธะน, ะบะพัะพััะต ะผะพะณัั ะฝะฐะทะฝะฐัะฐัััั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะธะปะธ ะดััะณะธะผ ัะพะปัะผ.

### ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ ัะพะปะตะน:
1. ะฃะฟัะฐะฒะปะตะฝะธะต ะดะพัััะฟะพะผ ะบ ะพะฑัะตะบัะฐะผ ะฑะฐะทั ะดะฐะฝะฝัั (ัะฐะฑะปะธัะฐะผ, ััะตะผะฐะผ, ััะฝะบัะธัะผ).
2. ะฆะตะฝััะฐะปะธะทะฐัะธั ะฟัะฐะฒ ะดะพัััะฟะฐ: ะฒะผะตััะพ ะฝะฐะทะฝะฐัะตะฝะธั ะฟัะฐะฒ ะบะฐะถะดะพะผั ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะดะตะปัะฝะพ, ะผะพะถะฝะพ ะพะฑัะตะดะธะฝััั ะธั ะฒ ัะพะปะธ.
3. ะะพะทะผะพะถะฝะพััั ัะพะทะดะฐะฝะธั ะธะตัะฐััะธะน: ัะพะปั ะผะพะถะตั ัะพะดะตัะถะฐัั ะดััะณะธะต ัะพะปะธ.

### ะขะธะฟะธัะฝัะต ัะพะปะธ ะฒ PostgreSQL:
- **LOGIN ROLE (ะฟะพะปัะทะพะฒะฐัะตะปั)** โ ัะพะปั, ะบะพัะพัะพะน ะผะพะถะฝะพ ะฒะพะนัะธ ะฒ ัะธััะตะผั.
- **GROUP ROLE (ะณััะฟะฟะฐ)** โ ัะพะปั, ะบะพัะพัะฐั ะพะฑัะตะดะธะฝัะตั ะฟัะฐะฒะฐ ะฝะตัะบะพะปัะบะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

### ะัะธะผะตัั:
```sql
    --ะกะพะทะดะฐะฝะธะต ัะพะปะธ:
    CREATE ROLE analyst;
    --ะะฐะทะฝะฐัะตะฝะธะต ัะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั: 
    GRANT analyst TO user1; 
    --ะกะพะทะดะฐะฝะธะต ัะพะปะธ ั ะฟัะฐะฒะฐะผะธ ะฒัะพะดะฐ:
    CREATE ROLE app_user LOGIN PASSWORD โsecretโ;
```

## 33. ะงัะพ ัะฐะบะพะต ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ะฒ SQL ะธ ะทะฐัะตะผ ะพะฝะธ ะฝัะถะฝั?

**ะะบะพะฝะฝัะต ััะฝะบัะธะธ (window functions)** โ ััะพ ัะฟะตัะธะฐะปัะฝัะต ััะฝะบัะธะธ SQL, ะบะพัะพััะต ะฒัะฟะพะปะฝััั ะฒััะธัะปะตะฝะธั **ะฝะฐะด ะฝะฐะฑะพัะพะผ ัััะพะบ (ะพะบะฝะพะผ)**, ัะพััะฐะฝัั ะฟัะธ ััะพะผ ะดะตัะฐะปะธะทะฐัะธั ะบะฐะถะดะพะน ัััะพะบะธ.

ะัะปะธัะธะต ะพั ะฐะณัะตะณะฐัะฝัั ััะฝะบัะธะน:
- ะฐะณัะตะณะฐัั (`SUM`, `AVG` ะธ ะดั.) **ัะฒะพัะฐัะธะฒะฐัั ัััะพะบะธ** ะฒ ะพะดะธะฝ ัะตะทัะปััะฐั,
- ะพะบะพะฝะฝัะต ััะฝะบัะธะธ **ัะพััะฐะฝััั ะบะฐะถะดัั ัััะพะบั** ะธ ะดะพะฑะฐะฒะปััั ะดะพะฟะพะปะฝะธัะตะปัะฝะพะต ะฒััะธัะปะตะฝะฝะพะต ะทะฝะฐัะตะฝะธะต.

### ะะฐัะตะผ ะฝัะถะฝั ะพะบะพะฝะฝัะต ััะฝะบัะธะธ?
ะะฝะธ ะฟะพะทะฒะพะปััั ัะตัะฐัั ะฐะฝะฐะปะธัะธัะตัะบะธะต ะทะฐะดะฐัะธ, ะบะพัะพััะต ัะปะพะถะฝะพ ะฒััะฐะทะธัั ั ะฟะพะผะพััั ะพะฑััะฝัั ะฐะณัะตะณะฐัะพะฒ ะธะปะธ ะฟะพะดะทะฐะฟัะพัะพะฒ:
- ััะฐะฒะฝะตะฝะธะต ัะตะบััะตะน ัััะพะบะธ ั ะดััะณะธะผะธ (ะฟัะตะดัะดััะฐั/ัะปะตะดัััะฐั ะทะฐะฟะธัั);
- ะฝัะผะตัะฐัะธั ัััะพะบ ะธ ัะฐะฝะถะธัะพะฒะฐะฝะธะต;
- ะบัะผัะปััะธะฒะฝัะต ััะผะผั ะธ ัะบะพะปัะทััะธะต ััะตะดะฝะธะต;
- ะฒััะธัะปะตะฝะธะต ะฟัะพัะตะฝัะพะฒ ะธ ะดะพะปะตะน;
- ัะฟัะพัะตะฝะธะต ะฟะพัััะพะตะฝะธั ะพััััะพะฒ (ะฝะฐะฟัะธะผะตั, ยซัะพะฟ N ะฟะพ ะบะฐะถะดะพะน ะณััะฟะฟะตยป).

### ะกะธะฝัะฐะบัะธั
```sql
  <function>() OVER (
      PARTITION BY <ัะฐะทะดะตะปะตะฝะธะต>
      ORDER BY <ัะพััะธัะพะฒะบะฐ>
      ROWS|RANGE <ะพะบะฝะพ>
  )
```
- PARTITION BY โ ะดะตะปะธั ัััะพะบะธ ะฝะฐ ะณััะฟะฟั (ะบะฐะบ GROUP BY, ะฝะพ ะฑะตะท ะฐะณัะตะณะฐัะธะธ).
- ORDER BY โ ะฟะพััะดะพะบ ัััะพะบ ะฒ ะพะบะฝะต.
- ROWS / RANGE โ ัะฐะผะบะธ ะพะบะฝะฐ (ัะตะบััะฐั, ะฟัะตะดัะดััะธะต, ะฒัะต ะดะพ ัะตะบััะตะน ะธ ั.ะฟ.).

### ะัะธะผะตัั
1. ะัะผะตัะฐัะธั ัััะพะบ
```sql
  SELECT
    employee_id,
    department,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS rank_in_dept
  FROM employees;
```

2. ะัะผัะปััะธะฒะฝะฐั ััะผะผะฐ
```sql
  SELECT
    order_id,
    order_date,
    SUM(amount) OVER (ORDER BY order_date) AS running_total
  FROM orders;
```

3. ะกัะฐะฒะฝะตะฝะธะต ั ะฟัะตะดัะดััะธะผ ะทะฝะฐัะตะฝะธะตะผ
```sql
  SELECT
    order_id,
    amount,
    LAG(amount, 1) OVER (ORDER BY order_date) AS prev_amount
  FROM orders;
```

4. ะะพะปั ะฒ ะณััะฟะฟะต
```sql
  SELECT
   department,
   salary,
   salary * 100.0 / SUM(salary) OVER (PARTITION BY department) AS pct_in_dept
  FROM employees;
```

### ะัะฝะพะฒะฝัะต ัะธะฟั ะพะบะพะฝะฝัั ััะฝะบัะธะน

1. **ะะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ ะบะฐะบ ะพะบะพะฝะฝัะต**
  - `SUM`
  - `AVG`
  - `COUNT`
  - `MAX`
  - `MIN`

2. **ะะฐะฝะถะธัะพะฒะฐะฝะธะต**
  - `ROW_NUMBER()` โ ัะฝะธะบะฐะปัะฝัะน ะฝะพะผะตั ัััะพะบะธ
  - `RANK()` / `DENSE_RANK()` โ ัะฐะฝะถะธัะพะฒะฐะฝะธะต ั ะฟัะพะฟััะบะฐะผะธ ะธะปะธ ะฑะตะท
  - `NTILE(N)` โ ะดะตะปะตะฝะธะต ะฝะฐ ะณััะฟะฟั

3. **ะคัะฝะบัะธะธ ัะผะตัะตะฝะธั**
  - `LAG()` / `LEAD()` โ ะดะพัััะฟ ะบ ะฟัะตะดัะดััะตะน ะธะปะธ ัะปะตะดัััะตะน ัััะพะบะต
  - `FIRST_VALUE()` / `LAST_VALUE()` โ ะฟะตัะฒะพะต/ะฟะพัะปะตะดะฝะตะต ะทะฝะฐัะตะฝะธะต ะฒ ะพะบะฝะต  

### ะัะตะธะผััะตััะฒะฐ

- ะงะธัะฐะตะผะพััั SQL-ะทะฐะฟัะพัะพะฒ (ะฑะตะท ัะปะพะถะฝัั ะฟะพะดะทะฐะฟัะพัะพะฒ).
- ะะพะปะตะต ะฒััะพะบะฐั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั, ัะตะผ ะฒะปะพะถะตะฝะฝัะต ะทะฐะฟัะพัั ะธ ะดะถะพะนะฝั.
- ะะพะดะดะตัะถะบะฐ ะฐะฝะฐะปะธัะธัะตัะบะธั ะทะฐะดะฐั (BI, OLAP).
- ะฃะฝะธะฒะตััะฐะปัะฝะพััั (PostgreSQL, Oracle, SQL Server, MySQL โฅ 8). 

## 34. ะงะตะผ ะพัะปะธัะฐัััั ะฐะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ ะพั ะพะบะพะฝะฝัั?

### ะะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ
ะะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ (`SUM`, `AVG`, `COUNT`, `MAX`, `MIN` ะธ ะดั.)
- ะัะธะผะตะฝััััั ะบ **ะผะฝะพะถะตััะฒั ัััะพะบ** ะธ ะฒะพะทะฒัะฐัะฐัั **ะพะดะฝะพ ะทะฝะฐัะตะฝะธะต** ะดะปั ะฒัะตะน ะณััะฟะฟั.
- ะัะฟะพะปัะทััััั ะฒะผะตััะต ั `GROUP BY`.

**ะัะธะผะตั:**
```sql
  SELECT department, AVG(salary) AS avg_salary
  FROM employees
  GROUP BY department;
```
โ ะะปั ะบะฐะถะดะพะณะพ ะดะตะฟะฐััะฐะผะตะฝัะฐ ะฒะพะทะฒัะฐัะฐะตััั **ะพะดะฝะฐ ัััะพะบะฐ** ั ัััะตะดะฝัะฝะฝะพะน ะทะฐัะฟะปะฐัะพะน.

### ะะบะพะฝะฝัะต ััะฝะบัะธะธ
ะะบะพะฝะฝัะต ััะฝะบัะธะธ ะธัะฟะพะปัะทััั ัะต ะถะต ะฐะณัะตะณะฐัั, ะฝะพ ั ะดะพะฑะฐะฒะปะตะฝะธะตะผ `OVER()`.
- ะกะพััะฐะฝััั **ะฒัะต ัััะพะบะธ** ะฒ ัะตะทัะปััะฐัะต.
- ะะพะฑะฐะฒะปััั ะฝะพะฒะพะต ะฒััะธัะปัะตะผะพะต ะทะฝะฐัะตะฝะธะต ะดะปั ะบะฐะถะดะพะน ัััะพะบะธ ะฝะฐ ะพัะฝะพะฒะต "ะพะบะฝะฐ".

**ะัะธะผะตั:**
```sql
  SELECT
    employee_id,
    department,
    salary,
    AVG(salary) OVER (PARTITION BY department) AS avg_salary_in_dept
  FROM employees;
```
โ ะะฐะถะดะพะผั ัะพัััะดะฝะธะบั ะดะพะฑะฐะฒะปัะตััั ะบะพะปะพะฝะบะฐ ัะพ ััะตะดะฝะตะน ะทะฐัะฟะปะฐัะพะน ะฟะพ ะตะณะพ ะดะตะฟะฐััะฐะผะตะฝัั, ะฝะพ ัััะพะบะธ **ะฝะต ัะฒะพัะฐัะธะฒะฐัััั**.

### ะัะพะณ
- **ะะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ** ะพัะฒะตัะฐัั: *ยซะะฐะบะพะฒ ะพะฑัะธะน ัะตะทัะปััะฐั ะดะปั ะณััะฟะฟั?ยป*
- **ะะบะพะฝะฝัะต ััะฝะบัะธะธ** ะพัะฒะตัะฐัั: *ยซะะฐะบะพะฒ ัะตะทัะปััะฐั ะดะปั ััะพะน ัััะพะบะธ ะฒ ะบะพะฝัะตะบััะต ะตั ะณััะฟะฟั?ยป*  

## 35. ะงัะพ ัะฐะบะพะต PARTITION BY ะธ ORDER BY ะฒ ะพะบะพะฝะฝัั ััะฝะบัะธัั?

#### PARTITION BY
- ะะฐะทะฑะธะฒะฐะตั ะฝะฐะฑะพั ัััะพะบ ะฝะฐ **ะณััะฟะฟั (partitions)**, ะฒะฝัััะธ ะบะพัะพััั ะฟัะธะผะตะฝัะตััั ะพะบะพะฝะฝะฐั ััะฝะบัะธั.
- ะะพัะพะถะต ะฝะฐ `GROUP BY`, ะฝะพ ะณะปะฐะฒะฝะพะต ะพัะปะธัะธะต โ ัััะพะบะธ ะฝะต ัะฒะพัะฐัะธะฒะฐัััั, ะฐ ะพััะฐัััั ะฒ ัะตะทัะปััะฐัะต.

**ะัะธะผะตั:**
```sql
  SELECT
    employee_id,
    department,
    salary,
    AVG(salary) OVER (PARTITION BY department) AS avg_salary_in_dept
  FROM employees;
```
โ ะกัะตะดะฝัั ะทะฐัะฟะปะฐัะฐ ััะธัะฐะตััั **ะพัะดะตะปัะฝะพ ะฟะพ ะบะฐะถะดะพะผั ะดะตะฟะฐััะฐะผะตะฝัั**, ะฝะพ ะฒัะต ัััะพะบะธ ัะพัััะดะฝะธะบะพะฒ ัะพััะฐะฝััััั.

### ORDER BY
- ะะฟัะตะดะตะปัะตั **ะฟะพััะดะพะบ ัััะพะบ ะฒะฝัััะธ ะบะฐะถะดะพะน ะณััะฟะฟั (partition)**.
- ะะปะธัะตั ะฝะฐ ัะพ, ะบะฐะบ ััะฝะบัะธั ััะธัะฐะตั ะทะฝะฐัะตะฝะธั (ะพัะพะฑะตะฝะฝะพ ะดะปั `ROW_NUMBER`, `RANK`, `LAG`, `LEAD`, ะบัะผัะปััะธะฒะฝัั ััะผะผ).

**ะัะธะผะตั:**
```sql
  SELECT
    employee_id,
    department,
    salary,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS rank_in_dept
  FROM employees;
```
โ ะ ะบะฐะถะดะพะผ ะดะตะฟะฐััะฐะผะตะฝัะต ัะพัััะดะฝะธะบะธ ะฑัะดัั ะฟัะพะฝัะผะตัะพะฒะฐะฝั ะฟะพ ะทะฐัะฟะปะฐัะต ะพั ัะฐะผะพะน ะฑะพะปััะพะน ะบ ัะฐะผะพะน ะผะฐะปะตะฝัะบะพะน.

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒะผะตััะต
ะะฑััะฝะพ `PARTITION BY` ะธ `ORDER BY` ัะฐะฑะพัะฐัั **ะฒ ะฟะฐัะต**:
- `PARTITION BY` ะพัะฒะตัะฐะตั ะทะฐ ัะฐะทะดะตะปะตะฝะธะต ะฝะฐ ะณััะฟะฟั.
- `ORDER BY` ะพะฟัะตะดะตะปัะตั ะฟะพััะดะพะบ ะฒะฝัััะธ ะณััะฟะฟั.

**ะัะธะผะตั:**
```sql
  SELECT
    order_id,
    customer_id,
    order_date,
    SUM(amount) OVER (
      PARTITION BY customer_id
      ORDER BY order_date
    ) AS running_total
  FROM orders;
```
โ ะะปั ะบะฐะถะดะพะณะพ ะบะปะธะตะฝัะฐ (`customer_id`) ะฒััะธัะปัะตััั **ะฝะฐะบะพะฟะธัะตะปัะฝะฐั ััะผะผะฐ ะทะฐะบะฐะทะพะฒ** ะฟะพ ะดะฐัะต.

### ะัะพะณ
- **PARTITION BY** โ ะทะฐะดะฐัั ยซะพะบะฝะพยป ะดะปั ััะฝะบัะธะธ, ะพะฟัะตะดะตะปัั ะณััะฟะฟั.
- **ORDER BY** โ ะพะฟัะตะดะตะปัะตั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ัััะพะบ ะฒะฝัััะธ ะบะฐะถะดะพะน ะณััะฟะฟั.  
  ะะผะตััะต ะพะฝะธ ะฟะพะทะฒะพะปััั ัะพะทะดะฐะฒะฐัั ะผะพัะฝัะต ะฐะฝะฐะปะธัะธัะตัะบะธะต ะฒััะธัะปะตะฝะธั ะฟััะผะพ ะฒ SQL.  

## 36. ะงะตะผ ะพัะปะธัะฐัััั ROW_NUMBER(), RANK() ะธ DENSE_RANK()?

#### ROW_NUMBER()
- ะัะธัะฒะฐะธะฒะฐะตั ัะฝะธะบะฐะปัะฝัะน ะฟะพััะดะบะพะฒัะน ะฝะพะผะตั ัััะพะบะต ะฒ ัะฐะผะบะฐั ะพะบะฝะฐ.
- **ะะพะผะตัะฐ ะฒัะตะณะดะฐ ะธะดัั ะฟะพะดััะด** (1, 2, 3 โฆ), ะดะฐะถะต ะตัะปะธ ะทะฝะฐัะตะฝะธั ะพะดะธะฝะฐะบะพะฒัะต.

**ะัะธะผะตั:**
```sql
  SELECT
    employee_id,
    department,
    salary,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num
  FROM employees;
```
โ ะ ะบะฐะถะดะพะผ ะดะตะฟะฐััะฐะผะตะฝัะต ัะพัััะดะฝะธะบะฐะผ ะฟัะธัะฒะพัััั ัะฝะธะบะฐะปัะฝัะต ะฝะพะผะตัะฐ ะฟะพ ะทะฐัะฟะปะฐัะต. ะะฐะถะต ะฟัะธ ะพะดะธะฝะฐะบะพะฒัั ะทะฐัะฟะปะฐัะฐั ะฝะพะผะตัะฐ ะฑัะดัั ัะฐะทะฝัะต.

### RANK()
- ะัะธัะฒะฐะธะฒะฐะตั ัะฐะฝะณ ัััะพะบะฐะผ ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะทะฝะฐัะตะฝะธั.
- ะัะธ ะพะดะธะฝะฐะบะพะฒัั ะทะฝะฐัะตะฝะธัั ะฝะฐะทะฝะฐัะฐะตััั **ะพะดะธะฝะฐะบะพะฒัะน ัะฐะฝะณ**, ะฝะพ ะดะฐะปััะต ะฑัะดัั ยซะฟัะพะฟััะบะธยป.

**ะัะธะผะตั:**
```sql
  SELECT
    employee_id,
    department,
    salary,
    RANK() OVER (PARTITION BY department ORDER BY salary DESC) AS rank_in_dept
  FROM employees;
```
โ ะัะปะธ ะดะฒะฐ ัะพัััะดะฝะธะบะฐ ะดะตะปัั 1-ะต ะผะตััะพ, ะพะฑะฐ ะฟะพะปััะฐั `1`, ะฐ ัะปะตะดัััะธะน โ `3` (ะฑัะดะตั ะฟัะพะฟััะบ).

### DENSE_RANK()
- ะะฐะฑะพัะฐะตั ะบะฐะบ `RANK()`, ะฝะพ **ะฑะตะท ะฟัะพะฟััะบะพะฒ**.
- ะัะธ ะพะดะธะฝะฐะบะพะฒัั ะทะฝะฐัะตะฝะธัั ัััะพะบะธ ะฟะพะปััะฐัั ะพะดะธะฝะฐะบะพะฒัะน ัะฐะฝะณ, ะฝะพ ัะปะตะดัััะธะน ะธะดัั ััะฐะทั ะฟะพ ะฟะพััะดะบั.

**ะัะธะผะตั:**
```sql
  SELECT
    employee_id,
    department,
    salary,
    DENSE_RANK() OVER (PARTITION BY department ORDER BY salary DESC) AS dense_rank_in_dept
  FROM employees;
```
โ ะัะปะธ ะดะฒะฐ ัะพัััะดะฝะธะบะฐ ะดะตะปัั 1-ะต ะผะตััะพ, ะพะฑะฐ ะฟะพะปััะฐั `1`, ะฐ ัะปะตะดัััะธะน โ `2` (ะฑะตะท ะฟัะพะฟััะบะฐ).

### ะัะพะณ
- **ROW_NUMBER()** โ ัะฝะธะบะฐะปัะฝะฐั ะฝัะผะตัะฐัะธั ัััะพะบ.
- **RANK()** โ ััะธััะฒะฐะตั ัะฐะฒะตะฝััะฒะพ ะทะฝะฐัะตะฝะธะน, ะฝะพ ะพััะฐะฒะปัะตั ยซะดัััยป ะฒ ะฝัะผะตัะฐัะธะธ.
- **DENSE_RANK()** โ ะบะฐะบ `RANK()`, ะฝะพ ะฑะตะท ะฟัะพะฟััะบะพะฒ.  

## 37. ะะปั ัะตะณะพ ะฝัะถะฝั LAG() ะธ LEAD()?

- **LAG()** ะธ **LEAD()** โ ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ัะผะตัะตะฝะธั, ะบะพัะพััะต ะฟะพะทะฒะพะปััั ะฟะพะปััะธัั ะทะฝะฐัะตะฝะธะต **ะฟัะตะดัะดััะตะน** ะธะปะธ **ัะปะตะดัััะตะน** ัััะพะบะธ ะฑะตะท ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฟะพะดะทะฐะฟัะพัะพะฒ ะธะปะธ JOIN.
- ะัะฟะพะปัะทััััั ะฒ ะฐะฝะฐะปะธัะธะบะต ะดะปั ััะฐะฒะฝะตะฝะธั ัะตะบััะตะน ัััะพะบะธ ั ัะพัะตะดะฝะธะผะธ.

### LAG()
- ะะพะทะฒัะฐัะฐะตั ะทะฝะฐัะตะฝะธะต ะธะท **ะฟัะตะดัะดััะตะน ัััะพะบะธ** ะฒ ัะฐะผะบะฐั ะพะบะฝะฐ.
- ะัะปะธ ะฟัะตะดัะดััะตะน ัััะพะบะธ ะฝะตั, ะผะพะถะฝะพ ัะบะฐะทะฐัั ะทะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั.

**ะัะธะผะตั:**
```sql
  SELECT
    order_id,
    order_date,
    amount,
    LAG(amount, 1, 0) OVER (ORDER BY order_date) AS prev_amount
  FROM orders;
```
โ ะะปั ะบะฐะถะดะพะณะพ ะทะฐะบะฐะทะฐ ะดะพะฑะฐะฒะปัะตััั ััะผะผะฐ ะฟัะตะดัะดััะตะณะพ ะทะฐะบะฐะทะฐ (`0`, ะตัะปะธ ะฟัะตะดัะดััะตะณะพ ะฝะตั).

### LEAD()
- ะะพะทะฒัะฐัะฐะตั ะทะฝะฐัะตะฝะธะต ะธะท **ัะปะตะดัััะตะน ัััะพะบะธ** ะฒ ัะฐะผะบะฐั ะพะบะฝะฐ.
- ะขะพะถะต ะผะพะถะฝะพ ัะบะฐะทะฐัั ะทะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั.

**ะัะธะผะตั:**
```sql
  SELECT
    order_id,
    order_date,
    amount,
    LEAD(amount, 1, 0) OVER (ORDER BY order_date) AS next_amount
  FROM orders;
```
โ ะะปั ะบะฐะถะดะพะณะพ ะทะฐะบะฐะทะฐ ะดะพะฑะฐะฒะปัะตััั ััะผะผะฐ ัะปะตะดัััะตะณะพ ะทะฐะบะฐะทะฐ (`0`, ะตัะปะธ ัะปะตะดัััะตะณะพ ะฝะตั).

### ะัะฐะบัะธัะตัะบะพะต ะฟัะธะผะตะฝะตะฝะธะต
1. ะะฝะฐะปะธะท ะดะธะฝะฐะผะธะบะธ (ะฝะฐะฟัะธะผะตั, ัะฐะทะฝะธัะฐ ะผะตะถะดั ัะตะบััะธะผ ะธ ะฟัะตะดัะดััะธะผ ะทะฝะฐัะตะฝะธะตะผ).  
```sql
  SELECT
    order_date,
    amount,
    amount - LAG(amount) OVER (ORDER BY order_date) AS diff_from_prev
  FROM orders;
```
2. ะะฐัะพะถะดะตะฝะธะต ยซะฟัะพะฒะฐะปะพะฒยป ะธะปะธ ยซัะบะฐัะบะพะฒยป ะฒ ะดะฐะฝะฝัั.
3. ะกัะฐะฒะฝะตะฝะธะต ัะตะบััะตะณะพ ะธ ัะปะตะดัััะตะณะพ ัะพะฑััะธั (ะฝะฐะฟัะธะผะตั, ะพะฟัะตะดะตะปะธัั ะฒัะตะผั ะดะพ ัะปะตะดัััะตะณะพ ะทะฐะบะฐะทะฐ ะบะปะธะตะฝัะฐ).
4. ะ ัะธะฝะฐะฝัะพะฒัั ะธ BI-ะพััััะฐั โ ะฟะพะดัััั ะธะทะผะตะฝะตะฝะธั ะฟะพะบะฐะทะฐัะตะปะตะน ะฟะพ ะฟะตัะธะพะดะฐะผ.

---

### ะัะพะณ
- **LAG()** โ ะดะพััะฐัั ะดะฐะฝะฝัะต ะธะท ะฟัะพัะปะพะน ัััะพะบะธ.
- **LEAD()** โ ะดะพััะฐัั ะดะฐะฝะฝัะต ะธะท ัะปะตะดัััะตะน ัััะพะบะธ.  
  ะะฑะต ััะฝะบัะธะธ ัะฟัะพัะฐัั ะฐะฝะฐะปะธัะธะบั, ะทะฐะผะตะฝัั ัะปะพะถะฝัะต ะฟะพะดะทะฐะฟัะพัั ะธ ะดะตะปะฐั SQL ะฑะพะปะตะต ัะธัะฐะตะผัะผ. 

### 38. ะงัะพ ัะฐะบะพะต ROWS BETWEEN ะธ ะบะฐะบ ััะพ ัะฐะฑะพัะฐะตั?

`ROWS BETWEEN` โ ััะพ ัะฐััั ะบะพะฝััััะบัะธะธ `OVER()` ะฒ ะพะบะพะฝะฝัั ััะฝะบัะธัั, ะบะพัะพัะฐั ะทะฐะดะฐัั **ัะฐะผะบะธ (frame)** ะพะบะฝะฐ ะพัะฝะพัะธัะตะปัะฝะพ ัะตะบััะตะน ัััะพะบะธ.  
ะะฝะฐ ะพะฟัะตะดะตะปัะตั, ะบะฐะบะธะต ัััะพะบะธ ะฟะพะฟะฐะดัั ะฒ ะฒััะธัะปะตะฝะธะต ะดะปั ะบะฐะถะดะพะน ัััะพะบะธ ัะตะทัะปััะฐัะฐ.

#### ะกะธะฝัะฐะบัะธั
```sql
  () OVER (
    PARTITION BY โฆ
    ORDER BY โฆ
    ROWS BETWEEN <frame_start> AND <frame_end>
  )
```

### ะะฐัะธะฐะฝัั ัะฐะผะพะบ ะพะบะฝะฐ
- `UNBOUNDED PRECEDING` โ ะพั ะฟะตัะฒะพะน ัััะพะบะธ ะดะพ ัะตะบััะตะน.
- `n PRECEDING` โ n ัััะพะบ ะดะพ ัะตะบััะตะน.
- `CURRENT ROW` โ ัะพะปัะบะพ ัะตะบััะฐั ัััะพะบะฐ.
- `n FOLLOWING` โ n ัััะพะบ ะฟะพัะปะต ัะตะบััะตะน.
- `UNBOUNDED FOLLOWING` โ ะดะพ ะฟะพัะปะตะดะฝะตะน ัััะพะบะธ.

### ะัะธะผะตัั

**a) ะัะผัะปััะธะฒะฝะฐั ััะผะผะฐ (ะพั ะฝะฐัะฐะปะฐ ะดะพ ัะตะบััะตะน ัััะพะบะธ):**
```sql
  SELECT
    order_id,
    order_date,
    amount,
    SUM(amount) OVER (
      ORDER BY order_date
      ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW
    ) AS running_total
  FROM orders;
```
โ ะะพะบะฐะทัะฒะฐะตั ะฝะฐะบะพะฟะธัะตะปัะฝัะน ะธัะพะณ ะดะปั ะบะฐะถะดะพะน ัััะพะบะธ.

**b) ะกะบะพะปัะทััะตะต ััะตะดะฝะตะต (ัะตะบััะฐั ัััะพะบะฐ + 2 ะฟัะตะดัะดััะธะต):**
```sql
  SELECT
    order_id,
    amount,
    AVG(amount) OVER (
      ORDER BY order_date
      ROWS BETWEEN 2 PRECEDING AND CURRENT ROW
    ) AS moving_avg
  FROM orders;
```
โ ะะปั ะบะฐะถะดะพะน ัััะพะบะธ ะฑะตััััั ะตั ะทะฝะฐัะตะฝะธะต ะธ ะดะฒะฐ ะฟัะตะดัะดััะธั, ะทะฐัะตะผ ััะธัะฐะตััั ััะตะดะฝะตะต.

**c) ะกัะฐะฒะฝะตะฝะธะต ั ัะพัะตะดัะผะธ (ะฟัะตะดัะดััะฐั, ัะตะบััะฐั, ัะปะตะดัััะฐั):**
```sql
  SELECT
    order_id,
    amount,
    SUM(amount) OVER (
      ORDER BY order_date
      ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING
    ) AS local_sum
  FROM orders;
```
โ ะะปั ะบะฐะถะดะพะน ัััะพะบะธ ััะผะผะฐ ััะธัะฐะตััั ะธะท ัััั ะทะฝะฐัะตะฝะธะน: ะฟัะตะดัะดััะฐั + ัะตะบััะฐั + ัะปะตะดัััะฐั.

### ะัะพะณ
- `ROWS BETWEEN` ัะฟัะฐะฒะปัะตั ัะตะผ, ะบะฐะบะธะต ัััะพะบะธ ะฟะพะฟะฐะดะฐัั ะฒ ัะฐัััั ะพะบะพะฝะฝะพะน ััะฝะบัะธะธ.
- ะะพะทะฒะพะปัะตั ะดะตะปะฐัั **ะบัะผัะปััะธะฒะฝัะต ะธัะพะณะธ**, **ัะบะพะปัะทััะธะต ััะตะดะฝะธะต**, **ะปะพะบะฐะปัะฝัะต ะฐะณัะตะณะฐัั**.
- ะัะปะธัะฐะตััั ะพั ะฟัะพััะพะณะพ `PARTITION BY` + `ORDER BY` ัะตะผ, ััะพ ะดะฐัั ัะพะฝะบะธะน ะบะพะฝััะพะปั ะฝะฐะด ัะฐะผะบะฐะผะธ ะพะบะฝะฐ. 

## 39. ะะพะถะฝะพ ะปะธ ะธัะฟะพะปัะทะพะฒะฐัั ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ะฒ WHERE?

ะะตั, **ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ะฝะตะปัะทั ะธัะฟะพะปัะทะพะฒะฐัั ะฝะฐะฟััะผัั ะฒ `WHERE`**.  
ะัะธัะธะฝะฐ:
- `WHERE` ะฒัะฟะพะปะฝัะตััั **ะดะพ** ะฒััะธัะปะตะฝะธั ะพะบะพะฝะฝัั ััะฝะบัะธะน.
- ะะบะพะฝะฝัะต ััะฝะบัะธะธ ััะธัะฐัััั ัะถะต ะฝะฐ ััะฐะฟะต ัะพัะผะธัะพะฒะฐะฝะธั ัะตะทัะปััะธััััะตะณะพ ะฝะฐะฑะพัะฐ (ะฟะพัะปะต `FROM` โ `WHERE` โ `GROUP BY` โ `HAVING` โ `WINDOW/SELECT` โ `ORDER BY`).

### ะงัะพ ะฑัะดะตั, ะตัะปะธ ะฟะพะฟัะพะฑะพะฒะฐัั?
```sql
  SELECT
    employee_id,
    department,
    salary,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num
  FROM employees
  WHERE row_num = 1;  โ ะัะธะฑะบะฐ!
```
โ ะัะธะฑะบะฐ: ะบะพะปะพะฝะบะฐ `row_num` ะฝะต ัััะตััะฒัะตั ะฝะฐ ะผะพะผะตะฝั ะฒัะฟะพะปะฝะตะฝะธั `WHERE`.

### ะะฐะบ ะฟัะฐะฒะธะปัะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั?
ะััั ััะธ ะพัะฝะพะฒะฝัั ะฟะพะดัะพะดะฐ:

**a) ะะพะดะทะฐะฟัะพั (derived table / CTE)**
```sql
  WITH ranked AS (
    SELECT
      employee_id,
      department,
      salary,
      ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num
    FROM employees
  )
  SELECT *
  FROM ranked
  WHERE row_num = 1;
```
โ ะะพะปััะธะผ ะฟะพ ะพะดะฝะพะผั ัะพัััะดะฝะธะบั ั ะผะฐะบัะธะผะฐะปัะฝะพะน ะทะฐัะฟะปะฐัะพะน ะฒ ะบะฐะถะดะพะผ ะดะตะฟะฐััะฐะผะตะฝัะต.

**b) ะคะธะปัััะฐัะธั ัะตัะตะท `QUALIFY` (ะตัะปะธ ะฟะพะดะดะตัะถะธะฒะฐะตััั)**
ะะตะบะพัะพััะต ะกะฃะะ (Snowflake, BigQuery, Oracle 23c, DuckDB) ะฟะพะดะดะตัะถะธะฒะฐัั `QUALIFY`:  
```sql
  SELECT
    employee_id,
    department,
    salary,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num
  FROM employees
  QUALIFY row_num = 1;
```
โ ะฃะฟัะพััะฝะฝัะน ัะธะฝัะฐะบัะธั, ะบะพัะพััะน ัะธะปััััะตั ะฟะพ ะพะบะพะฝะฝัะผ ััะฝะบัะธัะผ.

**c) ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะพะบะพะฝะฝะพะน ััะฝะบัะธะธ ะฒ `HAVING` (ัะตะดะบะพ)**
ะะฑััะฝะพ ะฝะต ะฟัะธะผะตะฝัะตััั ะฝะฐะฟััะผัั, ัะฐะบ ะบะฐะบ `HAVING` ะธะดัั ะฟะพัะปะต ะฐะณัะตะณะฐัะพะฒ, ะฝะพ ัะตะพัะตัะธัะตัะบะธ ะผะพะถะฝะพ ะพะฑะตัะฝััั ะฒ ะฟะพะดะทะฐะฟัะพั.

### ะัะพะณ
- **ะะตะปัะทั** ะธัะฟะพะปัะทะพะฒะฐัั ะพะบะพะฝะฝัะต ััะฝะบัะธะธ ะฒ `WHERE` ะฝะฐะฟััะผัั.
- **ะะพะถะฝะพ** ัะธะปัััะพะฒะฐัั ะฟะพ ะธั ัะตะทัะปััะฐัั ัะตัะตะท **CTE**, **ะฟะพะดะทะฐะฟัะพั** ะธะปะธ **QUALIFY** (ะตัะปะธ ะฟะพะดะดะตัะถะธะฒะฐะตััั).  

## 40. ะงัะพ ัะฐะบะพะต QUALIFY?

### ะะฟัะตะดะตะปะตะฝะธะต
`QUALIFY` โ ััะพ ะพะฟะตัะฐัะพั SQL, ะบะพัะพััะน ะฟะพะทะฒะพะปัะตั ัะธะปัััะพะฒะฐัั ัััะพะบะธ **ะฟะพ ัะตะทัะปััะฐัะฐะผ ะพะบะพะฝะฝัั ััะฝะบัะธะน**, ะฟะพะดะพะฑะฝะพ ัะพะผั ะบะฐะบ:
- `WHERE` ัะธะปััััะตั ะฟะพ ะพะฑััะฝัะผ ะบะพะปะพะฝะบะฐะผ,
- `HAVING` ัะธะปััััะตั ะฟะพ ะฐะณัะตะณะฐัะฐะผ.

ะะฝัะผะธ ัะปะพะฒะฐะผะธ:  
`QUALIFY` = "WHERE ะดะปั ะพะบะพะฝะฝัั ััะฝะบัะธะน".

### ะะฐัะตะผ ะฝัะถะตะฝ?
ะะบะพะฝะฝัะต ััะฝะบัะธะธ ััะธัะฐัััั **ะฟะพัะปะต** ะฒัะฟะพะปะฝะตะฝะธั `WHERE` ะธ `GROUP BY`.  
ะะฑััะฝะพ, ััะพะฑั ะพััะธะปัััะพะฒะฐัั ะฟะพ ะพะบะพะฝะฝะพะน ััะฝะบัะธะธ (`ROW_NUMBER`, `RANK`, `LAG` ะธ ะดั.), ะฟัะธัะพะดะธััั ะธัะฟะพะปัะทะพะฒะฐัั CTE ะธะปะธ ะฟะพะดะทะฐะฟัะพั.

`QUALIFY` ัะฟัะพัะฐะตั ััะพ: ะฟะพะทะฒะพะปัะตั ะฟะธัะฐัั ัะธะปัััะฐัะธั ะฟะพ ะพะบะพะฝะฝัะผ ััะฝะบัะธัะผ ะฟััะผะพ ะฒ ะพัะฝะพะฒะฝะพะผ ะทะฐะฟัะพัะต.

### ะัะธะผะตั ะฑะตะท QUALIFY (ัะตัะตะท CTE)
```sql
  WITH ranked AS (
    SELECT
      employee_id,
      department,
      salary,
      ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num
    FROM employees
  )
  SELECT *
  FROM ranked
  WHERE row_num = 1;
```

### ะขะพั ะถะต ะทะฐะฟัะพั ั QUALIFY
```sql
  SELECT
    employee_id,
    department,
    salary,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num
  FROM employees
  QUALIFY row_num = 1;
```
โ ะะพะปััะธะผ ัะพัััะดะฝะธะบะพะฒ ั **ะผะฐะบัะธะผะฐะปัะฝะพะน ะทะฐัะฟะปะฐัะพะน** ะฒ ะบะฐะถะดะพะผ ะดะตะฟะฐััะฐะผะตะฝัะต, ะฝะพ ะทะฐะฟะธัั ะฒัะณะปัะดะธั ะฝะฐะผะฝะพะณะพ ะบะพัะพัะต.

### ะะดะต ะฟะพะดะดะตัะถะธะฒะฐะตััั QUALIFY
- **BigQuery** (Google)
- **Snowflake**
- **Teradata**
- **DuckDB**
- **Oracle 23c** (ะฝะพะฒัะต ะฒะตััะธะธ)

โ๏ธ ะ PostgreSQL, MySQL, MS SQL Server **ะพะฟะตัะฐัะพัะฐ QUALIFY ะฝะตั**, ัะฐะผ ะธัะฟะพะปัะทััั CTE ะธะปะธ ะฟะพะดะทะฐะฟัะพั.

## 41. ะะฟัะธะผะธะทะฐัะธั SQL-ะทะฐะฟัะพัะพะฒ: EXPLAIN ะธ EXPLAIN ANALYZE

### ะะฟัะธะผะธะทะฐัะธั SQL-ะทะฐะฟัะพัะพะฒ
ะกะฃะะ (PostgreSQL, MySQL, Oracle, SQL Server ะธ ะดั.) ะธะผะตัั **ะพะฟัะธะผะธะทะฐัะพั ะทะฐะฟัะพัะพะฒ**, ะบะพัะพััะน:
- ะฒัะฑะธัะฐะตั ะปัััะธะน ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั (`execution plan`);
- ัะตัะฐะตั, ะบะฐะบะธะต ะธะฝะดะตะบัั ะธัะฟะพะปัะทะพะฒะฐัั;
- ะพะฟัะตะดะตะปัะตั ะฟะพััะดะพะบ ัะพะตะดะธะฝะตะฝะธะน (`join order`);
- ะฒัะฑะธัะฐะตั ะฐะปะณะพัะธัะผ ัะพะตะดะธะฝะตะฝะธะน (Nested Loop, Merge Join, Hash Join);
- ะพัะตะฝะธะฒะฐะตั ััะพะธะผะพััั (`cost`) ะบะฐะถะดะพะน ะพะฟะตัะฐัะธะธ.

ะงัะพะฑั ะฟะพะฝััั, **ะบะฐะบ ะธะผะตะฝะฝะพ ะฑัะดะตั ะฒัะฟะพะปะฝะตะฝ ะทะฐะฟัะพั**, ะธัะฟะพะปัะทััั ะบะพะผะฐะฝะดั `EXPLAIN`.

### ะงัะพ ัะฐะบะพะต EXPLAIN?
`EXPLAIN <query>` ะฟะพะบะฐะทัะฒะฐะตั **ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั** ะทะฐะฟัะพัะฐ:
- ะบะฐะบะธะต ัะฐะณะธ ะกะฃะะ ะฟัะตะดะฟัะธะผะตั ะดะปั ะฟะพะปััะตะฝะธั ัะตะทัะปััะฐัะฐ;
- ะฑัะดัั ะปะธ ะธัะฟะพะปัะทะพะฒะฐัััั ะธะฝะดะตะบัั ะธะปะธ ะฟะพะปะฝัะน ัะบะฐะฝ ัะฐะฑะปะธัั (Seq Scan);
- ะฟะพััะดะพะบ ัะพะตะดะธะฝะตะฝะธะน ัะฐะฑะปะธั;
- ะพัะตะฝะพัะฝัั ััะพะธะผะพััั ะฒัะฟะพะปะฝะตะฝะธั (`cost`).

**ะัะธะผะตั:**
```sql
  EXPLAIN SELECT * FROM orders WHERE customer_id = 123;
    --ะัะฒะพะด (PostgreSQL):
    -- Seq Scan on orders  (cost=0.00..431.00 rows=10 width=64)
    -- Filter: (customer_id = 123)
```
โ ะะฐะฟัะพั ะฑัะดะตั ะดะตะปะฐัั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพะต ัะบะฐะฝะธัะพะฒะฐะฝะธะต ะฒัะตะน ัะฐะฑะปะธัั (`Seq Scan`).

### ะงัะพ ัะฐะบะพะต EXPLAIN ANALYZE?
- `EXPLAIN ANALYZE <query>` ะฒัะฟะพะปะฝัะตั ะทะฐะฟัะพั ัะตะฐะปัะฝะพ ะธ ะฟะพะบะฐะทัะฒะฐะตั:
  - ัะฐะบัะธัะตัะบะพะต ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะบะฐะถะดะพะณะพ ัะฐะณะฐ;
  - ะบะพะปะธัะตััะฒะพ ัะตะฐะปัะฝะพ ะฟัะพัะธัะฐะฝะฝัั ัััะพะบ;
  - ัะบะพะปัะบะพ ัััะพะบ ะฒะตัะฝัะปะพ ะบะฐะถะดะพะต ะดะตะนััะฒะธะต;
  - ัะฐะทะฝะธัั ะผะตะถะดั **ะพัะตะฝะบะฐะผะธ ะพะฟัะธะผะธะทะฐัะพัะฐ** ะธ **ัะตะฐะปัะฝะพัััั**.

**ะัะธะผะตั:**
```sql
    EXPLAIN ANALYZE
    SELECT * FROM orders WHERE customer_id = 123;
    ะัะฒะพะด:
    Seq Scan on orders  (cost=0.00..431.00 rows=10 width=64) (actual time=0.012..15.234 rows=8 loops=1)
    Filter: (customer_id = 123)
    Rows Removed by Filter: 5000
    Execution Time: 15.300 ms
```

### ะะฐะบ ะฐะฝะฐะปะธะทะธัะพะฒะฐัั ัะตะทัะปััะฐั
1. **ะขะธะฟ ัะบะฐะฝะธัะพะฒะฐะฝะธั**
  - `Seq Scan` โ ะฟะพะปะฝัะน ะฟัะพัะพะด ัะฐะฑะปะธัั (ะผะตะดะปะตะฝะฝะพ ะดะปั ะฑะพะปััะธั ะดะฐะฝะฝัั).
  - `Index Scan` / `Index Only Scan` โ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะธะฝะดะตะบัะฐ (ะฑััััะตะต).
  - `Bitmap Heap Scan` โ ะบะพะผะฑะธะฝะธัะพะฒะฐะฝะฝะพะต ััะตะฝะธะต ัะตัะตะท ะธะฝะดะตะบั.

2. **Join ะผะตัะพะดั**
  - `Nested Loop` โ ัะพัะพัะพ ะดะปั ะผะฐะปะตะฝัะบะธั ะฒัะฑะพัะพะบ.
  - `Merge Join` โ ัะพัะพัะพ ะดะปั ะพััะพััะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั.
  - `Hash Join` โ ัะพัะพัะพ ะดะปั ะฑะพะปััะธั ะฝะตะพััะพััะธัะพะฒะฐะฝะฝัั ัะฐะฑะปะธั.

3. **Cost**
  - ะะฐะฟะธััะฒะฐะตััั ะบะฐะบ `cost=ะฝะฐัะฐะปะพ..ะบะพะฝะตั`.
  - ะญัะพ ยซะพัะตะฝะบะฐ ััะพะธะผะพััะธยป (ัะตะผ ะผะตะฝััะต, ัะตะผ ะปัััะต).
  - ะัะฟะพะปัะทัะตััั ะพะฟัะธะผะธะทะฐัะพัะพะผ ะดะปั ะฒัะฑะพัะฐ ะฟะปะฐะฝะฐ.
  - - ะะท ัะตะณะพ ัะบะปะฐะดัะฒะฐะตััั cost
      ะะฟัะธะผะธะทะฐัะพั ััะธััะฒะฐะตั:
    - **ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ัััะพะบ**
      - ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ (`Seq Scan`) ะดะพัะพะถะต ะดะปั ะฑะพะปััะธั ัะฐะฑะปะธั;
      - ัะตัะตะท ะธะฝะดะตะบั (`Index Scan`) ะดะตัะตะฒะปะต, ะตัะปะธ ะฒัะฑะพัะบะฐ ะฝะตะฑะพะปััะฐั.
    - **ะกะตะปะตะบัะธะฒะฝะพััั** ััะปะพะฒะธั (ัะบะพะปัะบะพ ัััะพะบ ะฟะพะฟะฐะดัั ะฒ ัะตะทัะปััะฐั).
    - **ะกัะพะธะผะพััั ััะตะฝะธั ั ะดะธัะบะฐ vs ะธะท ะฟะฐะผััะธ** (ะฒ PostgreSQL ะฝะฐัััะฐะธะฒะฐะตััั ะฟะฐัะฐะผะตััะฐะผะธ `seq_page_cost`, `random_page_cost`, `cpu_tuple_cost`).
    - **ะกะพััะธัะพะฒะบะฐ** ะธ **ัะพะตะดะธะฝะตะฝะธั** ัะฐะฑะปะธั.

4. **Rows**
  - `rows=10` โ ะฟัะพะณะฝะพะท ะพะฟัะธะผะธะทะฐัะพัะฐ.
  - `actual rows=...` โ ัะตะฐะปัะฝัะต ะดะฐะฝะฝัะต ะฟัะธ `EXPLAIN ANALYZE`.
  - ะะพะปััะฐั ัะฐะทะฝะธัะฐ โ ะพะฟัะธะผะธะทะฐัะพั ะฝะตะฟัะฐะฒะธะปัะฝะพ ะพัะตะฝะธะป ัะตะปะตะบัะธะฒะฝะพััั ััะปะพะฒะธั.

5. **Time**
  - `actual time=0.012..15.234` โ ัะตะฐะปัะฝะพะต ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ัะฐะณะฐ.
  - `Execution Time` โ ะพะฑัะตะต ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะฟัะพัะฐ.

### ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ
- ะัะปะธ ะฒะธะดะธัั `Seq Scan` ะฝะฐ ะฑะพะปััะพะน ัะฐะฑะปะธัะต โ ะฝัะถะตะฝ **ะธะฝะดะตะบั**.
- ะัะปะธ ัะปะธัะบะพะผ ะผะฝะพะณะพ ัััะพะบ ยซRows Removed by Filterยป โ ะฒะพะทะผะพะถะฝะพ, ััะพะธั **ะฟะตัะตะฟะธัะฐัั ััะปะพะฒะธะต**.
- ะัะปะธ `Nested Loop` ะฝะฐ ะฑะพะปััะธั ัะฐะฑะปะธัะฐั โ ััะพะธั ะฟะพะดัะผะฐัั ะพ **Hash Join** ะธะปะธ **Merge Join**.
- ะัะปะธ `actual rows` ัะธะปัะฝะพ ะพัะปะธัะฐะตััั ะพั `rows` โ ััะพะธั ะพะฑะฝะพะฒะธัั ััะฐัะธััะธะบั (`ANALYZE`) ะธะปะธ ะฟะตัะตะฟะธัะฐัั ะทะฐะฟัะพั.

### ะัะพะณ
- `EXPLAIN` โ ะฟะพะบะฐะทัะฒะฐะตั ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั (ะพัะตะฝะบะธ ะพะฟัะธะผะธะทะฐัะพัะฐ).
- `EXPLAIN ANALYZE` โ ัะตะฐะปัะฝะพ ะฒัะฟะพะปะฝัะตั ะทะฐะฟัะพั ะธ ะฟะพะบะฐะทัะฒะฐะตั **ัะฐะบัะธัะตัะบะธะต ัะธััั**.
- ะะฟัะธะผะธะทะฐัะธั ัะฒะพะดะธััั ะบ:
  - ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะธะฝะดะตะบัะพะฒ,
  - ะฒัะฑะพัั ะฟัะฐะฒะธะปัะฝะพะณะพ ัะธะฟะฐ ัะพะตะดะธะฝะตะฝะธะน,
  - ะผะธะฝะธะผะธะทะฐัะธะธ ะปะธัะฝะตะณะพ ััะตะฝะธั ัััะพะบ,
  - ะพะฑะฝะพะฒะปะตะฝะธั ััะฐัะธััะธะบะธ ัะฐะฑะปะธั.  

## 42. ะงัะพ ัะฐะบะพะต BASE-ะฟะพะดัะพะด ะฒ ะฑะฐะทะฐั ะดะฐะฝะฝัั?

**BASE** โ ััะพ ะฐะบัะพะฝะธะผ, ะฟัะพัะธะฒะพะฟะพััะฐะฒะปัะตะผัะน ะบะปะฐััะธัะตัะบะพะน ะผะพะดะตะปะธ **ACID**.  
ะัะฟะพะปัะทัะตััั ะฒ ะพัะฝะพะฒะฝะพะผ ะฒ **NoSQL** ะธ ัะฐัะฟัะตะดะตะปัะฝะฝัั ะฑะฐะทะฐั ะดะฐะฝะฝัั, ะณะดะต ะฒะฐะถะฝะฐ ะผะฐัััะฐะฑะธััะตะผะพััั ะธ ะดะพัััะฟะฝะพััั.

BASE ัะฐััะธััะพะฒัะฒะฐะตััั ะบะฐะบ:
- **Basically Available** โ ยซะฒ ะพัะฝะพะฒะฝะพะผ ะดะพัััะฟะฝะฐัยป (ัะธััะตะผะฐ ะฒัะตะณะดะฐ ะพัะฒะตัะฐะตั, ะฟัััั ะดะฐะถะต ะฝะต ะฒัะตะณะดะฐ ั ะฐะบััะฐะปัะฝัะผะธ ะดะฐะฝะฝัะผะธ).
- **Soft state** โ ยซะผัะณะบะพะต ัะพััะพัะฝะธะตยป (ัะพััะพัะฝะธะต ัะธััะตะผั ะผะพะถะตั ัะพ ะฒัะตะผะตะฝะตะผ ะผะตะฝััััั, ะดะฐะถะต ะฑะตะท ะฝะพะฒัั ะพะฟะตัะฐัะธะน, ะฝะฐะฟัะธะผะตั, ะฟัะธ ัะตะฟะปะธะบะฐัะธะธ).
- **Eventually consistent** โ ยซัะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะฒ ะบะพะฝะตัะฝะพะผ ะธัะพะณะตยป (ะดะฐะฝะฝัะต ะฒ ัะฐะทะฝัั ัะทะปะฐั ัะพ ะฒัะตะผะตะฝะตะผ ัะธะฝััะพะฝะธะทะธัััััั, ะฝะพ ะฝะต ะผะณะฝะพะฒะตะฝะฝะพ).

### ะัะปะธัะธะต ะพั ACID
- **ACID**: ัััะพะณะพะต ัะพะฑะปัะดะตะฝะธะต ะฐัะพะผะฐัะฝะพััะธ, ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ, ะธะทะพะปััะธะธ ะธ ะดะพะปะณะพะฒะตัะฝะพััะธ ััะฐะฝะทะฐะบัะธะน.
- **BASE**: ะถะตััะฒัะตั ัััะพะณะพะน ัะพะณะปะฐัะพะฒะฐะฝะฝะพัััั ัะฐะดะธ **ะดะพัััะฟะฝะพััะธ ะธ ะผะฐัััะฐะฑะธััะตะผะพััะธ**.

### ะะดะต ะฟัะธะผะตะฝัะตััั
- ะะฐัะฟัะตะดะตะปัะฝะฝัะต ัะธััะตะผั (Cassandra, DynamoDB, CouchDB, Riak).
- ะััะพะบะพะฝะฐะณััะถะตะฝะฝัะต ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั, ะณะดะต ะฒะฐะถะฝะตะต, ััะพะฑั ัะธััะตะผะฐ **ะฝะต ะฟะฐะดะฐะปะฐ** ะธ ะพัะฒะตัะฐะปะฐ ะฑััััะพ.
- ะะพะณะดะฐ ะดะพะฟัััะธะผะฐ ะฝะตะบะพัะพัะฐั ะทะฐะดะตัะถะบะฐ ัะธะฝััะพะฝะธะทะฐัะธะธ ะดะฐะฝะฝัั.

### ะัะธะผะตั
ะกะธััะตะผะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธั ะฐะฒะธะฐะฑะธะปะตัะพะฒ ะฒ ััะธะปะต BASE:
- ะะตัะบะพะปัะบะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะผะพะณัั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะฒะธะดะตัั ะพะดะธะฝ ะธ ัะพั ะถะต ยซะฟะพัะปะตะดะฝะธะน ะฑะธะปะตัยป.
- ะะพะทะผะพะถะฝะพ, ััะพ ัะธััะตะผะฐ ะฟัะพะดะฐัั ะฑะธะปะตั ะดะฒัะผ ะบะปะธะตะฝัะฐะผ.
- ะะพ ัะตัะตะท ะบะพัะพัะบะพะต ะฒัะตะผั ะดะฐะฝะฝัะต ัะธะฝััะพะฝะธะทะธัััััั, ะธ ัะตะฐะปัะฝะฐั ะดะพัััะฟะฝะพััั ะธัะฟัะฐะฒะปัะตััั.

### ะะปััั
- ะััะพะบะฐั ะดะพัััะฟะฝะพััั ะดะฐะถะต ะฟัะธ ัะฑะพัั.
- ะัะปะธัะฝะฐั ะผะฐัััะฐะฑะธััะตะผะพััั ะฒ ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะธััะตะผะฐั.
- ะะพะปะตะต ะฒััะพะบะฐั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั.

### ะะธะฝััั
- ะะตั ัััะพะณะพะน ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ (ะผะพะถะฝะพ ะฒัะตะผะตะฝะฝะพ ัะธัะฐัั ยซัััะฐัะตะฒัะธะตยป ะดะฐะฝะฝัะต).
- ะกะปะพะถะฝะตะต ัะฐะทัะฐะฑะฐััะฒะฐัั ะฟัะธะปะพะถะตะฝะธั, ะณะดะต ััะตะฑัะตััั ะถัััะบะฐั ััะฐะฝะทะฐะบัะธะพะฝะฝะฐั ะปะพะณะธะบะฐ.
- ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะดะพััะธะณะฐะตััั ะฝะต ะผะณะฝะพะฒะตะฝะฝะพ, ะฐ ยซัะพ ะฒัะตะผะตะฝะตะผยป.

### ะัะพะณ
**BASE** โ ััะพ ะฟะพะดัะพะด, ะฟัะพัะธะฒะพะฟะพััะฐะฒะปัะตะผัะน ACID, ะพัะธะตะฝัะธัะพะฒะฐะฝะฝัะน ะฝะฐ **ะผะฐัััะฐะฑะธััะตะผะพััั ะธ ะดะพัััะฟะฝะพััั** ัะตะฝะพะน ัััะพะณะพะน ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ.  
ะะฝ ะธะดะตะฐะปัะฝะพ ะฟะพะดัะพะดะธั ะดะปั NoSQL ะธ ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะธััะตะผ, ะณะดะต ะฒะฐะถะฝะพ ยซะปัััะต ะพัะฒะตัะธัั ะฝะตัะพัะฝะพ, ัะตะผ ะฝะต ะพัะฒะตัะธัั ัะพะฒัะตะผยป.  

## 43. ะ ัะตะผ ะพัะปะธัะธะต BASE ะธ ACID ะฟะพะดัะพะดะพะฒ?

### ACID (ััะฐะดะธัะธะพะฝะฝัะน ะฟะพะดัะพะด ะดะปั ัะตะปััะธะพะฝะฝัั ะะ)
- **Atomicity (ะัะพะผะฐัะฝะพััั)** โ ััะฐะฝะทะฐะบัะธั ะฒัะฟะพะปะฝัะตััั ะฟะพะปะฝะพัััั ะธะปะธ ะฝะต ะฒัะฟะพะปะฝัะตััั ะฒะพะฒัะต.
- **Consistency (ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั)** โ ะดะฐะฝะฝัะต ะฒัะตะณะดะฐ ะพััะฐัััั ะฒ ัะพะณะปะฐัะพะฒะฐะฝะฝะพะผ ัะพััะพัะฝะธะธ.
- **Isolation (ะะทะพะปะธัะพะฒะฐะฝะฝะพััั)** โ ะฟะฐัะฐะปะปะตะปัะฝัะต ััะฐะฝะทะฐะบัะธะธ ะฝะต ะผะตัะฐัั ะดััะณ ะดััะณั.
- **Durability (ะะฐะดัะถะฝะพััั)** โ ะดะฐะฝะฝัะต ัะพััะฐะฝััััั ะดะฐะถะต ะฟัะธ ัะฑะพะต.

โก ะะพะดัะพะดะธั ะดะปั ะฑะฐะฝะบะพะฒัะบะธั, ัะธะฝะฐะฝัะพะฒัั ัะธััะตะผ, ะณะดะต ะฒะฐะถะฝะฐ **ัััะพะณะฐั ะบะพััะตะบัะฝะพััั**.

### BASE (ะฟะพะดัะพะด ะดะปั ัะฐัะฟัะตะดะตะปัะฝะฝัั NoSQL ัะธััะตะผ)
- **Basically Available** โ ัะธััะตะผะฐ ะฒัะตะณะดะฐ ะพัะฒะตัะฐะตั, ะดะฐะถะต ะตัะปะธ ะฝะต ะฒัะต ะดะฐะฝะฝัะต ัะพะณะปะฐัะพะฒะฐะฝั.
- **Soft State** โ ัะพััะพัะฝะธะต ะดะฐะฝะฝัั ะผะพะถะตั ะผะตะฝััััั ัะพ ะฒัะตะผะตะฝะตะผ (ะฝะฐะฟัะธะผะตั, ะฟัะธ ัะตะฟะปะธะบะฐัะธะธ).
- **Eventually Consistent** โ ะฒ ะบะพะฝะตัะฝะพะผ ะธัะพะณะต ะดะฐะฝะฝัะต ัะธะฝััะพะฝะธะทะธัััััั, ะฝะพ ะฝะต ะพะฑัะทะฐัะตะปัะฝะพ ะผะณะฝะพะฒะตะฝะฝะพ.

โก ะะพะดัะพะดะธั ะดะปั ะผะฐัััะฐะฑะธััะตะผัั ะธ ะฒััะพะบะพะฝะฐะณััะถะตะฝะฝัั ะฟัะธะปะพะถะตะฝะธะน (ัะพััะตัะธ, ะพะฝะปะฐะนะฝ-ะผะฐะณะฐะทะธะฝั), ะณะดะต ะฒะฐะถะฝะฐ **ะดะพัััะฟะฝะพััั** ะธ **ะฑััััะพะดะตะนััะฒะธะต**.

### ะกัะฐะฒะฝะตะฝะธะต ACID vs BASE

| ะัะธัะตัะธะน           | ACID                                   | BASE                                      |
|--------------------|----------------------------------------|-------------------------------------------|
| **ะฆะตะปั**           | ะะพััะตะบัะฝะพััั ะธ ะฝะฐะดัะถะฝะพััั              | ะะฐัััะฐะฑะธััะตะผะพััั ะธ ะดะพัััะฟะฝะพััั            |
| **ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั** | ะกัะฐะทั ะธ ะฒัะตะณะดะฐ                         | ะ ะบะพะฝะตัะฝะพะผ ะธัะพะณะต (eventual consistency)   |
| **ะฅะฐัะฐะบัะตั ะดะฐะฝะฝัั**| ะกััะพะณะพะต ัะพััะพัะฝะธะต                      | ะัะณะบะพะต ัะพััะพัะฝะธะต (soft state)             |
| **ะขัะฐะฝะทะฐะบัะธะธ**     | ะกััะพะณะธะต, ะฐัะพะผะฐัะฝัะต                     | ะัะปะฐะฑะปะตะฝะฝัะต, ัะฐัะฟัะตะดะตะปัะฝะฝัะต               |
| **ะัะธะผะตะฝะตะฝะธะต**     | ะะฐะฝะบะธ, ัะธะฝะฐะฝัั, ERP-ัะธััะตะผั            | Big Data, ัะพััะตัะธ, e-commerce, IoT        |
| **ะะปััั**          | ะััะพะบะฐั ะบะพััะตะบัะฝะพััั                   | ะััะพะบะฐั ะดะพัััะฟะฝะพััั ะธ ะผะฐัััะฐะฑะธััะตะผะพััั    |
| **ะะธะฝััั**         | ะะณัะฐะฝะธัะตะฝะฝะฐั ะผะฐัััะฐะฑะธััะตะผะพััั          | ะะพะทะผะพะถะฝะฐ ะฒัะตะผะตะฝะฝะฐั ะฝะตัะพะณะปะฐัะพะฒะฐะฝะฝะพััั      |

### ะัะพะณ
- **ACID** = ัััะพะณะฐั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะธ ะฝะฐะดัะถะฝะพััั, ะฝะพ ะผะตะฝััะต ะณะธะฑะบะพััะธ ะฟัะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะธ.
- **BASE** = ะฒััะพะบะฐั ะดะพัััะฟะฝะพััั ะธ ะผะฐัััะฐะฑะธััะตะผะพััั, ะฝะพ ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะดะพััะธะณะฐะตััั ะฝะต ััะฐะทั.  

## 44. ะฃ ะฒะฐั ะตััั ัะฐะฑะปะธัะฐ ะปะพะณะพะฒ ั ะผะธะปะปะธะฐัะดะฐะผะธ ัััะพะบ. ะะฐะบ ะฒั ะฑัะดะตัะต ััะบะพัััั ะฟะพะธัะบ ะฟะพ ะดะฐัะต ะธ `user_id`?

ะะฟัะธะผะธะทะฐัะธั ะดะพะปะถะฝะฐ ัััะพะธัััั ะฟะพ ะฝะตัะบะพะปัะบะธะผ ะฝะฐะฟัะฐะฒะปะตะฝะธัะผ:

### 1. ะะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต
- ะะฐะทะฑะธัั ัะฐะฑะปะธัั ะฟะพ ะดะฐัะต (`RANGE PARTITION BY ts`), ััะพะฑั ะทะฐะฟัะพัั ััะฐะทั ะพัะฑัะฐััะฒะฐะปะธ ะฝะตะฝัะถะฝัะต ะฟะฐััะธัะธะธ (*partition pruning*).
- ะะปั ะฑะพะปััะธั ะฟะฐััะธัะธะน ะผะพะถะฝะพ ะดะพะฑะฐะฒะธัั ััะฑะฟะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต ะฟะพ ัััั `user_id`.  
  โ ะญัะพ ะฟะพะทะฒะพะปะธั ัะธัะฐัั ัะพะปัะบะพ ัะตะปะตะฒะฐะฝัะฝัะต ะบััะบะธ ะดะฐะฝะฝัั.

### 2. ะะฝะดะตะบัั
- ะกะพะทะดะฐัั ัะพััะฐะฒะฝะพะน ะธะฝะดะตะบั `(user_id, ts)` ะธะปะธ `(ts, user_id)` โ ะฟะพััะดะพะบ ะฒัะฑะธัะฐะตััั ะฟะพ ัะตะฐะปัะฝัะผ ะฟะฐััะตัะฝะฐะผ ะทะฐะฟัะพัะพะฒ.
- ะะปั ัะธัะพะบะธั ะดะธะฐะฟะฐะทะพะฝะพะฒ ะดะฐั ะธัะฟะพะปัะทะพะฒะฐัั **BRIN-ะธะฝะดะตะบั** ะฟะพ `ts`, ะพะฝ ะพัะตะฝั ะปัะณะบะธะน ะธ ัะพัะพัะพ ัะฐะฑะพัะฐะตั ะฝะฐ ะฑะพะปััะธั append-only ะปะพะณะฐั.
- ะะปั ัะฐััะพ ะธัะฟะพะปัะทัะตะผัั ยซะณะพัััะธัยป ะดะฐะฝะฝัั ัะดะตะปะฐัั **ัะฐััะธัะฝัะน ะธะฝะดะตะบั**, ะฝะฐะฟัะธะผะตั, ัะพะปัะบะพ ะทะฐ ะฟะพัะปะตะดะฝะธะต 30 ะดะฝะตะน.
- ะัะปะธ ะทะฐะฟัะพัั ะฒะพะทะฒัะฐัะฐัั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะฟะพะปั โ ะธัะฟะพะปัะทะพะฒะฐัั **covering-ะธะฝะดะตะบั (INCLUDE)**.

### 3. ะะตัะตะฟะธััะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ
- ะะต ะธัะฟะพะปัะทะพะฒะฐัั ััะฝะบัะธะธ ะฝะฐะด ะบะพะปะพะฝะบะพะน ะดะฐัั (`date(ts)`) โ ััะพ ะปะพะผะฐะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะธะฝะดะตะบัะฐ.
- ะะผะตััะพ ััะพะณะพ ะทะฐะดะฐะฒะฐัั ะดะธะฐะฟะฐะทะพะฝ:
```sql
  ts >= โ2025-08-24 00:00:00โ AND ts < โ2025-08-25 00:00:00โ
```
### 4. ะะปะฐััะตัะธะทะฐัะธั ะธ ะพะฑัะปัะถะธะฒะฐะฝะธะต
- ะัะฟะพะปัะทะพะฒะฐัั `CLUSTER` ะธะปะธ `pg_repack` ะดะปั ะฟะพะดะดะตัะถะฐะฝะธั ะปะพะบะฐะปัะฝะพััะธ ะดะฐะฝะฝัั.
- ะกะปะตะดะธัั ะทะฐ ััะฐัะธััะธะบะพะน (`ANALYZE`) ะธ ะฟะฐัะฐะผะตััะฐะผะธ `autovacuum`.

### 5. ะะพะฟะพะปะฝะธัะตะปัะฝะพ
- ะะปั ัะปะพะถะฝัั ะฐะฝะฐะปะธัะธัะตัะบะธั ััะตะฝะฐัะธะตะฒ ะธัะฟะพะปัะทะพะฒะฐัั **TimescaleDB (hypertables)** ะธะปะธ ะผะฐัะตัะธะฐะปะธะทะพะฒะฐะฝะฝัะต ะฟัะตะดััะฐะฒะปะตะฝะธั.
- ะัะพะฒะตัััั ัะตะฐะปัะฝัะน ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั ัะตัะตะท:
```sql
  EXPLAIN (ANALYZE, BUFFERS)
    SELECT โฆ
```

### ะัะพะณ
- **ะะฐััะธัะธะพะฝะธัะพะฒะฐะฝะธะต ะฟะพ ะดะฐัะต** + **ะธะฝะดะตะบัั ะฟะพ `user_id` ะธ `ts`** โ ะพัะฝะพะฒะฝะพะต ัะตัะตะฝะธะต.
- **BRIN ะธ ัะฐััะธัะฝัะต ะธะฝะดะตะบัั** ะดะฐัั ะฒัะธะณััั ะดะปั ะพะณัะพะผะฝัั ะพะฑััะผะพะฒ.
- ะะปััะตะฒะพะน ะฟัะธะฝัะธะฟ โ ยซััะพะฑั ะกะฃะะ ัะธัะฐะปะฐ ะบะฐะบ ะผะพะถะฝะพ ะผะตะฝััะต ัััะพะบ ะธ ัััะฐะฝะธัยป.  